# 图片相关知识

## 前言

本人平时学习及收集内容，欢迎参入一起讨论。

## 内容

- [图片格式选择](#一、图片格式选择)
- [图的类型分类](#二、图的类型分类)
- [图的压缩分类](#三、图的压缩分类)
- [常见的图片格式解析](#四、常见的图片格式解析)

### 一、图片格式选择

| 图片格式             | 压缩方式 | 透明度 | 动画   | 浏览器兼容                 | 适应场景                       |
| -------------------- | -------- | ------ | ------ | -------------------------- | ------------------------------ |
| baseline-jpeg        | 有损压缩 | 不支持 | 不支持 | 所有                       | 复杂颜色及形状、尤其是照片     |
| progressive-jpeg     | 有损压缩 | 不支持 | 不支持 | 所有                       | 复杂颜色及形状、尤其是照片     |
| JPEG                 | 有损压缩 | 不支持 | 不支持 | 所有                       | 复杂颜色及形状、尤其是照片     |
| GIF                  | 无损压缩 | 支持   | 支持   | 所有                       | 简单颜色，动画                 |
| PNG                  | 有损压缩 | 支持   | 不支持 | 所有                       | 需要透明时                     |
| APNG                 | 有损压缩 | 支持   | 支持   | 所有（除 IE 和 Oper 外）   | 需要半透明效果的动画           |
| WebP                 | 有损压缩 | 支持   | 支持   | 所有（除 IE 和 Safari 外） | 复杂颜色及形状浏览器平台可预知 |
| SVG                  | 有损压缩 | 支持   | 不支持 | 所有（IE8 以上）           | 简单图形，需要良好的放缩体验   |
| 需要动态控制图片特效 |

### 二、图的类型分类

- [位图(点阵图)](#_2-1-位图-点阵图)
- [矢量图](#_2-2-矢量图)

#### 2.1 位图(点阵图)

位图，也叫做阵图，像素图。构成点阵图的最小单位是像素，位图就是由像素阵列的排列来实现其显示效果的，**每个像素有自己的颜色信息**，在对位图图像进行编辑操作的时候，可以操作的对象是每个像素，我们可以改变图像的色相、饱和度、透明度，从而改变图像的显示效果。

常见的比如：jpg、png、webp 等，我们平时遇到的大多数都是**位图**。

#### 2.2 矢量图

矢量图，也叫做向量图。矢量图并不纪录画面上每一点信息，而是纪录了元素开着及颜色的算法，当你打开一幅矢量图的时候，软件对图形对应的函数进行运算，将运算结果图形的形状和颜色显示给你看。

无论显示画面是大还是小，画面上的对象对应的算法是不变的，所以，即使对画面进行位数相当大的缩放，其显示效果仍然相同（不失真）。

常见的就是**SVG**格式的。

### 三、图的压缩分类

- [无压缩](#_3-1-无压缩)
- [无损压缩](#_3-2-无损压缩)
- [有损压缩](#_3-3-有损压缩)

#### 3.1 无压缩

无压缩的图片格式不对图片数据进行压缩处理，能准确地呈现原图片，BMP 格式就是其中之一。

#### 3.2 无损压缩

在压缩图片的过程中，图片的质量没有任何损耗。我们任何时候都可以从无损压缩过的图片中恢复出原来的信息。

压缩算法对图片的所有的数据进行编码压缩，能在保证图片的质量的同时降低图片的尺寸。

png 是其中的代表。

#### 3.3 有损压缩

指在压缩文件大小的过程中，损失了一部分图片的信息，也即降低了图片的质量，并且这种损失是不可逆的，我们不可能从一个有损压缩过的图片中恢复出完整的图片。

常见的有损压缩手段，是按照一定的算法将临近的像素点进行合并。压缩算法不会对图片所有的数据进行编码压缩，而是在压缩的时候，去除了人眼无法识别的图片细节。因此有损压缩可以在同等图片质量的情况下大幅降低图片的尺寸。其中的代表是`jpg`。

#### 小结

- 使用有损压缩处理图像，是支队某些像素数据，无法打架原图。
- 使用无损处理图像，是对像素数据进行压缩，可以找回原图。

### 四、常见的图片格式解析

- [GIF](#_4-1-gif)
- [JPG/JPEG](#_4-2-jpg-jpeg)
- [PNG](#_4-3-png)
- [WebP](#_4-4-webp)
- [SVG](#_4-5-svg)

#### 4.1 GIF

**关键词**：无损压缩、索引色、透明、动画

GIF 的原义是“图像互换格式”，是一种基于 LZW 算法连续色调的无损的基于索引色的压缩格式。其压缩率一般在`50%`左右，它不属于任何应用程序所以几乎所有相关软件都支持它，公共领域有大量的软件在使用 GIF 图像文件。

> GIF 是一种无损压缩，所以它只是对像素数据进行压缩，其实 LZW 算法只是一个压缩数据的算法，如果你懂哈夫曼算法的话，可能就比较好理解压缩数据是怎么回事儿

GIF 的特性是**帧动画**。

相比古老的 bmp 格式，尺寸较小，而且支持透明(不支持半透明，因为不支持 Alpha 透明通道 )和动画。

**优势**

1. 优秀的压缩算法使其在一定程度上保证图像质量的同时将体积变得很小。
2. 可插入多帧，从而实现动画效果。
3. 可设置透明色以产生对象浮现于背景之上的效果。

**缺点**

由于采用了 8 位压缩，最多只能处理 256 种颜色，故不宜应用于**真彩色**(文末的附录有解释)图片。

**适合场景**

色彩简单的 logo、icon、线框图、文字输出等。

#### 4.2 JPG/JPEG

**关键词**： 有损压缩、直接色、适合大图、体积小

JPEG 格式是最常见的一种图像格式，文件后辍名为“.JPEG”或“.jpg”，JPEG 可以说是人们最熟悉的图档格式，相信在数字相机普及的现在，几乎每台数字相机、照相手机都可以（甚至只能）输出 JPEG 格式的图档。

JPEG 是一种很典型的使用有损压缩图像格式，也就是说使用都每次进行 JPEG 的存档动作后，图档的一些内容都会遭到永久性的破坏，尤其是使用过高的压缩比例，将其最终解压缩后恢复的图像质量明显降低，如果追求高品质图像，不家采用过高压缩比例。

JPEG 图片格式的设计目标，是在不影响人类可分辨的图片质量的前提下，尽可能的压缩文件大小。

**Baseline JPEG 和 Progressive JPEG**

JPEG 有两种保存方式：Baseline JPEG(标准型)、Progressive JPEG(渐进式)。两种格式有相同尺寸以及图像数据，他们的扩展名也是相同的，唯一的区别是二者显示的方式不同。

JPEG 有两种保存方式：Baseline JPEG（标准型）、Progressive JPEG（渐进式）。两种格式有相同尺寸以及图像数据，他们的扩展名也是相同的，唯一的区别是二者显示的方式不同。

**Baseline JPEG**

**Progressive JPEG**

**优点**

**缺点**

**适合场景**

**GIF vs JPEG**

#### 4.3 PNG

#### 4.4 WebP

#### 4.5 SVG

### 参考资料

- [Web 性能优化：图片优化](http://www.cnblogs.com/wizcabbit/p/web-image-optimization.html)
- [每个前端工程师都应该了解的图片知识(长文建议收藏)](https://mp.weixin.qq.com/s/O1n7_t4izdmpvn2mFrB-kg)
- [你必须知道的图片优化技巧](https://mp.weixin.qq.com/s/oJy2fncLjtlt9XmPRWnqVw)
- [为你重新系统梳理下， Web 体验优化中和图有关的那些事（万字长文）](https://mp.weixin.qq.com/s/euvdMHkYUXHmgkV9D334NQ)
- [Web 性能优化：图片优化](https://www.cnblogs.com/wizcabbit/p/web-image-optimization.html)
- [webp 图片实践之路](https://www.cnblogs.com/season-huang/p/5804884.html)

## 联系作者

<div align="center">
    <p>
        平凡世界，贵在坚持。
    </p>
    <img :src="$withBase('/about/contact.png')" />
</div>
