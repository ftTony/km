# JS 编译器，解释引擎

## 前言

本人平时学习及收集内容，欢迎参入一起讨论。

## 内容

- 编译过程
- 实战分析
- JIT 优化

### 一、编译过程

- 词法分析
- 语法分析
- 代码生成
- 预编译
- 解释器引擎执行

接下来的案例均根据以下代码进行。

```
var a = 10;
```

#### 1.1 词法分析

把输入的字符串分解为一些对编程语言有意义的代码块（词法单元）。例如上文案例会被解析成`var`，`a`，`=`，`10`。

#### 1.2 语法分析

这个过程会将词法单元转换成一棵抽象语法树(Abstract Syntax Tree，AST)。

#### 1.3 代码生成

将 AST 代码转换为可执行代码。简单来说，就是将 AST 转为一组`机器指令`，用来创建一个叫做 a 的变量（包括分配内存等），并将一个值 10 存储在 a 中。

#### 1.4 预编译

#### 1.5 解释器引擎执行

### 二、实战分析

接下来，我们根据以下代码进行 js 编译流程分析。

```
var a;
a = 2;
console.log(a);
```

### 三、JIT 优化

JS 是解释型语言且弱类型，在生成 AST 之后，就开始一边编译，一边解释，但是有个弊端，当某段代码被多次执行时，就会进行多次编译解析操作，特别是在一个循环内，将消耗大量的性能。

JIT 是编译型语言和解释性语言的混合，在一边编译，一边解释时做了一些优化，常用的优化有以下几点。

### 参考资料

- [JS 编译器，解释引擎](https://yhlben.github.io/blog/js-principle.html)

## 联系作者

<div align="center">
    <p>
        平凡世界，贵在坚持。
    </p>
    <img :src="$withBase('/about/contact.png')" />
</div>
