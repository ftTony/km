# node.js 中的消息队列

## 前言

本人平时学习及收集内容，欢迎参入一起讨论。

## 内容

- 什么是消息队列
- 为什么要使用消息队列
- 消息队列应用场景
- 主流消息中间件
- 安装 RabbitMQ

### 一、什么是消息队列

### 二、为什么要使用消息队列

近两年谈的很多一个概念**微服务**，在一个大型业务系统架构中，会被拆分成很多小的业务系统，这些业务系统之间如何建立通信呢？大家熟悉的 HTTP、RPC 可以实现不同系统、不同语言之间的通信，除了这些往往还会使用消息队列（RabbitMQ、ActiveMQ、Kafafa 等）将这些系统链接起来，达到各系统间的解耦。

消息队列有如下优势：

1. **应用解耦**：消息队列可以使用消费者
2. **灵活性和峰值处理能力**：
3. **排序保证**：
4. **异步通信**：
5. **可扩展性**：

### 三、消息队列应用场景

- 双十一商品秒杀/抢票功能实现
- 积分兑换(积分可用于多平台)
- 发送邮件，用户大数据分析等 同步变异步功能实现

#### 3.1 双十一商品秒杀/抢票功能实现

#### 3.2 积分兑换(积分可用于多平台)

#### 3.3 发送邮件，用户大数据分析等 同步变异步功能实现

- 用户注册
- 用户注册选择几个兴趣标签，这时候需要根据用户的属性，用户分析，计算出推荐内容
- 注册后可能需要发送邮件给用户
- 发送给用户一个包含操作指南的系统通知

### 四、主流消息中间件

- RabbitMQ
- RocketMQ
- ActiveMQ
- Kafka

#### 4.1 RabbitMQ

一个由 erlang 语言开发基于 AMQP 协议的开源消息队列系统。能保证消息的可靠性、稳定性、安全性。

#### 4.2 RocketMQ

阿里开源的消息中间件，是一款低延迟、高可靠、可伸缩、易于使用的消息中间件，思路起源于 kafka。最大的问题商业版收费，有功能不开放。

#### 4.3 ActiveMQ

Apache 出品，早起很流行主要应用中小企业，面对大量并发场景会有阻塞、消息堆积问题。

#### 4.4 Kafka

是由 Apache 软件基金会开发的一个开源流处理平台，由 Scala 和 Java 编写，是一种高吞吐量的分布式发布订阅消息系统，支持单机每秒百万并发。最开始目的主要用于套数据方向日志收集、传输。0.8 版本开始支持复制，不支持事物，因此对消息的重复、丢失、错误没有严格的要求。

### 五、安装 RabbitMQ

### 参考资料

- [消息队列助- Node.js 实践篇](http://www.inode.club/node/queue.html)
- [消息中间件 RabbitMQ 入门篇](https://www.nodejs.red/#/microservice/rabbitmq-base)

## 联系作者

<div align="center">
    <p>
        平凡世界，贵在坚持。
    </p>
    <img :src="$withBase('/about/contact.png')" />
</div>
