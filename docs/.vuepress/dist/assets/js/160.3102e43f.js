(window.webpackJsonp=window.webpackJsonp||[]).push([[160],{383:function(s,a,e){"use strict";e.r(a);var n=e(4),r=Object(n.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"fs-模块"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#fs-模块","aria-hidden":"true"}},[s._v("#")]),s._v(" fs 模块")]),s._v(" "),e("h2",{attrs:{id:"前言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前言","aria-hidden":"true"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),e("p",[s._v("fs模块是文件操作的封装，它提供了文件的读取、写入、更名、删除、遍历目录、链接等POSIX文件系统操作。")]),s._v(" "),e("h2",{attrs:{id:"内容"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#内容","aria-hidden":"true"}},[s._v("#")]),s._v(" 内容")]),s._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"#%E4%B8%80%E3%80%81%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96"}},[s._v("文件读取")])]),s._v(" "),e("li",[e("a",{attrs:{href:"#%E4%BA%8C%E3%80%81%E6%96%87%E4%BB%B6%E5%86%99%E5%85%A5"}},[s._v("文件写入")])]),s._v(" "),e("li",[e("a",{attrs:{href:"#%E4%B8%89%E3%80%81%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8"}},[s._v("文件是否存在")])]),s._v(" "),e("li",[e("a",{attrs:{href:"#%E5%9B%9B%E3%80%81%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95"}},[s._v("创建目录")])]),s._v(" "),e("li",[e("a",{attrs:{href:"#%E4%BA%94%E3%80%81%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6"}},[s._v("删除文件")])]),s._v(" "),e("li",[e("a",{attrs:{href:"#%E5%85%AD%E3%80%81%E9%81%8D%E5%8E%86%E7%9B%AE%E5%BD%95"}},[s._v("遍历目录")])]),s._v(" "),e("li",[e("a",{attrs:{href:"#%E4%B8%83%E3%80%81%E6%96%87%E4%BB%B6%E9%87%8D%E5%91%BD%E5%90%8D"}},[s._v("文件重命名")])]),s._v(" "),e("li",[e("a",{attrs:{href:"#%E5%85%AB%E3%80%81%E7%9B%91%E5%90%AC%E6%96%87%E4%BB%B6%E4%BF%AE%E6%94%B9"}},[s._v("监听文件修改")])]),s._v(" "),e("li",[e("a",{attrs:{href:"#%E4%B9%9D%E3%80%81%E8%8E%B7%E5%8F%96%E6%96%87%E4%BB%B6%E7%8A%B6%E6%80%81"}},[s._v("获取文件状态")])]),s._v(" "),e("li",[e("a",{attrs:{href:"#%E5%8D%81%E3%80%81%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90%E6%A3%80%E6%B5%8B"}},[s._v("访问/权限检测")])]),s._v(" "),e("li",[e("a",{attrs:{href:"#%E5%8D%81%E4%B8%80%E3%80%81%E6%96%87%E4%BB%B6%E6%89%93%E5%BC%80%E5%85%B3%E9%97%AD"}},[s._v("文件打开/关闭")])]),s._v(" "),e("li",[e("a",{attrs:{href:"#%E5%8D%81%E4%BA%8C%E3%80%81%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96"}},[s._v("文件读取")])]),s._v(" "),e("li",[e("a",{attrs:{href:"#%E5%8D%81%E4%B8%89%E3%80%81%E8%BF%BD%E5%8A%A0%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9"}},[s._v("追加文件内容")])])]),s._v(" "),e("h3",{attrs:{id:"一、文件读取"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、文件读取","aria-hidden":"true"}},[s._v("#")]),s._v(" 一、文件读取")]),s._v(" "),e("p",[e("strong",[s._v("普通读取")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("var fs = require('fs');\nvar data;\n\ntry{\n    data = fs.readFileSync('./fileForRead.txt','utf8');\n    console.log('文件内容：' + data);\n}cat(err){\n    console.error('读取文件出错：' + err.message);\n}\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[e("strong",[s._v("异步读取")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("var fs = require('fs');\n\nfs.readFile('./fileForRead.txt','uft8',function(err,data){\n    if(err){\n        return console.error('读取文件出错：' + err.message);\n    }\n    console.log('文件内容：' + data);\n})\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[e("strong",[s._v("通过文件流读取")])]),s._v(" "),e("p",[s._v("适合读取大文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("var fs = require('fs');\nvar readStream = fs.createReadStream('./fileForRead.txt','utf8');\n\nreadStream.on('data',function(chunk){\n    console.log('读取数据：'+chunk);\n}).on('error',function(err){\n    console.log('出错：'+err.message);\n}).on('end',function(){ // 没有数据了\n    console.log('没有数据了');\n}).on('close',function(){   // 已经关闭，不会再有事件抛出\n    console.log('已经关闭');\n})\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("h3",{attrs:{id:"二、文件写入"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、文件写入","aria-hidden":"true"}},[s._v("#")]),s._v(" 二、文件写入")]),s._v(" "),e("p",[s._v("备注：以下代码，如果文件不存在，则创建文件；如果文件存在，则覆盖文件内容；")]),s._v(" "),e("p",[e("strong",[s._v("异步写入")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("var fs = require('fs');\n\nfs.writeFile('./fileForWrite.txt','hello world','utf8',function(err){\n    if(err) throw err;\n    console.log('文件写入成功');\n});\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[e("strong",[s._v("同步写入")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("var fs = require('fs');\n\ntry{\n    fs.writeFileSync('./fileForWrite1.txt','hello world','utf8');\n    console.log('文件写入成功');\n}catch(err){\n    throw err;\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[e("strong",[s._v("通过文件流写入")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("var fs = require('fs');\nvar writeStream = fs.createWriteStream('./fileForWrite1.txt','utf8');\n\nwriteStream.on('close',function(){  // 已经关闭，不会再有事件抛出\n    console.log('已经关闭');\n});\n\nwriteStream.write('hello');\nwriteStream.write('world');\nwriteStream.end('');\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("h3",{attrs:{id:"三、文件是否存在"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三、文件是否存在","aria-hidden":"true"}},[s._v("#")]),s._v(" 三、文件是否存在")]),s._v(" "),e("p",[e("code",[s._v("fs.exists()")]),s._v("已经是"),e("code",[s._v("deprecated")]),s._v("状态，现在可以通过下面代码判断文件是否存在。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("var fs = require('fs');\n\nfs.access('./fileForRead.txt',function(err){\n    if(err) throw err;\n    console.log('fileForRead.txt存在');\n});\n\nfs.access('./fileForRead2.txt',function(err){\n    if(err) throw err;\n    console.log('fileForRead2.txt存在');\n});\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("p",[e("code",[s._v("fs.access()")]),s._v("除了判断文件是否存在（默认模式），还可以用来判断文件的权限。")]),s._v(" "),e("h3",{attrs:{id:"四、创建目录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四、创建目录","aria-hidden":"true"}},[s._v("#")]),s._v(" 四、创建目录")]),s._v(" "),e("p",[s._v("异步版本（如果目录已存在，会报错）")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("var fs = require('fs');\n\nfs.mkdir('./hello',function(err){\n    if(err) throw err;\n    console.log('目录创建成功');\n})\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("同步版本")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("var fs = require('fs');\n\nfs.mkdirSync('./hello');\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"五、删除文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#五、删除文件","aria-hidden":"true"}},[s._v("#")]),s._v(" 五、删除文件")]),s._v(" "),e("p",[s._v("异步方式")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("var fs = require('fs');\n\nfs.unlink('',function(err){\n    if(err) throw err;\n    console.log('文件删除成功');\n})\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("同步方式")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("var fs = require('fs');\n\nfs.unlinkSync('./fileForUnlink.txt');\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"六、遍历目录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#六、遍历目录","aria-hidden":"true"}},[s._v("#")]),s._v(" 六、遍历目录")]),s._v(" "),e("p",[e("strong",[s._v("同步方式")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("var fs = require('fs');\nvar path = require('path');\n\nvar getFileInDir = function (dir) {\n    var results = [path.resolve(dir)];\n    var files = fs.readdirSync(dir, 'utf8');\n\n    files.forEach(function (file) {\n\n        file = path.resolve(dir, file);\n\n        var stats = fs.statSync(file);\n\n        if (stats.isFile()) {\n            results.push(file);\n        } else if (stats.isDirectory()) {\n            results = results.concat(getFileInDir(file));\n        }\n    });\n\n    return results;\n};\nvar files = getFileInDir('../');\nconsole.log(files);\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br")])]),e("p",[e("strong",[s._v("异步方式")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// 异步方式遍历目录\n\nvar fs = require('fs');\nvar path = require('path');\n\nvar getFileInDir = function (dir) {\n    var results = [path.resolve(dir)];\n    fs.readdir(dir, { encoding: 'utf8' }, function (err, files) {\n        files.forEach(function (file) {\n\n            file = path.resolve(dir, file);\n\n            var stats = fs.statSync(file);\n\n            if (stats.isFile()) {\n                results.push(file);\n            } else if (stats.isDirectory()) {\n                results = results.concat(getFileInDir(file));\n            }\n        });\n    });\n    return results;\n};\nvar files = getFileInDir('../');\nconsole.log(files);\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br")])]),e("h3",{attrs:{id:"七、文件重命名"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#七、文件重命名","aria-hidden":"true"}},[s._v("#")]),s._v(" 七、文件重命名")]),s._v(" "),e("p",[e("strong",[s._v("异步")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("var fs = require('fs');\nfs.rename('./hello', './world', function(err){\n    if(err) throw err;\n    console.log('重命名成功');\n});\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[e("strong",[s._v("同步")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("fa.renameSync(oldPath,newPath);\nvar fs = require('fs');\n\nfs.renameSync('./world','./hello');\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"八、监听文件修改"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#八、监听文件修改","aria-hidden":"true"}},[s._v("#")]),s._v(" 八、监听文件修改")]),s._v(" "),e("p",[e("code",[s._v("fs.watch()")]),s._v("比"),e("code",[s._v("fs.watchFile")]),s._v("高效很多")]),s._v(" "),e("h4",{attrs:{id:"fs-watchfile"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#fs-watchfile","aria-hidden":"true"}},[s._v("#")]),s._v(" fs.watchFile()")]),s._v(" "),e("p",[s._v("实现原理：轮询。每隔一段时间检查文件是否发生变化。所以在不同平台上表现基本是一致的。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("var fs = require('fs');\n\nvar options ={\n    persistent:true,    // 默认就是true\n    interval:2000       // 多久检查一次\n};\n\nfs.watchFile('./fileForWatch.txt',options,function(curr,prev){\n    console.log('修改时间为：'+curr.mtime);\n})\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("var fs = require('fs');\n\nvar options = {\n    persistent: true,\n    recursive: true,\n    encoding: 'utf8'\n};\n\nfs.watch('../', options, function(event, filename){\n    console.log('触发事件:' + event);\n    if(filename){\n        console.log('文件名是: ' + filename);\n    }else{\n        console.log('文件名是没有提供');\n    }\n});\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br")])]),e("h3",{attrs:{id:"九、获取文件状态"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#九、获取文件状态","aria-hidden":"true"}},[s._v("#")]),s._v(" 九、获取文件状态")]),s._v(" "),e("p",[s._v("相关方法如下：")]),s._v(" "),e("ul",[e("li",[s._v("stats.isFile()——是否文件")]),s._v(" "),e("li",[s._v("stats.isDirectory()——是否目录")]),s._v(" "),e("li",[s._v("stats.isSocket() -- 是不是socket文件")]),s._v(" "),e("li",[s._v("atime：Access Time // 访问时间")]),s._v(" "),e("li",[s._v("mtime:: Modified Time // 文件内容修改时间")]),s._v(" "),e("li",[s._v("ctime: Changed Time. // 文件状态修改时间，比如修改文件所有者、修改权限、重命名等")]),s._v(" "),e("li",[s._v("birthtime: Birth Time // 创建时间。在某些系统上是不可靠的，因为拿不到。")])]),s._v(" "),e("p",[e("strong",[s._v("异步方式")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("var fs = require('fs');\n\nvar getTimeDesc = function (d) {\n    return [d.getFullYear(), d.getMonth() + 1, d.getDate()].join('-') + ' ' + [d.getHours(), d.getMinutes(), d.getSeconds()].join(':');\n}\n\nfs.stat(__dirname + '\\\\file.txt', function (err, stats) {\n    if (err) {\n        console.error(err.message)\n        return\n    }\n    console.log('文件大小：' + stats.size);\n    console.log('创建时间：' + getTimeDesc(stats.birthtime));\n    console.log('访问时间：' + getTimeDesc(stats.atime));\n    console.log('修改时间：' + getTimeDesc(stats.mtime));\n})\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br")])]),e("p",[e("strong",[s._v("同步方式")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("var fs = require('fs');\n\nvar getTimeDesc = function(d){\n\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h3",{attrs:{id:"十、访问-权限检测"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#十、访问-权限检测","aria-hidden":"true"}},[s._v("#")]),s._v(" 十、访问/权限检测")]),s._v(" "),e("p",[e("strong",[s._v("异步版本")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("var fs = require('fs');\n\nfs.access('./fileForAccess.txt',function(err){\n    if(err) throw err;\n    console.log('可以访问');\n})\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[e("strong",[s._v("同步版本")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("var fs = require('fs');\n\n// 如果成功，则返回undefined，如果失败则抛出错误\ntry{\n    fs.accessSync('./fileForAccess.txt');\n}catch(e){\n    throw(e);\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h3",{attrs:{id:"十一、文件打开-关闭"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#十一、文件打开-关闭","aria-hidden":"true"}},[s._v("#")]),s._v(" 十一、文件打开/关闭")]),s._v(" "),e("p",[e("code",[s._v("fs.open(path[, flags[, mode]], callback)")]),s._v("异步地打开文件。")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("path")]),s._v("文件路径。")]),s._v(" "),e("li",[e("code",[s._v("flags")]),s._v("可以是以下值。\n"),e("ul",[e("li",[s._v("r：以读取模式打开文件。")]),s._v(" "),e("li",[s._v("r+：以读写模式打开文件。")]),s._v(" "),e("li",[s._v("w：以写入模式打开文件，如果文件不存在则创建。")]),s._v(" "),e("li",[s._v("w+：以读写模式打开文件，如果文件不存在则创建。")]),s._v(" "),e("li",[s._v("a：以追加模式打开文件，如果文件不存在则创建。")]),s._v(" "),e("li",[s._v("a+：以读取追加模式打开文件，如果文件不存在则创建。")])])]),s._v(" "),e("li",[e("code",[s._v("mode")]),s._v("：用于创建文件时给文件指定权限。")]),s._v(" "),e("li",[e("code",[s._v("callback")]),s._v("：回调函数")])]),s._v(" "),e("p",[e("code",[s._v("fs.close(fd, callback)")]),s._v("异步地关闭文件。")]),s._v(" "),e("h3",{attrs:{id:"十二、文件读取"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#十二、文件读取","aria-hidden":"true"}},[s._v("#")]),s._v(" 十二、文件读取")]),s._v(" "),e("p",[e("code",[s._v("fs.read(fd, buffer, offset, length, position, callback)")]),s._v("从指定的文件中读取数据。")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("fd")]),s._v("：文件的句柄。")]),s._v(" "),e("li",[e("code",[s._v("buffer")]),s._v("：将读取的文件内容写到buffer里。")]),s._v(" "),e("li",[e("code",[s._v("offset")]),s._v("：buffer开始写入的位置。（在offset开始写入，还是offset+1？）")]),s._v(" "),e("li",[e("code",[s._v("length")]),s._v("：要读取的字节数")]),s._v(" "),e("li",[e("code",[s._v("position")]),s._v("：文件从哪个位置开始读取。如果是null，那么就从当前位置开始读取。")]),s._v(" "),e("li",[e("code",[s._v("callback")]),s._v("：回调函数，其参数为"),e("code",[s._v("(err,bytesRead,buffer)")])])]),s._v(" "),e("h3",{attrs:{id:"十三、追加文件内容"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#十三、追加文件内容","aria-hidden":"true"}},[s._v("#")]),s._v(" 十三、追加文件内容")]),s._v(" "),e("p",[e("code",[s._v("fs.appendFile(file, data[, options], callback)")]),s._v("异步地将数据追加到文件，如果文件尚不存在则创建该文件。"),e("code",[s._v("data")]),s._v("可以是字符串或"),e("code",[s._v("buffer")]),s._v("。")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("file")]),s._v(":可以是文件路径，也可以是文件句柄")]),s._v(" "),e("li",[e("code",[s._v("data")]),s._v(":要追加的内容。string或者buffer")]),s._v(" "),e("li",[e("code",[s._v("options")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("encoding")]),s._v("：编码，默认是"),e("code",[s._v("utf8")])]),s._v(" "),e("li",[e("code",[s._v("mode")]),s._v("：默认是"),e("code",[s._v("0o666")])]),s._v(" "),e("li",[e("code",[s._v("flag")]),s._v("：默认是"),e("code",[s._v("a")])])])]),s._v(" "),e("li",[e("code",[s._v("callback")]),s._v(":回调函数")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("var fs = require('fs');\n\nfs.appendFile('./extra/fileForAppend.txt','hello','utf8',function(err){\n    if(err) throw err;\n    console.log('append成功');\n})\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h3",{attrs:{id:"参考资料"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[s._v("#")]),s._v(" 参考资料")]),s._v(" "),e("ul",[e("li",[s._v("《nodejs开发指南》")]),s._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/chyingp/nodejs-learning-guide/blob/master/%E6%A8%A1%E5%9D%97/fs.md",target:"_blank",rel:"noopener noreferrer"}},[s._v("fs模块"),e("OutboundLink")],1)])]),s._v(" "),e("h2",{attrs:{id:"联系作者"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#联系作者","aria-hidden":"true"}},[s._v("#")]),s._v(" 联系作者")]),s._v(" "),e("div",{attrs:{align:"center"}},[e("p",[s._v("\n        平凡世界，贵在坚持。\n    ")]),s._v(" "),e("img",{attrs:{src:s.$withBase("/about/contact.png")}})])])}),[],!1,null,null,null);a.default=r.exports}}]);