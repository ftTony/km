(window.webpackJsonp=window.webpackJsonp||[]).push([[206],{429:function(e,s,a){"use strict";a.r(s);var n=a(13),t=Object(n.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"vue-中使用-jsx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-中使用-jsx"}},[e._v("#")]),e._v(" Vue 中使用 JSX")]),e._v(" "),a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[e._v("#")]),e._v(" 前言")]),e._v(" "),a("p",[e._v("关于 JSX 的使用，具体查看官方文档"),a("a",{attrs:{href:"https://cn.vuejs.org/v2/guide/render-function.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("渲染函数 & JSX"),a("OutboundLink")],1)]),e._v(" "),a("h2",{attrs:{id:"内容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#内容"}},[e._v("#")]),e._v(" 内容")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#%E4%B8%80%E3%80%81%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8-jsx%EF%BC%9F"}},[e._v("为什么要使用 JSX？")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#%E4%BA%8C%E3%80%81render-%E6%96%B9%E6%B3%95"}},[e._v("render()方法")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#%E4%B8%89%E3%80%81jsx-%E6%98%AF%E4%BB%80%E4%B9%88"}},[e._v("JSX 是什么")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#%E5%9B%9B%E3%80%81%E9%85%8D%E7%BD%AE-vue-%E4%BB%A5%E4%BD%BF%E7%94%A8-jsx"}},[e._v("配置 Vue 以使用 JSX")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#%E4%BA%94%E3%80%81%E5%9C%A8-vue-%E4%B8%AD%E4%BD%BF%E7%94%A8-jsx-%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E5%9C%B0%E6%96%B9"}},[e._v("在 Vue 中使用 JSX 需要注意的地方")])])]),e._v(" "),a("h3",{attrs:{id:"一、为什么要使用-jsx？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、为什么要使用-jsx？"}},[e._v("#")]),e._v(" 一、为什么要使用 JSX？")]),e._v(" "),a("ul",[a("li",[e._v("JSX 更易读，"),a("code",[e._v("<div></div>")]),e._v("的写法一看就是比"),a("code",[e._v("$this.$createElement('div',{},[...])")]),e._v("简洁很多。")]),e._v(" "),a("li",[e._v("JSX 也是 JavaScript。")]),e._v(" "),a("li",[e._v("Vue 支持 JSX。")]),e._v(" "),a("li",[e._v("JSX 使自定义 Vue 组件更容易导入和管理")])]),e._v(" "),a("p",[e._v("举一个例子来说明为什么 JSX 是好的。")]),e._v(" "),a("p",[e._v("我们要构建一个"),a("code",[e._v("<TextField/>")]),e._v("组件，该组件可以是普通的单行文本输入或多行输入（文本区域）。我们的模板声明可能看起来像这样。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(' <div>\n   <textarea v-if="multiline" v-model="content" :name="name" :placeholder="placeholder" :aria-invalid="false">\n   <input v-else v-model="content" :name="name" :placeholder="placeholder" :aria-invalid="false">\n </div>\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("从上面的代码片段中可以看到，我们很快就会遇到一些问题，比如重复代码等等。想象一下，必须支持"),a("code",[e._v("input")]),e._v("上面所列的各种属性。上面的这个小片段将会增长并成为一个难以维护的噩梦。")]),e._v(" "),a("p",[e._v("要解决这个问题，我们需要使用 Vue 进行降级处理，因此需要使用理接近 Vue 的内部 API 来解决这个问题。")]),e._v(" "),a("h3",{attrs:{id:"二、render-方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、render-方法"}},[e._v("#")]),e._v(" 二、render()方法")]),e._v(" "),a("blockquote",[a("p",[e._v("注意：这里并不是说没有 JSX 就没有一种简单的方法来处理上面的问题，只是说将这个逻辑移动到带有 JSX 的"),a("code",[e._v("render()")]),e._v("方法可以使用组件更直观。")])]),e._v(" "),a("p",[e._v("我们在 Vue 中创建的每个组件都有一个"),a("code",[e._v("render")]),e._v("方法。这个就是 Vue 选择渲染组件的地方。即使我们不定义这个方法，Vue 也会为我们做这件事。")]),e._v(" "),a("p",[e._v("这意味着当我们在 Vue 中定义 HTML 模板时，Vue 的模板编译器将其编译为一个"),a("code",[e._v("createElement")]),e._v("函数，该函数带有几个参数并从"),a("code",[e._v("render")]),e._v("函数返回结果。")]),e._v(" "),a("p",[e._v("为了修复上一节中的代码，我们删除了"),a("code",[e._v("template")]),e._v("属性或"),a("code",[e._v("template")]),e._v("标签，并在组件上定义了"),a("code",[e._v("render()")]),e._v("方法。如果在组件上定义了"),a("code",[e._v("render")]),e._v("方法，则 Vue 将忽略"),a("code",[e._v("template")]),e._v("定义。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("export default{\n    name:'TextField',\n    render (createElement){\n        const tag = this.multiline ? 'textarea' : 'input'\n\n        return createElement(tag,{\n            class:{\n                'text-input': true,\n                'is-disabled': false\n            },\n            attrs:{\n                name: this.name,\n                placeholder:this.placeholder,\n                'aria-invalid':false\n            }\n        })\n    }\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br")])]),a("p",[e._v("上面的代码做了几件事：")]),e._v(" "),a("ol",[a("li",[a("code",[e._v("render")]),e._v("方法从 Vue 获取一个"),a("code",[e._v("createElement")]),e._v("助手。")]),e._v(" "),a("li",[e._v("我们以编程方式定义我们的标签。")]),e._v(" "),a("li",[e._v("然后，我们创建标签并将其属性，类等作为对象传递。我们可以传递给"),a("code",[e._v("createElement")]),e._v("的选项很多。")]),e._v(" "),a("li",[e._v("我们返回新创建的元素进行渲染。")])]),e._v(" "),a("p",[e._v("我们为 Vue 组件定义的每个模板都将转换为可返回"),a("code",[e._v("createElement")]),e._v("函数的"),a("code",[e._v("render")]),e._v("方法。因为这个原因，"),a("code",[e._v("render")]),e._v("方法将优先于模板定义。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// HTML\n<div>\n    <p>Only you can stop forest fires</p>\n</div>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("模板编译器将把上面的 HTML 转换成:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("render(createElement){\n    return createElement(\n        'div',\n        {},\n        createElement(\n            'p',\n            {},\n            'Only you can stop forest fires'\n        )\n    )\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br")])]),a("p",[e._v("现在你可能会问这个问题：“对可读性来说这不好吗？” 答案是肯定的。 一旦定义了具有许多元素嵌套级别或具有多个同级元素的组件，我们就会遇到这个新问题。")]),e._v(" "),a("p",[e._v("这就是 JSX 出现的原因，它可以很好的解决此类问题。")]),e._v(" "),a("h3",{attrs:{id:"三、jsx-是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、jsx-是什么"}},[e._v("#")]),e._v(" 三、JSX 是什么")]),e._v(" "),a("p",[e._v("JSX 是 Facebook 工程团队创造的一个术语。")]),e._v(" "),a("blockquote",[a("p",[e._v("JSX 是 JavaScript 的类似 XML 的语法扩展，没有任何定义的语义")])]),e._v(" "),a("p",[e._v("JSX 不打算由引擎或浏览器实现，相反，我们将使用 Babel 之类的转置器将 JSX 转换成常规的 JS。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// 此行是JSX的示例\nconst heading = <h1>Welcome to Scotch</h1>;\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("基本上，JSX 允许我们在 JS 中使用类似 html 的语法。")]),e._v(" "),a("h3",{attrs:{id:"四、配置-vue-以使用-jsx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、配置-vue-以使用-jsx"}},[e._v("#")]),e._v(" 四、配置 Vue 以使用 JSX")]),e._v(" "),a("p",[e._v("如果使用的 Vue-cli 大于或等于 3.0 版本，那么就直接可以使用 JSX 的语法了。")]),e._v(" "),a("p",[e._v("如果您使用的是不支持 JSX 的 Vue-cli 较版本，则可以通过安装"),a("code",[e._v("babel-preset-vue-app")]),e._v("来添加它，并将其添加到您的"),a("code",[e._v(".babelrc")]),e._v("文件中。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(" # Using npm\n npm install --save-dev babel-preset-vue-app\n\n# Using yarn\n yarn add --dev babel-preset-vue-app\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("在"),a("code",[e._v(".babelrc")]),e._v("文件中，添加：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('{\n "presets": ["vue-app"]\n}\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("我们现在可以在组件的 "),a("code",[e._v("render")]),e._v(" 函数中使用 JSX。")]),e._v(" "),a("h3",{attrs:{id:"五、在-vue-中使用-jsx-需要注意的地方"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五、在-vue-中使用-jsx-需要注意的地方"}},[e._v("#")]),e._v(" 五、在 Vue 中使用 JSX 需要注意的地方")]),e._v(" "),a("p",[e._v("在 Vue 中使用 JSX 需要注意几点。")]),e._v(" "),a("p",[e._v("要监听 JSX 中的事件，我们需要"),a("code",[e._v('"on"')]),e._v("前缀。例如，将"),a("code",[e._v("onClick")]),e._v("用于单击事件。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("render(createElement){\n    return (\n        <button onClick={this.handleClick}></button>\n    )\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("要修改事件，请使用")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("render(createElement){\n    return (\n        <button onClick:prevent={this.handlClick}></button>\n    )\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("绑定变量，注意这里不是使用：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("render(createElement){\n    return (\n        <button content={this.generatedText}></button>\n    )\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("将 HTML 字符串设置为元素的内容，使用"),a("code",[e._v("domPropsInnerHTML")]),e._v("而不是使用"),a("code",[e._v("v-html")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("render(createElement){\n    return (\n        <button></button>\n    )\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("h3",{attrs:{id:"参考资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[e._v("#")]),e._v(" 参考资料")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://juejin.im/post/5e409f02e51d4526f16e3bce",target:"_blank",rel:"noopener noreferrer"}},[e._v("如何在 Vue 中使用 JSX 以及使用它的原因"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://juejin.im/post/5b4eb11a5188251af91a6eaf",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue Render 介绍和一些基本的实例"),a("OutboundLink")],1)])]),e._v(" "),a("h2",{attrs:{id:"联系作者"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#联系作者"}},[e._v("#")]),e._v(" 联系作者")]),e._v(" "),a("div",{attrs:{align:"center"}},[a("p",[e._v("\n        平凡世界，贵在坚持。\n    ")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/about/contact.png")}})])])}),[],!1,null,null,null);s.default=t.exports}}]);