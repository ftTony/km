(window.webpackJsonp=window.webpackJsonp||[]).push([[213],{437:function(s,a,n){"use strict";n.r(a);var e=n(4),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"restful-架构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#restful-架构","aria-hidden":"true"}},[s._v("#")]),s._v(" RESTful 架构")]),s._v(" "),n("h2",{attrs:{id:"前言"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前言","aria-hidden":"true"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),n("p",[s._v("本人平时学习及收集内容，欢迎参入一起讨论。")]),s._v(" "),n("h2",{attrs:{id:"内容"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#内容","aria-hidden":"true"}},[s._v("#")]),s._v(" 内容")]),s._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"#%E4%B8%80%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF-rest"}},[s._v("什么是 REST")])]),s._v(" "),n("li",[n("a",{attrs:{href:"#%E4%BA%8C%E3%80%81rest-%E7%89%B9%E7%82%B9"}},[s._v("REST 特点")])]),s._v(" "),n("li",[n("a",{attrs:{href:"#%E4%B8%89%E3%80%81rest-%E4%BC%98%E7%82%B9"}},[s._v("REST 优点")])]),s._v(" "),n("li",[n("a",{attrs:{href:"#%E5%9B%9B%E3%80%81nodejs-%E5%AE%9E%E7%8E%B0-restful-api"}},[s._v("Nodejs 实现 RESTful API")])])]),s._v(" "),n("h3",{attrs:{id:"一、什么是-rest"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一、什么是-rest","aria-hidden":"true"}},[s._v("#")]),s._v(" 一、什么是 REST")]),s._v(" "),n("p",[s._v("REST：（Representational State Transfer）即"),n("strong",[s._v("表现层状态转换")]),s._v("，定义了"),n("strong",[s._v("资源")]),s._v("的通用访问格式，是一种网络应用程序的"),n("strong",[s._v("设计风格")]),s._v("和"),n("strong",[s._v("开发方式")]),s._v("。")]),s._v(" "),n("p",[s._v("在概念中，需要理解以下几个名称：")]),s._v(" "),n("ol",[n("li",[s._v("资源：即"),n("strong",[s._v("服务器上获取到的东西任何资源")]),s._v("，一条用户记录，一个用户的密码，一张图片等等都是。")]),s._v(" "),n("li",[s._v("资源的表述：即"),n("strong",[s._v("资源格式")]),s._v("，是 HTML、XML、JSON、纯文本、图片等等，可以用各种各样的格式表述你获取到的资源。")]),s._v(" "),n("li",[s._v("状态转移：即"),n("strong",[s._v("URL 定位资源")]),s._v("，用 HTTP 动词（GET，POST，DELETE,DETC）描述操作。操作是动词，资源是名词。")]),s._v(" "),n("li",[s._v("统一接口：即通过统一的接口对资源进行操作。")])]),s._v(" "),n("h3",{attrs:{id:"二、rest-特点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二、rest-特点","aria-hidden":"true"}},[s._v("#")]),s._v(" 二、REST 特点")]),s._v(" "),n("p",[s._v("REST 通常基于使用"),n("code",[s._v("HTTP")]),s._v("，"),n("code",[s._v("URI")]),s._v("和"),n("code",[s._v("XML")]),s._v("以及"),n("code",[s._v("HTML")]),s._v("这些现有的广泛流行的协议和标准，每一种 URI 代表一种资源。")]),s._v(" "),n("p",[s._v("REST 通常使用 "),n("code",[s._v("JSON")]),s._v(" 数据格式。")]),s._v(" "),n("p",[s._v("REST 基本架构的四个方法：")]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("GET")]),s._v("-用于"),n("strong",[s._v("获取数据")])]),s._v(" "),n("li",[n("strong",[s._v("PUT")]),s._v("-用于"),n("strong",[s._v("更新或添加数据")])]),s._v(" "),n("li",[n("strong",[s._v("DELETE")]),s._v("-用于"),n("strong",[s._v("删除数据")])]),s._v(" "),n("li",[n("strong",[s._v("POST")]),s._v("- 用于"),n("strong",[s._v("添加数据")])])]),s._v(" "),n("h3",{attrs:{id:"三、rest-优点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三、rest-优点","aria-hidden":"true"}},[s._v("#")]),s._v(" 三、REST 优点")]),s._v(" "),n("ul",[n("li",[s._v("可更高效利用缓存来提高响应速度")]),s._v(" "),n("li",[s._v("通讯本身的无状态性可以让不同的服务器的处理一系列请求中的不同请求，提高服务器的扩展性")]),s._v(" "),n("li",[s._v("浏览器即可作为客户端，简化软件需求")]),s._v(" "),n("li",[s._v("相对于其他叠加在 HTTP 协议之上的机制，REST 的软件依赖性更小")]),s._v(" "),n("li",[s._v("不需要额外的资源发现机制")]),s._v(" "),n("li",[s._v("在软件技术演进中的长期的兼容性更好")])]),s._v(" "),n("h3",{attrs:{id:"四、nodejs-实现-restful-api"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#四、nodejs-实现-restful-api","aria-hidden":"true"}},[s._v("#")]),s._v(" 四、Nodejs 实现 RESTful API")]),s._v(" "),n("ul",[n("li",[s._v("初始化 mock 数据")]),s._v(" "),n("li",[s._v("获取用户列表")]),s._v(" "),n("li",[s._v("添加用户")]),s._v(" "),n("li",[s._v("获取用户详情")]),s._v(" "),n("li",[s._v("删除指定用户")])]),s._v(" "),n("h4",{attrs:{id:"_4-1-初始化-mock-数据"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-初始化-mock-数据","aria-hidden":"true"}},[s._v("#")]),s._v(" 4.1 初始化 mock 数据")]),s._v(" "),n("p",[s._v("本案例使用 mock 数据来演示，如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('{\n   "user1" : {\n      "name" : "leo",\n      "password" : "123456",\n      "profession" : "teacher",\n      "id": 1\n   },\n   "user2" : {\n      "name" : "pingan8787",\n      "password" : "654321",\n      "profession" : "librarian",\n      "id": 2\n   },\n   "user3" : {\n      "name" : "robin",\n      "password" : "888888",\n      "profession" : "clerk",\n      "id": 3\n   }\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("h4",{attrs:{id:"_4-2-获取用户列表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-获取用户列表","aria-hidden":"true"}},[s._v("#")]),s._v(" 4.2 获取用户列表")]),s._v(" "),n("p",[s._v("这一步我们会创建 RESTful API 中的"),n("code",[s._v("/users")]),s._v("，使用 GET 来"),n("strong",[s._v("读取用户的信息列表：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("// index.js\nconst expres = require('express');\nconst app = express();\nconst fs = require('fs');\n\n// 定义读取用户的信息列表的接口\napp.get('/users',(req,res)=>{\n    fs.readFile(__direname+'/'+'users.json','utf8',(err,data)=>{\n        console.log(data);\n        res.end(data);\n    });\n})\n\nconst server = app.listen(8081,function(){\n    const {address,port} = server.address();\n    console.log(server run in: http://%s:%s',address,port);\n})\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("h4",{attrs:{id:"_4-3-添加用户"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-添加用户","aria-hidden":"true"}},[s._v("#")]),s._v(" 4.3 添加用户")]),s._v(" "),n("p",[s._v("这一步我们会创建 RESTful API 中的"),n("code",[s._v("/users")]),s._v("，使用 POST 来"),n("strong",[s._v("添加用户记录")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("// index.js\n// 省略之前文件 只展示需要实现的接口\n\n// mock 一条要新增的数据\nconst user={\n    'user4':{\n        'name':'pingan',\n        'password':'password4',\n        'profession':'teacher',\n        'id':4\n    }\n}\n\n// 定义添加用户记录的接口\napp.post('/users',(req,res)=>{\n    // 读取已存在的数据\n    fs.readFile(__dirname+'/'+'users.json','utf8',(err,data)=>{\n        data = JSON.parse(data);\n        data['user4']=user['user4'];\n        console.log(data);\n        res.end(JSON.stringify(data));\n    })\n})\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])]),n("h4",{attrs:{id:"_4-4-获取用户详情"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-获取用户详情","aria-hidden":"true"}},[s._v("#")]),s._v(" 4.4 获取用户详情")]),s._v(" "),n("p",[s._v("这一步我们在 RESTful API 中的 URI 后面加上 /users/:id，使用 GET 来"),n("strong",[s._v("获取指定用户详情")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("// index.js\n// 省略之前文件 只展示需要实现的接口\n\n// 定义 获取指定用户详情的接口\napp.get('/users/:id',(req,res)=>{\n    // 首先我们读取已存在的用户\n    fs.readFile(__dirname+'/'+'users.json','utf8',(err,data)=>{\n        data = JSON.parse(data);\n        const user = data['user'+req.params.id]\n        console.log(user);\n        res.end(JSON.stringify(user);)\n    })\n})\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("h4",{attrs:{id:"_4-5-删除指定用户"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-删除指定用户","aria-hidden":"true"}},[s._v("#")]),s._v(" 4.5 删除指定用户")]),s._v(" "),n("p",[s._v("这一步我们会创建 RESTful API 中的 /users，使用 DELETE 来"),n("strong",[s._v("删除指定用户")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("// index.js\n// 省略之前文件  只展示需要实现的接口\n\n// mock 一条要删除的用户id\nconst id = 2;\n\napp.delete('/users',(req,res)=>{\n    fs.readFile(__dirname+'/'+'users.json','utf8',(err,data)=>{\n        data = JSON.parse(data);\n        delete data['user'+id];\n        console.log(data);\n        res.end(JSON.stringify(data));\n    });\n})\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("p",[s._v("相关代码在"),n("a",{attrs:{href:"https://github.com/ftTony/notes/tree/master/nodejs/express/restful",target:"_blank",rel:"noopener noreferrer"}},[s._v("这里"),n("OutboundLink")],1)]),s._v(" "),n("h3",{attrs:{id:"参考资料"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[s._v("#")]),s._v(" 参考资料")]),s._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"http://www.pingan8787.com/2019/11/25/186-%E3%80%90%E5%85%A8%E6%A0%88%E4%BF%AE%E7%82%BC%E3%80%91RESTful%E6%9E%B6%E6%9E%84%E5%8F%8A%E5%AE%9E%E8%B7%B5%E4%BF%AE%E7%82%BC%E5%AE%9D%E5%85%B8/",target:"_blank",rel:"noopener noreferrer"}},[s._v("【全栈修炼】RESTful 架构及实践修炼宝典"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/frank-lam/fullstack-tutorial/blob/master/notes/RESTful%20API.md",target:"_blank",rel:"noopener noreferrer"}},[s._v("RESTful 架构详解"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://www.cnblogs.com/tugenhua0707/p/12153857.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("理解 RESTful API 设计规范"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://mp.weixin.qq.com/s/69EvvR0FHR57QuhDC7bJ8w",target:"_blank",rel:"noopener noreferrer"}},[s._v("HTTP 协议理解及服务端与客户端的设计实现"),n("OutboundLink")],1)])]),s._v(" "),n("h2",{attrs:{id:"联系作者"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#联系作者","aria-hidden":"true"}},[s._v("#")]),s._v(" 联系作者")]),s._v(" "),n("div",{attrs:{align:"center"}},[n("p",[s._v("\n        平凡世界，贵在坚持。\n    ")]),s._v(" "),n("img",{attrs:{src:s.$withBase("/about/contact.png")}})])])}),[],!1,null,null,null);a.default=r.exports}}]);