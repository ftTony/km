(window.webpackJsonp=window.webpackJsonp||[]).push([[181],{412:function(n,s,a){"use strict";a.r(s);var e=a(4),t=Object(e.a)({},(function(){var n=this,s=n.$createElement,a=n._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[a("h1",{attrs:{id:"events-模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#events-模块","aria-hidden":"true"}},[n._v("#")]),n._v(" events 模块")]),n._v(" "),a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言","aria-hidden":"true"}},[n._v("#")]),n._v(" 前言")]),n._v(" "),a("p",[n._v("events 模块是 node 的核心模块之一，几乎所有常用的 node 模块都继承了 events 模块，比如 http、fs 等。")]),n._v(" "),a("h2",{attrs:{id:"内容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#内容","aria-hidden":"true"}},[n._v("#")]),n._v(" 内容")]),n._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#%E4%B8%80%E3%80%81%E5%9F%BA%E6%9C%AC%E4%BE%8B%E5%AD%90"}},[n._v("基本例子")])]),n._v(" "),a("li",[a("a",{attrs:{href:"#%E4%BA%8C%E3%80%81error-%E4%BA%8B%E4%BB%B6"}},[n._v("error 事件")])]),n._v(" "),a("li",[a("a",{attrs:{href:"#%E4%B8%89%E3%80%81eventemitter-%E7%B1%BB%E7%9B%B8%E5%85%B3%E6%96%B9%E6%B3%95"}},[n._v("EventEmitter 类相关方法")])])]),n._v(" "),a("h3",{attrs:{id:"一、基本例子"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、基本例子","aria-hidden":"true"}},[n._v("#")]),n._v(" 一、基本例子")]),n._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#_1-1-%E5%8D%95%E4%B8%AA%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC%E5%99%A8"}},[n._v("单个事件监听器")])]),n._v(" "),a("li",[a("a",{attrs:{href:"#_1-2-%E5%90%8C%E4%B8%AA%E4%BA%8B%E4%BB%B6%E5%A4%9A%E4%B8%AA%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC%E5%99%A8"}},[n._v("同个事件，多个事件监听器")])]),n._v(" "),a("li",[a("a",{attrs:{href:"#_1-3-%E5%8F%AA%E8%BF%90%E8%A1%8C%E4%B8%80%E6%AC%A1%E7%9A%84%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC%E5%99%A8"}},[n._v("只运行一次的事件监听器")])]),n._v(" "),a("li",[a("a",{attrs:{href:"#_1-4-%E6%B3%A8%E5%86%8C%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC%E5%99%A8%E5%89%8D%E4%BA%8B%E4%BB%B6%E5%85%88%E8%A7%A6%E5%8F%91"}},[n._v("注册事件监听器前，事件先触发")])]),n._v(" "),a("li",[a("a",{attrs:{href:"#_1-5-%E5%BC%82%E6%AD%A5%E6%89%A7%E8%A1%8C%E8%BF%98%E6%98%AF%E9%A1%BA%E5%BA%8F%E6%89%A7%E8%A1%8C"}},[n._v("异步执行，还是顺序执行")])]),n._v(" "),a("li",[a("a",{attrs:{href:"#_1-6-%E7%A7%BB%E9%99%A4%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC%E5%99%A8"}},[n._v("移除事件监听器")])])]),n._v(" "),a("h4",{attrs:{id:"_1-1-单个事件监听器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-单个事件监听器","aria-hidden":"true"}},[n._v("#")]),n._v(" 1.1 单个事件监听器")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("const EventEmitter = require('events');\n\nclass MyEmitter extends EventEmitter{}\n\nconst myEmitter = new MyEmitter();\nmyEmitter.on('event',()=>{\n    console.log('触发事件');\n});\nmyEmitter.emit('event');\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br")])]),a("p",[n._v("上面代码是一个简单的"),a("code",[n._v("EventEmitter")]),n._v("实例，绑定了一个监听器，"),a("code",[n._v("eventEmitter.on()")]),n._v("用于注册监听器，"),a("code",[n._v("eventEmitter.emit()")]),n._v("用于触发事件。")]),n._v(" "),a("h4",{attrs:{id:"_1-2-同个事件，多个事件监听器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-同个事件，多个事件监听器","aria-hidden":"true"}},[n._v("#")]),n._v(" 1.2 同个事件，多个事件监听器")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("var EventEmitter = require('events');\n\nclass Man extends EventEmitter{}\n\nvar man = new Man();\n\nman.on('wakeup',function(){\n    console.log('man has woken up');\n})\n\nman.on('wakeup',function(){\n    console.log('man has woken up agin');\n});\n\nman.emit('wakeup');\n\n// 输出如下：\n// man has woken up\n// man has woken up again\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br")])]),a("h4",{attrs:{id:"_1-3-只运行一次的事件监听器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-只运行一次的事件监听器","aria-hidden":"true"}},[n._v("#")]),n._v(" 1.3 只运行一次的事件监听器")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("var EventEmitter = require('events');\n\nclass Man extends EventEmitter{}\n\nvar man = new Man();\n\nman.on('wakeup',function(){\n    console.log('man has woken up');\n});\n\nman.once('wakeup',function(){\n    console.log('man has woken up again');\n});\n\nman.emit('wakeup');\nman.emit('wakeup');\n\n// 输出如下：\n// man has woken up\n// man has woken up again\n// man has woken up\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br")])]),a("h4",{attrs:{id:"_1-4-注册事件监听器前，事件先触发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-注册事件监听器前，事件先触发","aria-hidden":"true"}},[n._v("#")]),n._v(" 1.4 注册事件监听器前，事件先触发")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("var EventEmitter = require('events');\n\nclass Man extends EventEmitter {}\n\nvar man = new Man();\n\nman.emit('wakeup',1);\n\nman.on('wakeup',function(index){\n    console.log('man has woken up ->' + index);\n});\n\nman.emit('wakeup',2);\n\n// 输出如下：\n// man has woken up ->2\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br")])]),a("h4",{attrs:{id:"_1-5-异步执行，还是顺序执行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-异步执行，还是顺序执行","aria-hidden":"true"}},[n._v("#")]),n._v(" 1.5 异步执行，还是顺序执行")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("var EventEmitter = require('events');\n\nclass Man extends EventEmitter {}\n\nvar man = new Man();\n\nman.on('wakeup', function(){\n    console.log('man has woken up'); // 代码1\n});\n\nman.emit('wakeup');\n\nconsole.log('woman has woken up');  // 代码2\n\n// 输出如下：\n// man has woken up\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br")])]),a("h4",{attrs:{id:"_1-6-移除事件监听器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-移除事件监听器","aria-hidden":"true"}},[n._v("#")]),n._v(" 1.6 移除事件监听器")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("var EventEmitter = require('events');\n\nfunction wakeup(){\n    console.log('man has woken up');\n}\n\nclass Man extends EventEmitter{}\n\nvar man = new Man();\n\nman.on('wakeup',wakeup);\nman.emit('wakeup');\n\nman.removeListener('wakeup',wakeup);\nman.emit('wakeup');\n\n// 输出如下：\n// man has woken up\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br")])]),a("h3",{attrs:{id:"二、error-事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、error-事件","aria-hidden":"true"}},[n._v("#")]),n._v(" 二、error 事件")]),n._v(" "),a("p",[n._v("EventEmitter 定义了一个特殊的事件 error，它包含了“错误”的语义，我们在遇到异常的时候通常会发射 error 事件。")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("var events = require('events');\n\nvar emitter = new events.EventEmitter();\n\nemitter.emit('error');\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br")])]),a("h3",{attrs:{id:"三、eventemitter-类相关方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、eventemitter-类相关方法","aria-hidden":"true"}},[n._v("#")]),n._v(" 三、EventEmitter 类相关方法")]),n._v(" "),a("ul",[a("li",[a("strong",[n._v("addListener(event,listener)：")]),n._v(" 指定事件绑定事件处理函数。")]),n._v(" "),a("li",[a("strong",[n._v("on(event,listener)：")]),n._v(" addListener 方法的别名")]),n._v(" "),a("li",[a("strong",[n._v("once(event,listener)：")]),n._v(" 对指定事件解除事件的处理函数。")]),n._v(" "),a("li",[a("strong",[n._v("removeListener(event,listener)：")]),n._v(" 对指定事件解除事件的处理函数。")]),n._v(" "),a("li",[a("strong",[n._v("removeAllListeners([event])：")]),n._v(" 对指定的事件解除所有的事件处理函数。")]),n._v(" "),a("li",[a("strong",[n._v("setMaxListeners(n)：")]),n._v(" 指定事件处理函数的最大数量。")]),n._v(" "),a("li",[a("strong",[n._v("listeners(event)：")]),n._v(" 获取指定事件的所有事件处理函数")]),n._v(" "),a("li",[a("strong",[n._v("emit(event,[arg1],[arg2])：")]),n._v(" 手工触发指定事件")])]),n._v(" "),a("h3",{attrs:{id:"参考资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[n._v("#")]),n._v(" 参考资料")]),n._v(" "),a("ul",[a("li",[n._v("《nodejs 开发指南》")]),n._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/chyingp/nodejs-learning-guide/blob/master/%E6%A8%A1%E5%9D%97/events.md",target:"_blank",rel:"noopener noreferrer"}},[n._v("event 模块"),a("OutboundLink")],1)]),n._v(" "),a("li",[a("a",{attrs:{href:"https://juejin.im/post/5d69eef7f265da03f12e70a5",target:"_blank",rel:"noopener noreferrer"}},[n._v("[源码解读]一文彻底搞懂 Events 模块"),a("OutboundLink")],1)])]),n._v(" "),a("h2",{attrs:{id:"联系作者"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#联系作者","aria-hidden":"true"}},[n._v("#")]),n._v(" 联系作者")]),n._v(" "),a("div",{attrs:{align:"center"}},[a("p",[n._v("\n        平凡世界，贵在坚持。\n    ")]),n._v(" "),a("img",{attrs:{src:n.$withBase("/about/contact.png")}})])])}),[],!1,null,null,null);s.default=t.exports}}]);