(window.webpackJsonp=window.webpackJsonp||[]).push([[210],{436:function(e,s,a){"use strict";a.r(s);var n=a(4),t=Object(n.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"vue-router-学习及原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-router-学习及原理","aria-hidden":"true"}},[e._v("#")]),e._v(" vue-router 学习及原理")]),e._v(" "),a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言","aria-hidden":"true"}},[e._v("#")]),e._v(" 前言")]),e._v(" "),a("p",[e._v("本人平时学习及收集内容，欢迎参入一起讨论。")]),e._v(" "),a("h2",{attrs:{id:"内容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#内容","aria-hidden":"true"}},[e._v("#")]),e._v(" 内容")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#%E4%B8%80%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E8%B7%AF%E7%94%B1%EF%BC%9F"}},[e._v("什么是路由？")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#%E4%BA%8C%E3%80%81%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%94%B1%E7%9A%84%E4%B8%A4%E7%A7%8D%E5%AE%9E%E7%8E%B0"}},[e._v("前端路由的两种实现")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#%E4%B8%89%E3%80%81vue-router-%E5%AD%A6%E4%B9%A0"}},[e._v("Vue-router 学习")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#%E5%9B%9B%E3%80%81%E6%80%BB%E7%BB%93"}},[e._v("总结")])])]),e._v(" "),a("h3",{attrs:{id:"一、什么是路由？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、什么是路由？","aria-hidden":"true"}},[e._v("#")]),e._v(" 一、什么是路由？")]),e._v(" "),a("p",[e._v("路由的概念起源于服务端，在以前前后端不分离的时候，由后端来控制路由，当接收到客户端发来的"),a("code",[e._v("HTTP")]),e._v("请求，就会根据所请求的相应"),a("code",[e._v("URL")]),e._v("，来找到相应的映射函数，然后执行该函数，并将函数的返回值发送给客户端。对于最简单的静态资源服务器，可以认为，所有"),a("code",[e._v("URL")]),e._v("的映射函数就是一个文件读取操作。对于动态资源，映射函数可能是一个数据库读取操作，也可能是进行一些数据处理等等。然后根据这些读取的数据，在服务器就使用相应的模板来对页面进行渲染后，再返回渲染完毕的页面。它的好处与缺点非常明显：")]),e._v(" "),a("ul",[a("li",[e._v("好处：安全性好，"),a("code",[e._v("SEO")]),e._v("好；")]),e._v(" "),a("li",[e._v("缺点：加大服务器的压力，不利于用户体验，代码冗合不好维护；")])]),e._v(" "),a("p",[e._v("也正是由于后端跻身存在着自己的不足，前端跻身睹有了自己的发展空间。对于前端路由来说，路由的映射函数通常是进行一些"),a("code",[e._v("DOM")]),e._v("的显示和隐藏操作。这样，当访问不同的路径的时候，会显示不同的页面组件。前端跻身眩要有以下两种实现方案：")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("Hash")])]),e._v(" "),a("li",[a("code",[e._v("History")])])]),e._v(" "),a("p",[e._v("当然，前端路由也存在缺陷：使用浏览器的前进，后退键时会重新发送请求，来获取数据，没有合理地利用缓存。但总的来说，现在前端路由已经实现路由的主要方式了，前端三大框架"),a("code",[e._v("Angular")]),e._v("、"),a("code",[e._v("React")]),e._v("、"),a("code",[e._v("Vue")]),e._v("，它们的路由解决方案"),a("code",[e._v("angular/router")]),e._v("、"),a("code",[e._v("react-router")]),e._v("、"),a("code",[e._v("vue-router")]),e._v("都是基于前端路由进行开发的。")]),e._v(" "),a("h3",{attrs:{id:"二、前端路由的两种实现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、前端路由的两种实现","aria-hidden":"true"}},[e._v("#")]),e._v(" 二、前端路由的两种实现")]),e._v(" "),a("ul",[a("li",[e._v("Hash 模式")]),e._v(" "),a("li",[e._v("History 模式")])]),e._v(" "),a("h4",{attrs:{id:"_2-1-hash-模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-hash-模式","aria-hidden":"true"}},[e._v("#")]),e._v(" 2.1 Hash 模式")]),e._v(" "),a("p",[e._v("早期的前端路由实现就是基于"),a("code",[e._v("location.hash")]),e._v("来实现的。其实原理也很简单，"),a("code",[e._v("location.hash")]),e._v("的值就是"),a("code",[e._v("URL")]),e._v("中#后面的内容，比如下面这个网站，它的"),a("code",[e._v("location.hash")]),e._v("的值为"),a("code",[e._v("#search")]),e._v("：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("https://www.word.com#search\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("此外，"),a("code",[e._v("hash")]),e._v("也存在下面几个特性：")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("URL")]),e._v("中"),a("code",[e._v("hash")]),e._v("值只是客户端的一种状态，也就是说当向服务器端发出请求时，"),a("code",[e._v("hash")]),e._v("部分不会被发送。")]),e._v(" "),a("li",[a("code",[e._v("hash")]),e._v("值的改变，都会在浏览器的访问历史增加一个记录。因此我们能通过浏览器的回退、前进按钮控制"),a("code",[e._v("hash")]),e._v("的切换。")]),e._v(" "),a("li",[e._v("我们可以使用"),a("code",[e._v("hashchange")]),e._v("事件来监听"),a("code",[e._v("hash")]),e._v("的变化。")])]),e._v(" "),a("p",[a("strong",[e._v("hash 原理图")])]),e._v(" "),a("p",[a("img",{attrs:{src:"hash.png",alt:"images"}})]),e._v(" "),a("h4",{attrs:{id:"_2-2-history-模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-history-模式","aria-hidden":"true"}},[e._v("#")]),e._v(" 2.2 History 模式")]),e._v(" "),a("p",[e._v("前面的"),a("code",[e._v("hash")]),e._v("虽然也很不错，但使用时都需要加上#，并不是很美观。因此到了"),a("code",[e._v("HTML5")]),e._v("，又提供了"),a("code",[e._v("History API")]),e._v("来实现"),a("code",[e._v("URL")]),e._v("的变化。其中做最主要的"),a("code",[e._v("API")]),e._v("有以下两个："),a("code",[e._v("history.pushState()")]),e._v("和"),a("code",[e._v("history.replaceState()")]),e._v("。这两个"),a("code",[e._v("API")]),e._v("可以在不进行刷新的情况下，操作浏览器的历史纪录。唯一不同的是，前者是新增一个历史记录，后者是直接替换当前的历史记录，如下所示：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("window.history.pushState(null, null, path);\nwindow.history.replaceState(null, null, path);\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("此外，"),a("code",[e._v("history")]),e._v("存在下面几个特性：")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("pushState")]),e._v("和"),a("code",[e._v("replaceState")]),e._v("的标题（"),a("code",[e._v("title")]),e._v("）：一般浏览器会忽略，最好传入"),a("code",[e._v("null")]),e._v("；")]),e._v(" "),a("li",[e._v("我们可以使用"),a("code",[e._v("popstate")]),e._v("事件来监听"),a("code",[e._v("url")]),e._v("的变化；")]),e._v(" "),a("li",[a("code",[e._v("history.pushState()")]),e._v("或"),a("code",[e._v("history.replaceState()")]),e._v("不会触发"),a("code",[e._v("popstate")]),e._v("事件，这时我们需要手动触发页面渲染")])]),e._v(" "),a("p",[a("strong",[e._v("history 原理图")])]),e._v(" "),a("p",[a("img",{attrs:{src:"history.png",alt:"images"}})]),e._v(" "),a("h4",{attrs:{id:"_2-3-两种路由模式的对比"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-两种路由模式的对比","aria-hidden":"true"}},[e._v("#")]),e._v(" 2.3 两种路由模式的对比")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("对比点")]),e._v(" "),a("th",[e._v("Hash 模式")]),e._v(" "),a("th",[e._v("History 模式")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("美观性")]),e._v(" "),a("td",[e._v("带着#字符，较丑")]),e._v(" "),a("td",[e._v("简洁美观")])]),e._v(" "),a("tr",[a("td",[e._v("兼容性")]),e._v(" "),a("td",[e._v(">= ie 8，其它主流浏览器")]),e._v(" "),a("td",[e._v(">= ie 10，其它主流浏览器")])]),e._v(" "),a("tr",[a("td",[e._v("实用性")]),e._v(" "),a("td",[e._v("不需要对服务端做改动")]),e._v(" "),a("td",[e._v("需要服务端对路由进行相应配合设置")])])])]),e._v(" "),a("h3",{attrs:{id:"三、vue-router-学习"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、vue-router-学习","aria-hidden":"true"}},[e._v("#")]),e._v(" 三、Vue-router 学习")]),e._v(" "),a("ul",[a("li",[e._v("基本用法")]),e._v(" "),a("li",[e._v("嵌套路由")]),e._v(" "),a("li",[e._v("参数传递")]),e._v(" "),a("li",[e._v("导航守卫")]),e._v(" "),a("li",[a("code",[e._v("$route")]),e._v(" 和 "),a("code",[e._v("$router")]),e._v(" 的区别")])]),e._v(" "),a("h4",{attrs:{id:"_3-1-基本用法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-基本用法","aria-hidden":"true"}},[e._v("#")]),e._v(" 3.1 基本用法")]),e._v(" "),a("p",[e._v("使用步骤如下：")]),e._v(" "),a("ul",[a("li",[e._v("下载"),a("code",[e._v("npm i vur-router -S")])]),e._v(" "),a("li",[e._v("在"),a("code",[e._v("main.js")]),e._v("中引入"),a("code",[e._v("import VueRouter from 'vue-router'")]),e._v(";")]),e._v(" "),a("li",[e._v("安装插件"),a("code",[e._v("Vue.use(VueRouter)")]),e._v(";")]),e._v(" "),a("li",[e._v("创建路由对象并配置路由规则"),a("code",[e._v("let router = new VueRouter({routes:[{path:'/home',component:Home}]})")]),e._v("；")]),e._v(" "),a("li",[e._v("将其路由对象传递给 Vue 的实例，options 中加入 "),a("code",[e._v("router:router")])]),e._v(" "),a("li",[e._v("在 app.vue 中留坑 "),a("code",[e._v("<router-view></router-view>")])])]),e._v(" "),a("p",[e._v("具体代码如下：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("//main.js文件中引入\nimport Vue from 'vue';\nimport VueRouter from 'vue-router';\n//主体\nimport App from './components/app.vue';\nimport Home from './components/home.vue'\n//安装插件\nVue.use(VueRouter); //挂载属性\n//创建路由对象并配置路由规则\nlet router = new VueRouter({\n    routes: [\n        //一个个对象\n        { path: '/home', component: Home }\n    ]\n});\n//new Vue 启动\nnew Vue({\n    el: '#app',\n    //让vue知道我们的路由规则\n    router: router, //可以简写router\n    render: c => c(App),\n})\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br"),a("span",{staticClass:"line-number"},[e._v("20")]),a("br"),a("span",{staticClass:"line-number"},[e._v("21")]),a("br"),a("span",{staticClass:"line-number"},[e._v("22")]),a("br")])]),a("p",[e._v("最后记得在在 app.vue 中“留坑”")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("//app.vue中\n<template>\n    <div>\n        <router-view></router-view>\n    </div>\n</template>\n<script>\n    export default {\n        data(){\n            return {}\n        }\n    }\n<\/script>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br")])]),a("h4",{attrs:{id:"_3-2-嵌套路由"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-嵌套路由","aria-hidden":"true"}},[e._v("#")]),e._v(" 3.2 嵌套路由")]),e._v(" "),a("p",[e._v("实际应用界面，通常由多层嵌套的组件组合而成。同样地，URL 中各段动态路径也按某种结构对应嵌套的各层组件，例如：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("/user/foo/profile                     /user/foo/posts\n+------------------+                  +-----------------+\n| User             |                  | User            |\n| +--------------+ |                  | +-------------+ |\n| | Profile      | |  +------------\x3e  | | Posts       | |\n| |              | |                  | |             | |\n| +--------------+ |                  | +-------------+ |\n+------------------+                  +-----------------+\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br")])]),a("p",[e._v("创建 app:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<div id="app">\n  <router-view></router-view>\n</div>\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[a("code",[e._v("User")]),e._v("组件的模板添加一个"),a("code",[e._v("<router-view>")]),e._v("：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('const User = {\n  template: `\n    <div class="user">\n      <h2>User {{ $route.params.id }}</h2>\n      <router-view></router-view>\n    </div>\n  `\n}\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br")])]),a("p",[e._v("需要在 "),a("code",[e._v("VueRouter")]),e._v(" 的参数中使用"),a("code",[e._v("children")]),e._v("配置：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("const router = new VueRouter({\n  routes: [\n    { path: '/user/:id', component: User,\n      children: [\n        {\n          // 当 /user/:id/profile 匹配成功，\n          // UserProfile 会被渲染在 User 的 <router-view> 中\n          path: 'profile',\n          component: UserProfile\n        },\n        {\n          // 当 /user/:id/posts 匹配成功\n          // UserPosts 会被渲染在 User 的 <router-view> 中\n          path: 'posts',\n          component: UserPosts\n        }\n      ]\n    }\n  ]\n})\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br"),a("span",{staticClass:"line-number"},[e._v("20")]),a("br")])]),a("h4",{attrs:{id:"_3-3-参数传递"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-参数传递","aria-hidden":"true"}},[e._v("#")]),e._v(" 3.3 参数传递")]),e._v(" "),a("ol",[a("li",[e._v("用 name 传递参数")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("routes:[\n    {\n        path:'/',\n        name:'Hello',\n        component:Hello\n    }\n]\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])]),a("p",[e._v("模板里(src/App.vue)用"),a("code",[e._v("$route.name")]),e._v("来接收比如："),a("code",[e._v("<p>"+e._s(e.$route.name)+"</p>")])]),e._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[e._v("通过"),a("code",[e._v("<router-link>")]),e._v(" 标签中的 to 传参")])]),e._v(" "),a("p",[e._v("基本语法：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<router-link :to="{name:xxx,params:{key:value}}">valueString</router-link>\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("接收参数：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("{{$route.params.key}}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[e._v("利用 url 传递参数——在配置文件里以冒号的形式设置参数")])]),e._v(" "),a("p",[e._v("基本示例：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("{\n    path:'/params/:newsId/:newsTitle',\n    component:Params\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("接收参数：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("<template>\n    <div>\n        <h2>{{ msg }}</h2>\n        <p>新闻ID：{{ $route.params.newsId}}</p>\n        <p>新闻标题：{{ $route.params.newsTitle}}</p>\n    </div>\n</template>\n<script>\nexport default {\n  name: 'params',\n  data () {\n    return {\n      msg: 'params page'\n    }\n  }\n}\n<\/script>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br")])]),a("h4",{attrs:{id:"_3-4-导航守卫"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-导航守卫","aria-hidden":"true"}},[e._v("#")]),e._v(" 3.4 导航守卫")]),e._v(" "),a("p",[e._v("导航守卫函数，主要是在导航中转的时候做一些操作，比如跳转页面之前，进行判断，比如跳转的时候，判断是否某个字段是否为 true，如果为 true，则跳转到 A 组件内，否则的话跳到 B 组件内。而钩子函数根据其生效范围可以分为全局钩子函数，路由独享钩子函数和组件内钩子函数。")]),e._v(" "),a("p",[a("strong",[e._v("全局钩子函数")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("router.beforeEach((to, from, next)=>{\n  //do something\n  next();\n});\nrouter.afterEach((to, from, next) => {\n    console.log(to.path);\n});\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])]),a("p",[e._v("上面的钩子方法接收三个采纳数：")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("to")]),e._v("：即将要进入的目标路由对象。")]),e._v(" "),a("li",[a("code",[e._v("from")]),e._v("：当前导航正要离开的路由。")]),e._v(" "),a("li",[a("code",[e._v("next")]),e._v("：一定要调用该方法来 resolve 这个钩子。")]),e._v(" "),a("li",[a("code",[e._v("next()")]),e._v("：进行管道的下一个钩子。")]),e._v(" "),a("li",[a("code",[e._v("next(false)")]),e._v("：中断当前导航。")]),e._v(" "),a("li",[a("code",[e._v("next('/')")]),e._v("：跳转到一个不同的地址，当前的导航被中断，然后进行一个新的导航。")])]),e._v(" "),a("p",[a("strong",[e._v("路由独享钩子函数")])]),e._v(" "),a("p",[e._v("对单个的路由使用 beforeEnter 函数，我们在 router/index 的文件里面可以如下编写代码：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("const router = new Router({\n  mode: 'history', // 访问路径不带井号\n  base: '/page/app',  // 配置单页应用的基路径\n  routes: [\n    {\n      path: '/',\n      name: 'HelloWorld',\n      component: resolve => require(['@/views/HelloWorld'], resolve)  // 使用懒加载\n    },\n    {\n      path: '/helloworld',\n      name: 'HelloWorld',\n      component: resolve => require(['@/views/HelloWorld'], resolve), // 使用懒加载\n      beforeEnter(to, from, next) {\n        console.log(111)\n        console.log(to.path); // 打印 /helloworld\n        console.log(from.path); // 打印 /\n        next(); // 跳到/helloworld 组件页面\n      }\n    },\n    {\n      path: '/demo',\n      name: 'demo',\n      component: resolve => require(['@/views/demo'], resolve) // 使用懒加载\n    }\n  ]\n});\nexport default router;\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br"),a("span",{staticClass:"line-number"},[e._v("20")]),a("br"),a("span",{staticClass:"line-number"},[e._v("21")]),a("br"),a("span",{staticClass:"line-number"},[e._v("22")]),a("br"),a("span",{staticClass:"line-number"},[e._v("23")]),a("br"),a("span",{staticClass:"line-number"},[e._v("24")]),a("br"),a("span",{staticClass:"line-number"},[e._v("25")]),a("br"),a("span",{staticClass:"line-number"},[e._v("26")]),a("br"),a("span",{staticClass:"line-number"},[e._v("27")]),a("br"),a("span",{staticClass:"line-number"},[e._v("28")]),a("br")])]),a("p",[a("strong",[e._v("组件内钩子函数")])]),e._v(" "),a("p",[e._v("更细粒度的路由拦截，只针对一个进入某一个组件的拦截。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("export default {\n  name: 'HelloWorld2',\n  data () {\n    return {\n      msg: 'Welcome to Your Vue.js App'\n    };\n  },\n  created () {\n    this.getInfo();\n  },\n  beforeRouteEnter(to, from, next) {\n    // 在渲染该组件的对应路由被 confirm 前调用\n    // 不！能！获取组件实例 `this`\n    // 因为当钩子执行前，组件实例还没被创建\n    console.log(to.path); // 打印 /helloworld\n    console.log(from.path); // 打印 /\n    next();  // 跳转到 /helloworld 指定的页面\n  },\n  beforeRouteUpdate (to, from, next) {\n    // 在当前路由改变，但是该组件被复用时调用\n    // 举例来说，对于一个带有动态参数的路径 /foo/:id，在 /foo/1 和 /foo/2 之间跳转的时候，\n    // 由于会渲染同样的 Foo 组件，因此组件实例会被复用。而这个钩子就会在这个情况下被调用。\n    // 可以访问组件实例 `this`\n  },\n  beforeRouteLeave (to, from, next) {\n    // 导航离开该组件的对应路由时调用\n    // 可以访问组件实例 `this`\n  }\n};\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br"),a("span",{staticClass:"line-number"},[e._v("20")]),a("br"),a("span",{staticClass:"line-number"},[e._v("21")]),a("br"),a("span",{staticClass:"line-number"},[e._v("22")]),a("br"),a("span",{staticClass:"line-number"},[e._v("23")]),a("br"),a("span",{staticClass:"line-number"},[e._v("24")]),a("br"),a("span",{staticClass:"line-number"},[e._v("25")]),a("br"),a("span",{staticClass:"line-number"},[e._v("26")]),a("br"),a("span",{staticClass:"line-number"},[e._v("27")]),a("br"),a("span",{staticClass:"line-number"},[e._v("28")]),a("br"),a("span",{staticClass:"line-number"},[e._v("29")]),a("br")])]),a("p",[e._v("钩子函数使用场景:路由钩子函数在项目开发中用的并不是非常多，一般用于登录态的校验，没有登录跳转到登录页；权限的校验等等。")]),e._v(" "),a("h4",{attrs:{id:"_3-5-route-和-router-的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-route-和-router-的区别","aria-hidden":"true"}},[e._v("#")]),e._v(" 3.5 "),a("code",[e._v("$route")]),e._v(" 和 "),a("code",[e._v("$router")]),e._v(" 的区别")]),e._v(" "),a("p",[a("strong",[a("code",[e._v("$route")]),e._v(" 是“路由信息对象”，包括 path，params，hash，query，fullPath，matched，name 等路由信息参数。")])]),e._v(" "),a("p",[a("strong",[a("code",[e._v("$router")]),e._v("是“路由实例”，即使用 new VueRouter 创建的实例，包括了路由的跳转方法，钩子函数等。"),a("code",[e._v("$router")]),e._v("常见跳转方法："),a("code",[e._v("$router.push")]),e._v("和"),a("code",[e._v("$router.replace")])])]),e._v(" "),a("h3",{attrs:{id:"四、总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、总结","aria-hidden":"true"}},[e._v("#")]),e._v(" 四、总结")]),e._v(" "),a("ul",[a("li",[e._v("学习了前端路由两种实现分别为"),a("code",[e._v("history")]),e._v("和"),a("code",[e._v("hash")])]),e._v(" "),a("li",[a("code",[e._v("history")]),e._v("模式，需要跟服务端进行配合而且有浏览器兼容性问题，地址栏美观。当用户手动刷新页面时，会请求服务器；当用户点某个地址时，会使用"),a("code",[e._v("pushstate")]),e._v("或"),a("code",[e._v("replacestate")]),e._v("两个方法，但这两个方法不触发事件"),a("code",[e._v("popstate")]),e._v("，当用户点击返回或前进按钮时，会触发事件"),a("code",[e._v("popstate")])]),e._v(" "),a("li",[a("code",[e._v("hash")]),e._v("模式，主要是通过使用 "),a("code",[e._v("hashchange")]),e._v(" 事件来监听 hash 的变化。当用户手动刷新页面时，不会向服务器发送请求，也不会触发"),a("code",[e._v("hashchange")]),e._v("事件；当用户点击跳转地址或浏览器前进返回按钮时，会触发"),a("code",[e._v("hashchange")]),e._v("事件。")]),e._v(" "),a("li",[a("code",[e._v("vue-router")]),e._v("的基本使用，路由守卫，路由嵌套、参数传递")])]),e._v(" "),a("h3",{attrs:{id:"参考资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[e._v("#")]),e._v(" 参考资料")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/ljianshu/Blog/issues/39",target:"_blank",rel:"noopener noreferrer"}},[e._v("从头开始学习 vue-router"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://zhang122622623.github.io/2018/03/14/vue-router%E5%AE%9E%E7%8E%B0%E5%8D%95%E9%A1%B5%E9%9D%A2%E8%B7%AF%E7%94%B1%E5%8E%9F%E7%90%86/",target:"_blank",rel:"noopener noreferrer"}},[e._v("vue-router 实现单页面路由原理"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://mp.weixin.qq.com/s/wiuIwybeSEUjxw-WN_Fm6A",target:"_blank",rel:"noopener noreferrer"}},[e._v("「vue 基础」Vue Router 使用指南下篇"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://juejin.im/post/5d469f1e5188254e1c49ae78",target:"_blank",rel:"noopener noreferrer"}},[e._v("深度剖析：前端路由原理"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://mp.weixin.qq.com/s/2RXM0c22e30mZbtrPNzrYw",target:"_blank",rel:"noopener noreferrer"}},[e._v("前端开发需要了解的「路由跳转原理」"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://juejin.im/post/5d2d19ccf265da1b7f29b05f",target:"_blank",rel:"noopener noreferrer"}},[e._v("「前端进阶」彻底弄懂前端路由"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://mp.weixin.qq.com/s/XV7tGdB6bDbZT4h5H8Y3yw",target:"_blank",rel:"noopener noreferrer"}},[e._v("【第 1611 期】前端路由原理解析和实现"),a("OutboundLink")],1)])]),e._v(" "),a("h2",{attrs:{id:"联系作者"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#联系作者","aria-hidden":"true"}},[e._v("#")]),e._v(" 联系作者")]),e._v(" "),a("div",{attrs:{align:"center"}},[a("p",[e._v("\n        平凡世界，贵在坚持。\n    ")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/about/contact.png")}})])])}),[],!1,null,null,null);s.default=t.exports}}]);