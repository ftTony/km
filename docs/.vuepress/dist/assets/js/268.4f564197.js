(window.webpackJsonp=window.webpackJsonp||[]).push([[268],{488:function(a,s,t){"use strict";t.r(s);var e=t(13),n=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"私有-npm-仓库搭建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#私有-npm-仓库搭建"}},[a._v("#")]),a._v(" 私有 npm 仓库搭建")]),a._v(" "),t("h2",{attrs:{id:"前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[a._v("#")]),a._v(" 前言")]),a._v(" "),t("p",[a._v("随着公司的业务越来越复杂，项目迭代速度也越来越快，那么项目间的常用的业务代码共享变得非常之有必要。但是对于公司的业务代码是不能对外开放的，因此有必要搭建一个类似于 "),t("code",[a._v("http://npmjs.org")]),a._v("这个的一个私有平台来管理公司业务相关的组件及代码。")]),a._v(" "),t("p",[a._v("更简单的描述就是我们需要在公司内部搭建一个 npm 仓库，管理包的同时，也可以借助 npm 的命令行工具快速用代码模块或业务组件。")]),a._v(" "),t("p",[a._v("但是在没有 npm 私有仓库之前，我们都是手动复制某个项目的某个模块到相关的项目中，这样操作比较繁琐，因此我们需要一个 npm 私有仓库存放相关公用的组件及模块。")]),a._v(" "),t("h2",{attrs:{id:"内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#内容"}},[a._v("#")]),a._v(" 内容")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#%E4%B8%80%E3%80%81npm-%E5%8F%8A%E7%A7%81%E6%9C%89-npm-%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%EF%BC%9F"}},[a._v("npm 及私有 npm 的工作原理？")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#%E4%BA%8C%E3%80%81%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%A7%81%E6%9C%89%E7%9A%84-npm-%E4%BB%93%E5%BA%93%E5%91%A2%EF%BC%9F"}},[a._v("如何搭建一个私有的 npm 仓库呢？")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#%E4%B8%89%E3%80%81cnpm-%E6%90%AD%E5%BB%BA-%E6%88%91%E6%B2%A1%E8%AF%95%E8%BF%87%EF%BC%8C%E5%A4%A7%E5%AE%B6%E5%8F%AF%E4%BB%A5%E5%B0%9D%E8%AF%95%E4%B8%80%E4%B8%8B"}},[a._v("cnpm 搭建")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#%E5%9B%9B%E3%80%81%E9%80%9A%E8%BF%87-verdaccio-%E6%90%AD%E5%BB%BA"}},[a._v("通过 verdaccio 搭建")])])]),a._v(" "),t("h3",{attrs:{id:"一、npm-及私有-npm-的工作原理？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、npm-及私有-npm-的工作原理？"}},[a._v("#")]),a._v(" 一、npm 及私有 npm 的工作原理？")]),a._v(" "),t("p",[a._v("我们使用 npm 安装，共享和分发代码，npm 帮助我们管理项目中的依赖关系，当我们使用 npm install 去安装一个模块时，会先检查 node_modules 目录是否已经存在这个模块，如果没有便会向远程仓库查询。")]),a._v(" "),t("p",[a._v("那现在如果我们搭建了私有的 npm，当我们使用 npm install 后会向私有的 npm 发起请求，服务器会先查询所请求的这个模块是否是我们自己的私有模块或已经缓存过的公共模块，如果是则直接返回给用户，如果不是的话，那么则会继续向上查找(也就是开源的 npm 仓库)去查找该模块并返回给用户。")]),a._v(" "),t("h3",{attrs:{id:"二、如何搭建一个私有的-npm-仓库呢？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、如何搭建一个私有的-npm-仓库呢？"}},[a._v("#")]),a._v(" 二、如何搭建一个私有的 npm 仓库呢？")]),a._v(" "),t("p",[a._v("搭建 npm 仓库一般有如下基本方法：")]),a._v(" "),t("ol",[t("li",[a._v("使用 Sinopia")]),a._v(" "),t("li",[a._v("使用 cnpmjs.org")])]),a._v(" "),t("h3",{attrs:{id:"三、cnpm-搭建-我没试过，大家可以尝试一下"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、cnpm-搭建-我没试过，大家可以尝试一下"}},[a._v("#")]),a._v(" 三、cnpm 搭建(我没试过，大家可以尝试一下)")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/cnpm/cnpmjs.org",target:"_blank",rel:"noopener noreferrer"}},[a._v("官方网站"),t("OutboundLink")],1)]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#31-%E5%AE%89%E8%A3%85cnpm"}},[a._v("安装 cnpm")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#32-%E5%90%AF%E5%8A%A8%E5%B9%B6%E9%85%8D%E7%BD%AE%E6%9C%8D%E5%8A%A1"}},[a._v("启动并配置服务")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#33-%E8%AE%BE%E7%BD%AE%E6%B3%A8%E5%86%8C%E5%9C%B0%E5%9D%80"}},[a._v("设置注册地址")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#34-%E7%99%BB%E5%BD%95cnpm"}},[a._v("登录 cnpm")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#35-%E5%8C%85%E4%B8%8A%E4%BC%A0%E5%88%B0%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93"}},[a._v("包上传到私有仓库")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#36-%E6%9F%A5%E7%9C%8B%E9%A2%84%E8%A7%88%E5%8C%85"}},[a._v("查看预览包")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#37-%E5%AE%89%E8%A3%85%E7%A7%81%E6%9C%89%E5%8C%85"}},[a._v("安装私有包")])])]),a._v(" "),t("h4",{attrs:{id:"_3-1-安装-cnpm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-安装-cnpm"}},[a._v("#")]),a._v(" 3.1 安装 cnpm")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("npm install -g --build-from-source cnpmjs.org cnpm sqlite3\n# 如果报错或者警告通过下面方式安装\nnpm install -g --unsafe-perm --verbose --build-from-source cnpmjs.org cnpm sqlite3\n\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("p",[a._v("如果安装不流畅通过下面形式安装：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("npm install -g --build-from-source \\\n  --registry=https://registry.npm.taobao.org \\\n  --disturl=https://npm.taobao.org/mirrors/node \\\n  cnpmjs.org cnpm sqlite3\n\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])]),t("p",[a._v("如果报警告或者安装错误，请添加参数"),t("code",[a._v("--unsafe-perm --verbose")])]),a._v(" "),t("h4",{attrs:{id:"_3-2-启动并配置服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-启动并配置服务"}},[a._v("#")]),a._v(" 3.2 启动并配置服务")]),a._v(" "),t("blockquote",[t("p",[a._v("管理员：myname,othername\n范围：my-company-name,other-name\n默认端口：7001-registry, 7002-web")])]),a._v(" "),t("p",[a._v("启动服务")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("$ nohup cnpmjs.org start --admins='myname,othername' \\\n  --scopes='@my-company-name,@other-name' &\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("h4",{attrs:{id:"_3-3-设置注册地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-设置注册地址"}},[a._v("#")]),a._v(" 3.3 设置注册地址")]),a._v(" "),t("p",[a._v("将 cnpm 默认注册地址更改为私有注册地址")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("cnpm set registry http://localhost:7001\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h4",{attrs:{id:"_3-4-登录-cnpm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-登录-cnpm"}},[a._v("#")]),a._v(" 3.4 登录 cnpm")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("$ cnpm login\nUsername: myname\nPassword: ***\nEmail: (this IS public) test@test.com\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("h4",{attrs:{id:"_3-5-包上传到私有仓库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-包上传到私有仓库"}},[a._v("#")]),a._v(" 3.5 包上传到私有仓库")]),a._v(" "),t("p",[a._v("新建项目")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('$ cd /tmp\n$ mkdir helloworld && cd helloworld\n$ cnpm init\nname: (helloworld) @my-company-name/helloworld\nversion: (1.0.0)\n\n{\n  "name": "@my-company-name/helloworld",\n  "version": "1.0.0",\n  "description": "my first scoped package",\n  "main": "index.js",\n  "scripts": {\n    "test": "echo \\"Error: no test specified\\" && exit 1"\n  },\n  "author": "",\n  "license": "ISC"\n}\n\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br")])]),t("p",[a._v("上传到私有仓库")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("$ cnpm publish\n+ @my-company-name/helloworld@1.0.0\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("h4",{attrs:{id:"_3-6-查看预览包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-查看预览包"}},[a._v("#")]),a._v(" 3.6 查看预览包")]),a._v(" "),t("p",[a._v("浏览器中预览")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("open http://localhost:7002/@my-company-name/helloworld\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("使用"),t("code",[a._v("cnpm")]),a._v("预览")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("cnpm info\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h4",{attrs:{id:"_3-7-安装私有包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-安装私有包"}},[a._v("#")]),a._v(" 3.7 安装私有包")]),a._v(" "),t("p",[a._v("所有公共包都可直接使用"),t("code",[a._v("cnpm")]),a._v("安装")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("cnpm install hotkeys-js\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h3",{attrs:{id:"四、通过-verdaccio-搭建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、通过-verdaccio-搭建"}},[a._v("#")]),a._v(" 四、通过 verdaccio 搭建")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/verdaccio/verdaccio",target:"_blank",rel:"noopener noreferrer"}},[a._v("verdaccio"),t("OutboundLink")],1),a._v("是一个轻量级的私有 npm 代理注册。")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#41-%E5%AE%89%E8%A3%85"}},[a._v("安装")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#42-%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1"}},[a._v("启动服务")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#43-verdaccio%E7%9A%84%E4%BD%BF%E7%94%A8"}},[a._v("添加用户/登录")])])]),a._v(" "),t("h4",{attrs:{id:"_4-1-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-安装"}},[a._v("#")]),a._v(" 4.1 安装")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# 使用 npm 安装\nnpm install -g verdaccio\n\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("h4",{attrs:{id:"_4-2-启动服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-启动服务"}},[a._v("#")]),a._v(" 4.2 启动服务")]),a._v(" "),t("p",[a._v("安装完成后，我们就可以在命令行中 输入"),t("code",[a._v("verdaccio")]),a._v("命令运行，如下所示：")]),a._v(" "),t("p",[t("img",{attrs:{src:"verdaccio05.png",alt:""}})]),a._v(" "),t("p",[a._v("然后在浏览器中 运行"),t("code",[a._v("http://localhost:4873")]),a._v("就可以看到 如下图所示：")]),a._v(" "),t("p",[t("img",{attrs:{src:"verdaccio04.png",alt:""}})]),a._v(" "),t("p",[a._v("说明服务启动成功了；")]),a._v(" "),t("p",[a._v("当然还可以通过 pm2 启动，这里不重复说明，有兴趣可以参考相关资料。")]),a._v(" "),t("h4",{attrs:{id:"_4-3-verdaccio-的使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-verdaccio-的使用"}},[a._v("#")]),a._v(" 4.3 verdaccio 的使用")]),a._v(" "),t("p",[a._v("在使用 verdaccio 之前，我们可以先安装 nrm 来管理自己的 npm 代理，nrm 可以快速修改，切换，增加 npm 镜像地址。")]),a._v(" "),t("p",[a._v("先安装 nrm，命令如下：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("npm install -g nrm\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("想要了解更多有关的 nrm 命令，可以使用 nrm --help, 会列出所有的命令行的。")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#431-%E6%B7%BB%E5%8A%A0%E5%88%AB%E5%90%8D"}},[a._v("添加别名")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#432-%E5%8F%91%E5%B8%83%E7%A7%81%E6%9C%89%E5%8C%85"}},[a._v("发布私有包")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#433-npm%E4%B8%8B%E8%BD%BD%E5%8C%85"}},[a._v("npm 下载包")])])]),a._v(" "),t("h5",{attrs:{id:"_4-3-1-添加别名"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-1-添加别名"}},[a._v("#")]),a._v(" 4.3.1 添加别名")]),a._v(" "),t("p",[a._v("我这边为了演示下，搭建的地址为"),t("code",[a._v("http://localhost:4873")]),a._v("，你们自己可以修改自己的服务器 ip 地址了；如下命令：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("nrm add verdaccio http://localhost:4873\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"verdaccio.png",alt:""}})]),a._v(" "),t("p",[a._v("现在我们可以使用 nrm ls 命令查看 使用的所有镜像源地址，verdaccio 就是我们刚刚新增的，如下图所示：")]),a._v(" "),t("p",[t("img",{attrs:{src:"verdaccio01.png",alt:""}})]),a._v(" "),t("p",[a._v("如果我们现在不想从私有 npm 上下载包的话，我们可以使用 nrm use xx 命令，use 下地址。")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("npm adduser --registry  http://localhost:4873\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h5",{attrs:{id:"_4-3-2-发布私有包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-2-发布私有包"}},[a._v("#")]),a._v(" 4.3.2 发布私有包")]),a._v(" "),t("p",[a._v("首先建立一个私有模块")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# 假设你建立了一个Git仓库，先克隆下来\ngit clone git@km-git1.kemai.cn:xiaonengwu/hello.git\n\n# 生成 `package.json` 配置, 注意限定 `@scope` 范围\nnpm init --scope=xdd\n# 提交到仓库\ngit push origin master\n\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br")])]),t("p",[a._v("如果我们还没有账号的话，通过输入命令 npm adduser, 然后依次输入用户名，密码即可创建完毕。如果已有账号，通过输入命令 npm login，然后依次输入用户名，密码即可登录。命令分别如下：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("// 添加用户\nnpm adduser 记得回车\n\n// 登录\nnpm login\n\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br")])]),t("p",[a._v("然后发布我们的代码：我们可以使用 npm publish 命令来发布包；如下所示：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("npm publish --registry http://localhost:4873\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("发布完成后，在刷新下 http://localhost:4873/#/ 就可以看到我们刚刚发布的包了，如图")]),a._v(" "),t("p",[t("img",{attrs:{src:"verdaccio02.png",alt:""}})]),a._v(" "),t("h5",{attrs:{id:"_4-3-3-npm-下载包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-3-npm-下载包"}},[a._v("#")]),a._v(" 4.3.3 npm 下载包")]),a._v(" "),t("p",[a._v("最后我们再验证下，我们新建一个文件夹为 npmtest2，进入到该项目的根目录下，使用命令 npm install @xdd/hello 下载我们刚刚发布到私有的 npm 包；")]),a._v(" "),t("p",[a._v("如下图所示：")]),a._v(" "),t("p",[t("img",{attrs:{src:"verdaccio03.png",alt:""}})]),a._v(" "),t("h3",{attrs:{id:"参考资料"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[a._v("#")]),a._v(" 参考资料")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://www.cnblogs.com/tugenhua0707/p/9163167.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("使用 verdaccio 搭建 npm 私有仓库"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/jaywcjlove/handbook/blob/master/CentOS/%E5%9C%A85%E5%88%86%E9%92%9F%E5%86%85%E6%90%AD%E5%BB%BA%E4%BC%81%E4%B8%9A%E5%86%85%E9%83%A8%E7%A7%81%E6%9C%89npm%E4%BB%93%E5%BA%93.md",target:"_blank",rel:"noopener noreferrer"}},[a._v("在 5 分钟内搭建企业内部私有 npm 仓库"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://mp.weixin.qq.com/s/2_0kGRXC2xNcaTf_SC8wSQ",target:"_blank",rel:"noopener noreferrer"}},[a._v("前端高级进阶：在生产环境中使你的 npm i 速度提升 50%"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://mp.weixin.qq.com/s/TU6rvx6vWQWROaxqO3qDsA",target:"_blank",rel:"noopener noreferrer"}},[a._v("node_modules 困境"),t("OutboundLink")],1)])]),a._v(" "),t("h2",{attrs:{id:"联系作者"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#联系作者"}},[a._v("#")]),a._v(" 联系作者")]),a._v(" "),t("div",{attrs:{align:"center"}},[t("p",[a._v("\n        平凡世界，贵在坚持。\n    ")]),a._v(" "),t("img",{attrs:{src:a.$withBase("/about/contact.png")}})])])}),[],!1,null,null,null);s.default=n.exports}}]);