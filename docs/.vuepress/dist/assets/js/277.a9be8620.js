(window.webpackJsonp=window.webpackJsonp||[]).push([[277],{496:function(e,a,s){"use strict";s.r(a);var r=s(13),t=Object(r.a)({},(function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"webpack-打包优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-打包优化"}},[e._v("#")]),e._v(" webpack 打包优化")]),e._v(" "),s("h2",{attrs:{id:"前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[e._v("#")]),e._v(" 前言")]),e._v(" "),s("p",[e._v("本人平时学习及收集内容，欢迎参入一起讨论。")]),e._v(" "),s("h2",{attrs:{id:"内容"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#内容"}},[e._v("#")]),e._v(" 内容")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"l#%E4%B8%80%E3%80%81%E4%BC%98%E5%8C%96%E6%89%93%E5%8C%85%E5%A4%A7%E5%B0%8F"}},[e._v("优化打包大小")])]),e._v(" "),s("li",[s("a",{attrs:{href:"#%E4%BA%8C%E3%80%81%E4%BC%98%E5%8C%96%E6%89%93%E5%8C%85%E9%80%9F%E5%BA%A6"}},[e._v("优化打包速度")])])]),e._v(" "),s("h3",{attrs:{id:"一、优化打包大小"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、优化打包大小"}},[e._v("#")]),e._v(" 一、优化打包大小")]),e._v(" "),s("ul",[s("li",[e._v("对于 Webpack4，打包项目使用 production 模式，这样会自动开启代码压缩")]),e._v(" "),s("li",[e._v("使用 ES6 模块来开启 tree shaking，这个技术可以移除没有使用的代码")]),e._v(" "),s("li",[e._v("优化图片，对于小图可以使用 base64 的方式写入文件中")]),e._v(" "),s("li",[e._v("按照路由拆分代码，实现按需加载")]),e._v(" "),s("li",[e._v("给打包出来的文件名添加哈希，实现浏览器缓存文件(主要采用 chunkFilename)")])]),e._v(" "),s("h3",{attrs:{id:"二、优化打包速度"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、优化打包速度"}},[e._v("#")]),e._v(" 二、优化打包速度")]),e._v(" "),s("ul",[s("li",[e._v("优化"),s("code",[e._v("Loader")]),e._v("配置")]),e._v(" "),s("li",[e._v("优化"),s("code",[e._v("resolve.module")]),e._v("配置")]),e._v(" "),s("li",[e._v("优化"),s("code",[e._v("resolve.aslias")]),e._v("配置")]),e._v(" "),s("li",[e._v("优化"),s("code",[e._v("resolve.mainFields")]),e._v("配置")]),e._v(" "),s("li",[e._v("优化"),s("code",[e._v("resolve.extensions")]),e._v("配置")]),e._v(" "),s("li",[e._v("优化"),s("code",[e._v("module.noParse")]),e._v("配置")]),e._v(" "),s("li",[e._v("优化文件监听的性能")])]),e._v(" "),s("h4",{attrs:{id:"_2-1-优化loader配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-优化loader配置"}},[e._v("#")]),e._v(" 2.1 优化"),s("code",[e._v("Loader")]),e._v("配置")]),e._v(" "),s("p",[e._v("由于 Loader 对文件的转换操作很耗时，所以需要让尽可能少的文件被 Loader 处理。可以通过"),s("code",[e._v("test/include/exclude")]),e._v("三个配置项来命中 loader 要应用规则的文件。")]),e._v(" "),s("p",[e._v("示例代码：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("module .exports = {\n    module : {\n        rules : [{\n        //如果项目源码中只有 文件，就不要写成/\\jsx?$/，以提升正则表达式的性能\n        test: /\\.js$/,\n        //babel -loader 支持缓存转换出的结果，通过 cacheDirectory 选项开启\n        use: ['babel-loader?cacheDirectory'] ,\n        //只对项目根目录下 src 目录中的文件采用 babel-loader\n        include: path.resolve(__dirname,'src'),\n        }],\n    }\n}\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br")])]),s("h4",{attrs:{id:"_2-2-优化resolve-module配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-优化resolve-module配置"}},[e._v("#")]),e._v(" 2.2 优化"),s("code",[e._v("resolve.module")]),e._v("配置")]),e._v(" "),s("p",[e._v("示例代码：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("h4",{attrs:{id:"_2-3-优化resolve-aslias配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-优化resolve-aslias配置"}},[e._v("#")]),e._v(" 2.3 优化"),s("code",[e._v("resolve.aslias")]),e._v("配置")]),e._v(" "),s("p",[e._v("示例代码：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("h4",{attrs:{id:"_2-4-优化resolve-mainfields配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-优化resolve-mainfields配置"}},[e._v("#")]),e._v(" 2.4 优化"),s("code",[e._v("resolve.mainFields")]),e._v("配置")]),e._v(" "),s("h4",{attrs:{id:"_2-5-优化resolve-extensions配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-优化resolve-extensions配置"}},[e._v("#")]),e._v(" 2.5 优化"),s("code",[e._v("resolve.extensions")]),e._v("配置")]),e._v(" "),s("h4",{attrs:{id:"_2-6-优化module-noparse配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-优化module-noparse配置"}},[e._v("#")]),e._v(" 2.6 优化"),s("code",[e._v("module.noParse")]),e._v("配置")]),e._v(" "),s("h4",{attrs:{id:"_2-7-happypack并发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-7-happypack并发"}},[e._v("#")]),e._v(" 2.7 "),s("code",[e._v("happypack")]),e._v("并发")]),e._v(" "),s("p",[e._v("示例代码：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("h4",{attrs:{id:"_2-8-优化文件监听的性能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-8-优化文件监听的性能"}},[e._v("#")]),e._v(" 2.8 优化文件监听的性能")]),e._v(" "),s("p",[e._v("示例代码：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("h4",{attrs:{id:"_2-5-babel使用缓存"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-babel使用缓存"}},[e._v("#")]),e._v(" 2.5 "),s("code",[e._v("babel")]),e._v("使用缓存")]),e._v(" "),s("h4",{attrs:{id:"_2-6-使用-dllplugin-和-dllreferenceplugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-使用-dllplugin-和-dllreferenceplugin"}},[e._v("#")]),e._v(" 2.6 使用 "),s("code",[e._v("DllPlugin")]),e._v(" 和 "),s("code",[e._v("DllReferencePlugin")])]),e._v(" "),s("h4",{attrs:{id:"_2-7-使用commonschunkplugin和splitchunksplugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-7-使用commonschunkplugin和splitchunksplugin"}},[e._v("#")]),e._v(" 2.7 使用"),s("code",[e._v("CommonsChunkPlugin")]),e._v("和"),s("code",[e._v("SplitChunksPlugin")])]),e._v(" "),s("ul",[s("li",[e._v("减少文件搜索范围，比如通过另名，loader 的 test,include & exclude")]),e._v(" "),s("li",[e._v("resolve.module，配置 webpack 去哪些目录下妙手第三方模块")]),e._v(" "),s("li",[e._v("resolve.aslias 配置，通过另外来将原导入路径映射成一个新的导入路径")]),e._v(" "),s("li",[e._v("Webpack4 默认压缩并行")]),e._v(" "),s("li",[e._v("Happypack 并发调用\n"),s("ul",[s("li",[e._v("threads:开启几个子进程去处理这一类型的文件，默认是 3 个，必须整数")]),e._v(" "),s("li",[e._v("verbose:是否允许 happypack 输出日志，默认是 true")]),e._v(" "),s("li",[e._v("threadpool:代表共享进程池，即多个 happypack 实例都使用同一个共享进程池中的子进程去处理任务，以防止资源占用过多")])])]),e._v(" "),s("li",[e._v("Babel 使用缓存编译，主要 loader 参数后面增加 cacheDirectory，关于"),s("a",{attrs:{href:"https://mp.weixin.qq.com/s/NRZQI-Md0dqNAGY96qsn-A",target:"_blank",rel:"noopener noreferrer"}},[e._v("babel 编译原理"),s("OutboundLink")],1)]),e._v(" "),s("li",[e._v("使用 DllPlugin 和 DllReferencePlugin，这两个跟 CommonsChunkPlugin（webpack3 中的，webpack4 中使用 SplitChunksPlugin）有一些区别，主要区别如下\n"),s("ul",[s("li",[e._v("CommonsChunkPlugin 插件每次打包的时候还是会去处理一些第三方依赖库，只是它能把第三方库文件和我们的代码分开掉，生成一个独立的 js 文件，但它不能提高打包速度。")]),e._v(" "),s("li",[e._v("DLLPlugin 它能把第三方库代码分离开，并且每次文件更改的时候，它只会打包该项目自身的代码。所以打包速度会更快。")])])])]),e._v(" "),s("h3",{attrs:{id:"参考资料"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[e._v("#")]),e._v(" 参考资料")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://mp.weixin.qq.com/s?__biz=MzI0MzIyMDM5Ng==&mid=2649825759&idx=1&sn=726279d3dfc2ea0b6ba34788517753ad&chksm=f175eb1cc602620a66821baedcb2663e393f7ae4857e8daf6d57e4c436f9a7297a555d0e4750&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"}},[e._v("Webpack 性能优化总结大全"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://mp.weixin.qq.com/s/R9hyFWIvRlzHj9owa-aDjA",target:"_blank",rel:"noopener noreferrer"}},[e._v("Webpack 优化——将你的构建效率提速翻倍"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://mp.weixin.qq.com/s/zy8GfmfM8tg6uiKAhItGIg",target:"_blank",rel:"noopener noreferrer"}},[e._v("【第 619 期】如何 10 倍提高你的 Webpack 构建效率"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://mp.weixin.qq.com/s/9v5S23tzGhpHPhLFY0V-rQ",target:"_blank",rel:"noopener noreferrer"}},[e._v("【Webpack】538- 打包速度提升指南"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://juejin.im/post/5ea6ea1bf265da7bba5094e2",target:"_blank",rel:"noopener noreferrer"}},[e._v("浅谈 Webpack 性能优化（内附巨详细 Webpack 学习笔记）"),s("OutboundLink")],1)])]),e._v(" "),s("h2",{attrs:{id:"联系作者"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#联系作者"}},[e._v("#")]),e._v(" 联系作者")]),e._v(" "),s("div",{attrs:{align:"center"}},[s("p",[e._v("\n        平凡世界，贵在坚持。\n    ")]),e._v(" "),s("img",{attrs:{src:e.$withBase("/about/contact.png")}})])])}),[],!1,null,null,null);a.default=t.exports}}]);