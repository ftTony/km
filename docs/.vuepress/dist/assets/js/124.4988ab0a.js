(window.webpackJsonp=window.webpackJsonp||[]).push([[124],{412:function(a,s,n){"use strict";n.r(s);var t=n(4),e=Object(t.a)({},(function(){var a=this,s=a.$createElement,n=a._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("h1",{attrs:{id:"函数扩展"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#函数扩展","aria-hidden":"true"}},[a._v("#")]),a._v(" 函数扩展")]),a._v(" "),n("h2",{attrs:{id:"前言"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前言","aria-hidden":"true"}},[a._v("#")]),a._v(" 前言")]),a._v(" "),n("p",[a._v("ES6函数扩展，主要箭头函数")]),a._v(" "),n("h2",{attrs:{id:"内容"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#内容","aria-hidden":"true"}},[a._v("#")]),a._v(" 内容")]),a._v(" "),n("ul",[n("li",[a._v("函数参数默认值")]),a._v(" "),n("li",[a._v("rest参数")]),a._v(" "),n("li",[a._v("箭头函数")]),a._v(" "),n("li",[a._v("尾调用优化")])]),a._v(" "),n("h3",{attrs:{id:"一、函数参数默认值"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一、函数参数默认值","aria-hidden":"true"}},[a._v("#")]),a._v(" 一、函数参数默认值")]),a._v(" "),n("ul",[n("li",[a._v("基本用法")]),a._v(" "),n("li",[a._v("与解构赋值默认值结合使用")]),a._v(" "),n("li",[a._v("参数默认值的位置")]),a._v(" "),n("li",[a._v("函数的 length 属性")]),a._v(" "),n("li",[a._v("作用域")])]),a._v(" "),n("h4",{attrs:{id:"_1-1-基本用法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-基本用法","aria-hidden":"true"}},[a._v("#")]),a._v(" 1.1 基本用法")]),a._v(" "),n("p",[a._v("ES6 允许为函数的参数设置默认值，即直接写在参数定义的后面。")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("function log(x,y = 'World'){\n    console.log(x,y);\n}\n\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br")])]),n("h4",{attrs:{id:"_1-2-与解构赋值默认值结合使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-与解构赋值默认值结合使用","aria-hidden":"true"}},[a._v("#")]),a._v(" 1.2 与解构赋值默认值结合使用")]),a._v(" "),n("p",[a._v("参数默认值可以与解构赋值的默认值，结合起来使用。")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("function foo({x,y = 5}){\n    console.log(x,y);\n}\n\nfoo({}) // undefined 5\nfoo({x:1})  // 1 5\nfoo({x:1,y:2})  // 1 2\n\nfunction foo({x,y = 5} = {}){\n    console.log(x,y);\n}\n\nfoo()\n\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br"),n("span",{staticClass:"line-number"},[a._v("14")]),n("br")])]),n("h4",{attrs:{id:"_1-3-参数默认值的位置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-参数默认值的位置","aria-hidden":"true"}},[a._v("#")]),a._v(" 1.3 参数默认值的位置")]),a._v(" "),n("p",[a._v("通常情况下，定义了默认值的参数，应该是函数的尾参数。因为这样比较容易看出来，到底省略了哪些参数。如果非尾部的参数设置默认值，实际上这个参数是没省略的。")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("// 例一\nfunction f(x = 1, y) {\n  return [x, y];\n}\n\nf() // [1, undefined]\nf(2) // [2, undefined])\nf(, 1) // 报错\nf(undefined, 1) // [1, 1]\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br")])]),n("h4",{attrs:{id:"_1-4-函数的-length-属性"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-函数的-length-属性","aria-hidden":"true"}},[a._v("#")]),a._v(" 1.4 函数的 length 属性")]),a._v(" "),n("p",[a._v("指定了默认值以后，函数的"),n("code",[a._v("length")]),a._v("属性，将返回没有指定默认值的参数个数。也就是说，指定了默认值后，"),n("code",[a._v("length")]),a._v("属性将失真。")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("(function (a){}).length // 1\n(function (a = 5) {}).length    // 0\n(function(a,b,c=5){}).length    // 2\n\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br")])]),n("h4",{attrs:{id:"_1-5-作用域"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-作用域","aria-hidden":"true"}},[a._v("#")]),a._v(" 1.5 作用域")]),a._v(" "),n("p",[a._v("一旦设置了参数的默认值，函数进行声明初始化时，参数会形成一个单独的作用域。等到初始化结束，这个作用域就会消失。这种语法行为，在不设置参数默认值时，是不会出现的。")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("var x = 1;\n\nfunction f(x,y=x){\n    console.log(y);\n}\n\nf(2)    //2\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br")])]),n("h3",{attrs:{id:"二、rest参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二、rest参数","aria-hidden":"true"}},[a._v("#")]),a._v(" 二、rest参数")]),a._v(" "),n("p",[a._v("ES6引入rest参数（形式为"),n("code",[a._v("...变量名")]),a._v("），用于获取函数的多余参数，这样就不需要使用arguments对象了。rest 参数搭配的变量是一个数组，该变量将多余的参数放入数组中。")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("function add(...values){\n    let sum = 0;\n\n    for(var val of values){\n        sum +=val;\n    }\n\n    return sum;\n}\n\nadd(2, 5, 3) // 10\n\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br")])]),n("h3",{attrs:{id:"三、箭头函数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三、箭头函数","aria-hidden":"true"}},[a._v("#")]),a._v(" 三、箭头函数")]),a._v(" "),n("ul",[n("li",[a._v("基本用法")]),a._v(" "),n("li",[a._v("使用注意点")]),a._v(" "),n("li",[a._v("适用使用=>函数")]),a._v(" "),n("li",[a._v("嵌套的箭头函数")]),a._v(" "),n("li",[a._v("绑定 this")])]),a._v(" "),n("h4",{attrs:{id:"_3-1-基本用法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-基本用法","aria-hidden":"true"}},[a._v("#")]),a._v(" 3.1 基本用法")]),a._v(" "),n("p",[a._v("ES6允许使用“箭头”("),n("code",[a._v("=>")]),a._v(")定义函数。")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("var f = v => v;\n\nvar sum = (num1, num2) => { return num1 + num2; }\n\nlet getTempItem = id => ({id:id,name:\"Temp\"});\n\nconst full = ({first,last})=>first + ' ' + last;\n\nconst numbers = (...nums) => nums;\n\n[1,2,3].map(x => x * x);\n\nvar result = values.sort((a, b) => a - b);\n\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br"),n("span",{staticClass:"line-number"},[a._v("14")]),n("br")])]),n("h4",{attrs:{id:"_3-2-使用注意点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-使用注意点","aria-hidden":"true"}},[a._v("#")]),a._v(" 3.2 使用注意点")]),a._v(" "),n("p",[a._v("箭头函数有几个使用注意点。")]),a._v(" "),n("ul",[n("li",[a._v("函数体内的"),n("code",[a._v("this")]),a._v("对象，就是定义时所在的对象，而不是使用时所在的对象。")]),a._v(" "),n("li",[a._v("不可以当作构造函数，也就是说，不可以使用"),n("code",[a._v("new")]),a._v("命令，否则会抛出一个错误。")]),a._v(" "),n("li",[a._v("不可以使用"),n("code",[a._v("arguments")]),a._v("对象，该对象在函数体内不存在。如果要用，可以用rest参数代替。")]),a._v(" "),n("li",[a._v("不可以使用"),n("code",[a._v("yield")]),a._v("命令，因此箭头函数不能用作Generator函数。")])]),a._v(" "),n("h4",{attrs:{id:"_3-3-适用使用-函数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-适用使用-函数","aria-hidden":"true"}},[a._v("#")]),a._v(" 3.3 适用使用=>函数")]),a._v(" "),n("ul",[n("li",[a._v("如果你有一个简短句在线函数表达式，其中唯一的语句是return某个计算出的值，且这个函数内部没有this引用，且没有自身引用（递归、事件绑定/解绑定），且不会要求函数执行这些，那么可以安全地把它重构为=>箭头函数。")]),a._v(" "),n("li",[a._v("如果你有一个内层函数表达式，依赖于在包含它的函数中调用var self = this hack或者.bind(this)来确保适当的this绑定，那么这个内层函数表达式应该可以安全换为=>箭头函数。")]),a._v(" "),n("li",[a._v("如果你的内层函数表达式依赖于封装函数中某种像var args = Array.prototype.slice.call(arguments)来保证arguments的词法复制，那么这个内层函数应该可以安全转换为=>箭头函数。")]),a._v(" "),n("li",[a._v("所有的其他情况——函数声明、较长的多语句函数表达式】需要词法名称标识符（递归等）的函数，以及任何不符合以上几点特征的函数——一般应该避免=>函数语法。")])]),a._v(" "),n("h4",{attrs:{id:"_3-4-嵌套的箭头函数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-嵌套的箭头函数","aria-hidden":"true"}},[a._v("#")]),a._v(" 3.4 嵌套的箭头函数")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("let insert = (value) =>({into:(array)=>({after:(afterValue)=>{\n    array.splice(array.indexOf(afterValue)+1,0,value);\n    return array;\n}})});\n\ninsert(2).into([1,3]).after(1); //[1,2,3]\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br")])]),n("h4",{attrs:{id:"_3-5-绑定-this"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-绑定-this","aria-hidden":"true"}},[a._v("#")]),a._v(" 3.5 绑定 this")]),a._v(" "),n("p",[a._v("函数绑定运算符是并排的两个冒号（::），双冒号左边是一个对象，右边是一个函数。该运算符会自动将左边的对象，作为上下文环境（即this对象），绑定到右边的函数上面。")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("foo::bar;\n// 等同于\nbar.bind(foo);\n\nfoo::bar(...arguments);\n// 等同于\nbar.apply(foo,arguments)\n\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br")])]),n("h3",{attrs:{id:"四、尾调用优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#四、尾调用优化","aria-hidden":"true"}},[a._v("#")]),a._v(" 四、尾调用优化")]),a._v(" "),n("ul",[n("li",[a._v("什么是尾调用")]),a._v(" "),n("li",[a._v("尾调用优化")]),a._v(" "),n("li",[a._v("尾递归")])]),a._v(" "),n("h4",{attrs:{id:"_4-1-什么是尾调用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-什么是尾调用","aria-hidden":"true"}},[a._v("#")]),a._v(" 4.1 什么是尾调用")]),a._v(" "),n("p",[a._v("尾调用是函数式编程的一个重要概念，本身非常简单，就是指某个函数的最后一步是调用另一个函数。")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("function f(x){\n  return g(x);\n}\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br")])]),n("h4",{attrs:{id:"_4-2-尾调用优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-尾调用优化","aria-hidden":"true"}},[a._v("#")]),a._v(" 4.2 尾调用优化")]),a._v(" "),n("p",[a._v("尾调用之所以与其他调用不同，就在于它的特殊的调用位置。")]),a._v(" "),n("h4",{attrs:{id:"_4-3-尾递归"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-尾递归","aria-hidden":"true"}},[a._v("#")]),a._v(" 4.3 尾递归")]),a._v(" "),n("p",[a._v("函数调用自身，称为递归。如果尾调用自身，就称为尾递归。")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("function factorial(n, total) {\n  if (n === 1) return total;\n  return factorial(n - 1, n * total);\n}\n\nfactorial(5, 1) // 120\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br")])]),n("h3",{attrs:{id:"参考资料"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[a._v("#")]),a._v(" 参考资料")]),a._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://yjhenan.gitbooks.io/-ecmascript-6/content/docs/function.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("《ECMAScript 6 入门》 第三版"),n("OutboundLink")],1)]),a._v(" "),n("li",[n("a",{attrs:{href:"http://es6.ruanyifeng.com/#docs/function",target:"_blank",rel:"noopener noreferrer"}},[a._v("ECMAScript 6 入门"),n("OutboundLink")],1)])]),a._v(" "),n("h2",{attrs:{id:"联系作者"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#联系作者","aria-hidden":"true"}},[a._v("#")]),a._v(" 联系作者")]),a._v(" "),n("div",{attrs:{align:"center"}},[n("p",[a._v("\n        平凡世界，贵在坚持。\n    ")]),a._v(" "),n("img",{attrs:{src:a.$withBase("/about/contact.png")}})])])}),[],!1,null,null,null);s.default=e.exports}}]);