<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>buffer 模块 | 小武子知识库</title>
    <meta name="description" content="用心，谈技术。大前端">
    <link rel="icon" href="/hero.jpg">
    
    <link rel="preload" href="/assets/css/0.styles.56546b06.css" as="style"><link rel="preload" href="/assets/js/app.0228c19a.js" as="script"><link rel="preload" href="/assets/js/2.67134772.js" as="script"><link rel="preload" href="/assets/js/142.525bcc22.js" as="script"><link rel="preload" href="/assets/js/3.65dbdf4c.js" as="script"><link rel="prefetch" href="/assets/js/10.22030647.js"><link rel="prefetch" href="/assets/js/100.77523de0.js"><link rel="prefetch" href="/assets/js/101.1a307e36.js"><link rel="prefetch" href="/assets/js/102.f5057684.js"><link rel="prefetch" href="/assets/js/103.54410c4c.js"><link rel="prefetch" href="/assets/js/104.74b8a6d7.js"><link rel="prefetch" href="/assets/js/105.99963ec5.js"><link rel="prefetch" href="/assets/js/106.3f326e3b.js"><link rel="prefetch" href="/assets/js/107.25b9d5bc.js"><link rel="prefetch" href="/assets/js/108.ada7c71e.js"><link rel="prefetch" href="/assets/js/109.af0cd061.js"><link rel="prefetch" href="/assets/js/11.7abe80a8.js"><link rel="prefetch" href="/assets/js/110.b2544896.js"><link rel="prefetch" href="/assets/js/111.96f65d2e.js"><link rel="prefetch" href="/assets/js/112.1ad1daa0.js"><link rel="prefetch" href="/assets/js/113.0de62217.js"><link rel="prefetch" href="/assets/js/114.49a60814.js"><link rel="prefetch" href="/assets/js/115.9a6417ba.js"><link rel="prefetch" href="/assets/js/116.8e2076fe.js"><link rel="prefetch" href="/assets/js/117.9bc8f60f.js"><link rel="prefetch" href="/assets/js/118.063d94d3.js"><link rel="prefetch" href="/assets/js/119.3b77af13.js"><link rel="prefetch" href="/assets/js/12.731df45a.js"><link rel="prefetch" href="/assets/js/120.a5760f4e.js"><link rel="prefetch" href="/assets/js/121.7b252b8a.js"><link rel="prefetch" href="/assets/js/122.53849290.js"><link rel="prefetch" href="/assets/js/123.6e5d20ca.js"><link rel="prefetch" href="/assets/js/124.a9d4a509.js"><link rel="prefetch" href="/assets/js/125.890a5fb2.js"><link rel="prefetch" href="/assets/js/126.e92e4d3a.js"><link rel="prefetch" href="/assets/js/127.37f87d01.js"><link rel="prefetch" href="/assets/js/128.ec6ce46e.js"><link rel="prefetch" href="/assets/js/129.ecfd8eaa.js"><link rel="prefetch" href="/assets/js/13.03a97128.js"><link rel="prefetch" href="/assets/js/130.bfda4a6f.js"><link rel="prefetch" href="/assets/js/131.79427ff8.js"><link rel="prefetch" href="/assets/js/132.68def949.js"><link rel="prefetch" href="/assets/js/133.ecd89a21.js"><link rel="prefetch" href="/assets/js/134.eb2dadf9.js"><link rel="prefetch" href="/assets/js/135.6c90c92a.js"><link rel="prefetch" href="/assets/js/136.d116bda0.js"><link rel="prefetch" href="/assets/js/137.d0204366.js"><link rel="prefetch" href="/assets/js/138.8fe6ce8b.js"><link rel="prefetch" href="/assets/js/139.795a5258.js"><link rel="prefetch" href="/assets/js/14.c1cdcf5b.js"><link rel="prefetch" href="/assets/js/140.48e9e2f7.js"><link rel="prefetch" href="/assets/js/141.8e6f60d1.js"><link rel="prefetch" href="/assets/js/143.8763153f.js"><link rel="prefetch" href="/assets/js/144.4dca44dd.js"><link rel="prefetch" href="/assets/js/145.401513af.js"><link rel="prefetch" href="/assets/js/146.9fc79305.js"><link rel="prefetch" href="/assets/js/147.bd17c780.js"><link rel="prefetch" href="/assets/js/148.13868537.js"><link rel="prefetch" href="/assets/js/149.604c0430.js"><link rel="prefetch" href="/assets/js/15.a7fc935c.js"><link rel="prefetch" href="/assets/js/150.ad831af6.js"><link rel="prefetch" href="/assets/js/151.ae5ab5ed.js"><link rel="prefetch" href="/assets/js/152.a30a2094.js"><link rel="prefetch" href="/assets/js/153.c8c898df.js"><link rel="prefetch" href="/assets/js/154.a2b52b56.js"><link rel="prefetch" href="/assets/js/155.e4e2073a.js"><link rel="prefetch" href="/assets/js/156.1f6ea4b0.js"><link rel="prefetch" href="/assets/js/157.85de9167.js"><link rel="prefetch" href="/assets/js/158.23ed89a1.js"><link rel="prefetch" href="/assets/js/159.3ec0af27.js"><link rel="prefetch" href="/assets/js/16.5c879059.js"><link rel="prefetch" href="/assets/js/160.ae780123.js"><link rel="prefetch" href="/assets/js/161.e3dc2f66.js"><link rel="prefetch" href="/assets/js/162.65a639d1.js"><link rel="prefetch" href="/assets/js/163.641797b5.js"><link rel="prefetch" href="/assets/js/164.af68a110.js"><link rel="prefetch" href="/assets/js/165.f0c40ebe.js"><link rel="prefetch" href="/assets/js/166.98d7ce01.js"><link rel="prefetch" href="/assets/js/167.5ec2d88d.js"><link rel="prefetch" href="/assets/js/168.e5d6bda1.js"><link rel="prefetch" href="/assets/js/169.c881c306.js"><link rel="prefetch" href="/assets/js/17.28b1ca34.js"><link rel="prefetch" href="/assets/js/170.aca6453a.js"><link rel="prefetch" href="/assets/js/171.1e1cbe65.js"><link rel="prefetch" href="/assets/js/172.6c43bfae.js"><link rel="prefetch" href="/assets/js/173.f1a1b34b.js"><link rel="prefetch" href="/assets/js/174.380f379f.js"><link rel="prefetch" href="/assets/js/175.1e5d218f.js"><link rel="prefetch" href="/assets/js/176.cf355ac0.js"><link rel="prefetch" href="/assets/js/177.838d956d.js"><link rel="prefetch" href="/assets/js/178.b4bb6048.js"><link rel="prefetch" href="/assets/js/179.0e260bb9.js"><link rel="prefetch" href="/assets/js/18.790af5f6.js"><link rel="prefetch" href="/assets/js/180.41fe9bcf.js"><link rel="prefetch" href="/assets/js/181.1cc436d4.js"><link rel="prefetch" href="/assets/js/182.f02d37b9.js"><link rel="prefetch" href="/assets/js/183.85852230.js"><link rel="prefetch" href="/assets/js/184.1347e2f9.js"><link rel="prefetch" href="/assets/js/185.7d53b61c.js"><link rel="prefetch" href="/assets/js/186.b8e7ebbd.js"><link rel="prefetch" href="/assets/js/187.88ff1325.js"><link rel="prefetch" href="/assets/js/188.14994d23.js"><link rel="prefetch" href="/assets/js/189.e3f5c880.js"><link rel="prefetch" href="/assets/js/19.12004fb2.js"><link rel="prefetch" href="/assets/js/190.c7fc2cbe.js"><link rel="prefetch" href="/assets/js/191.546b93e1.js"><link rel="prefetch" href="/assets/js/192.49211360.js"><link rel="prefetch" href="/assets/js/193.4b24266f.js"><link rel="prefetch" href="/assets/js/194.24edc528.js"><link rel="prefetch" href="/assets/js/195.75dc733e.js"><link rel="prefetch" href="/assets/js/196.01716104.js"><link rel="prefetch" href="/assets/js/197.ddd3f3c3.js"><link rel="prefetch" href="/assets/js/198.afb86f64.js"><link rel="prefetch" href="/assets/js/199.b3203cc6.js"><link rel="prefetch" href="/assets/js/20.326b0ec9.js"><link rel="prefetch" href="/assets/js/200.2ad16168.js"><link rel="prefetch" href="/assets/js/201.ab7c78f1.js"><link rel="prefetch" href="/assets/js/202.5ea5de8b.js"><link rel="prefetch" href="/assets/js/203.b55b5723.js"><link rel="prefetch" href="/assets/js/204.0130a69c.js"><link rel="prefetch" href="/assets/js/205.823a7f9c.js"><link rel="prefetch" href="/assets/js/206.41206a7d.js"><link rel="prefetch" href="/assets/js/207.d26c8d8c.js"><link rel="prefetch" href="/assets/js/208.50639ab8.js"><link rel="prefetch" href="/assets/js/209.2071d385.js"><link rel="prefetch" href="/assets/js/21.46b22e13.js"><link rel="prefetch" href="/assets/js/210.2e9b06e0.js"><link rel="prefetch" href="/assets/js/211.fb7d5833.js"><link rel="prefetch" href="/assets/js/212.1711cae6.js"><link rel="prefetch" href="/assets/js/213.e9f6be68.js"><link rel="prefetch" href="/assets/js/214.b691c281.js"><link rel="prefetch" href="/assets/js/215.7ee99de5.js"><link rel="prefetch" href="/assets/js/216.793a56d2.js"><link rel="prefetch" href="/assets/js/217.776dddc3.js"><link rel="prefetch" href="/assets/js/218.66c7cc95.js"><link rel="prefetch" href="/assets/js/219.2cbd7cf8.js"><link rel="prefetch" href="/assets/js/22.f0799e50.js"><link rel="prefetch" href="/assets/js/220.773e9b3f.js"><link rel="prefetch" href="/assets/js/221.b704be18.js"><link rel="prefetch" href="/assets/js/222.089c2dc1.js"><link rel="prefetch" href="/assets/js/223.cbdc70ac.js"><link rel="prefetch" href="/assets/js/224.f433a9c0.js"><link rel="prefetch" href="/assets/js/225.d6eb598b.js"><link rel="prefetch" href="/assets/js/226.be5df817.js"><link rel="prefetch" href="/assets/js/227.1f3a09c2.js"><link rel="prefetch" href="/assets/js/228.2638ae63.js"><link rel="prefetch" href="/assets/js/229.9214f8a6.js"><link rel="prefetch" href="/assets/js/23.ed1ceb75.js"><link rel="prefetch" href="/assets/js/230.1937168e.js"><link rel="prefetch" href="/assets/js/231.89d7ea68.js"><link rel="prefetch" href="/assets/js/232.4f42bfa1.js"><link rel="prefetch" href="/assets/js/233.1dc30678.js"><link rel="prefetch" href="/assets/js/234.5951b4de.js"><link rel="prefetch" href="/assets/js/235.f7e8525f.js"><link rel="prefetch" href="/assets/js/236.f814bba7.js"><link rel="prefetch" href="/assets/js/237.b627e1cd.js"><link rel="prefetch" href="/assets/js/238.061f0c94.js"><link rel="prefetch" href="/assets/js/239.b211e963.js"><link rel="prefetch" href="/assets/js/24.338c7c0d.js"><link rel="prefetch" href="/assets/js/240.ffb77822.js"><link rel="prefetch" href="/assets/js/241.71d6939a.js"><link rel="prefetch" href="/assets/js/242.cf768177.js"><link rel="prefetch" href="/assets/js/243.5c5a1802.js"><link rel="prefetch" href="/assets/js/25.2ffcc1b3.js"><link rel="prefetch" href="/assets/js/26.65f7f197.js"><link rel="prefetch" href="/assets/js/27.a847da42.js"><link rel="prefetch" href="/assets/js/28.b9c54bfd.js"><link rel="prefetch" href="/assets/js/29.fad62532.js"><link rel="prefetch" href="/assets/js/30.244ce55a.js"><link rel="prefetch" href="/assets/js/31.f266490e.js"><link rel="prefetch" href="/assets/js/32.4a2bb841.js"><link rel="prefetch" href="/assets/js/33.76d81fa9.js"><link rel="prefetch" href="/assets/js/34.de8d23b7.js"><link rel="prefetch" href="/assets/js/35.ddd30641.js"><link rel="prefetch" href="/assets/js/36.d9fcf524.js"><link rel="prefetch" href="/assets/js/37.6c5dd0b5.js"><link rel="prefetch" href="/assets/js/38.1e3cfc45.js"><link rel="prefetch" href="/assets/js/39.1154d037.js"><link rel="prefetch" href="/assets/js/4.803c74cf.js"><link rel="prefetch" href="/assets/js/40.b234d900.js"><link rel="prefetch" href="/assets/js/41.460ed9dd.js"><link rel="prefetch" href="/assets/js/42.6505dd0d.js"><link rel="prefetch" href="/assets/js/43.77738499.js"><link rel="prefetch" href="/assets/js/44.8e7cd3f3.js"><link rel="prefetch" href="/assets/js/45.dc899667.js"><link rel="prefetch" href="/assets/js/46.a9b70a17.js"><link rel="prefetch" href="/assets/js/47.a4dd33e8.js"><link rel="prefetch" href="/assets/js/48.c94fb677.js"><link rel="prefetch" href="/assets/js/49.80a7f548.js"><link rel="prefetch" href="/assets/js/5.444b0f34.js"><link rel="prefetch" href="/assets/js/50.c40072b8.js"><link rel="prefetch" href="/assets/js/51.d934dbbe.js"><link rel="prefetch" href="/assets/js/52.a1ce6730.js"><link rel="prefetch" href="/assets/js/53.97e3c09c.js"><link rel="prefetch" href="/assets/js/54.fb56da71.js"><link rel="prefetch" href="/assets/js/55.87dabeb2.js"><link rel="prefetch" href="/assets/js/56.61e73757.js"><link rel="prefetch" href="/assets/js/57.8ea0e2a7.js"><link rel="prefetch" href="/assets/js/58.2018ef62.js"><link rel="prefetch" href="/assets/js/59.67ad7ec4.js"><link rel="prefetch" href="/assets/js/6.99851409.js"><link rel="prefetch" href="/assets/js/60.d091f345.js"><link rel="prefetch" href="/assets/js/61.ec75fe0a.js"><link rel="prefetch" href="/assets/js/62.b4ef52a7.js"><link rel="prefetch" href="/assets/js/63.35ae2595.js"><link rel="prefetch" href="/assets/js/64.239dfe51.js"><link rel="prefetch" href="/assets/js/65.811d5de9.js"><link rel="prefetch" href="/assets/js/66.7bf2c475.js"><link rel="prefetch" href="/assets/js/67.2de1811d.js"><link rel="prefetch" href="/assets/js/68.9e9ecdee.js"><link rel="prefetch" href="/assets/js/69.62b5f6a2.js"><link rel="prefetch" href="/assets/js/7.9c4bb057.js"><link rel="prefetch" href="/assets/js/70.2f47aa27.js"><link rel="prefetch" href="/assets/js/71.0a40ac75.js"><link rel="prefetch" href="/assets/js/72.ea6f38f2.js"><link rel="prefetch" href="/assets/js/73.fff2e6cf.js"><link rel="prefetch" href="/assets/js/74.ecc6fa6c.js"><link rel="prefetch" href="/assets/js/75.0ff2efb8.js"><link rel="prefetch" href="/assets/js/76.b41e41d2.js"><link rel="prefetch" href="/assets/js/77.9f9024ff.js"><link rel="prefetch" href="/assets/js/78.586357d8.js"><link rel="prefetch" href="/assets/js/79.e43a7eb1.js"><link rel="prefetch" href="/assets/js/8.2b65e799.js"><link rel="prefetch" href="/assets/js/80.87978be1.js"><link rel="prefetch" href="/assets/js/81.fa7af9a8.js"><link rel="prefetch" href="/assets/js/82.5c88c992.js"><link rel="prefetch" href="/assets/js/83.23ce23d8.js"><link rel="prefetch" href="/assets/js/84.1cf2686c.js"><link rel="prefetch" href="/assets/js/85.5f1994d4.js"><link rel="prefetch" href="/assets/js/86.b802928e.js"><link rel="prefetch" href="/assets/js/87.6c3d1738.js"><link rel="prefetch" href="/assets/js/88.3a850ab5.js"><link rel="prefetch" href="/assets/js/89.7539be89.js"><link rel="prefetch" href="/assets/js/9.fcf63e9a.js"><link rel="prefetch" href="/assets/js/90.eabdbd79.js"><link rel="prefetch" href="/assets/js/91.22d3f39a.js"><link rel="prefetch" href="/assets/js/92.8bb8c4fc.js"><link rel="prefetch" href="/assets/js/93.36dc89d7.js"><link rel="prefetch" href="/assets/js/94.1148098f.js"><link rel="prefetch" href="/assets/js/95.c215c6d6.js"><link rel="prefetch" href="/assets/js/96.825cdeb4.js"><link rel="prefetch" href="/assets/js/97.7afa7000.js"><link rel="prefetch" href="/assets/js/98.b42f97bc.js"><link rel="prefetch" href="/assets/js/99.bff38505.js">
    <link rel="stylesheet" href="/assets/css/0.styles.56546b06.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">小武子知识库</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/js/" class="nav-link router-link-active">javascript</a></div><div class="nav-item"><a href="/css/" class="nav-link">css</a></div><div class="nav-item"><a href="/html5/" class="nav-link">HTML5</a></div><div class="nav-item"><a href="/tool/" class="nav-link">工具</a></div><div class="nav-item"><a href="/project/" class="nav-link">软件工程</a></div><div class="nav-item"><a href="/cs/" class="nav-link">计算机基础</a></div><div class="nav-item"><a href="/materials/" class="nav-link">资料收集</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于作者</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/js/" class="nav-link router-link-active">javascript</a></div><div class="nav-item"><a href="/css/" class="nav-link">css</a></div><div class="nav-item"><a href="/html5/" class="nav-link">HTML5</a></div><div class="nav-item"><a href="/tool/" class="nav-link">工具</a></div><div class="nav-item"><a href="/project/" class="nav-link">软件工程</a></div><div class="nav-item"><a href="/cs/" class="nav-link">计算机基础</a></div><div class="nav-item"><a href="/materials/" class="nav-link">资料收集</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于作者</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>javascript基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/js/es5-expression.html" class="sidebar-link">表达式与运算符</a></li><li><a href="/js/es5-type.html" class="sidebar-link">数据类型与数据类型转换</a></li><li><a href="/js/es5-prototype.html" class="sidebar-link">原型与原型链</a></li><li><a href="/js/es5-this.html" class="sidebar-link">this 解析</a></li><li><a href="/js/es5-closure.html" class="sidebar-link">闭包</a></li><li><a href="/js/es5-apply-call-bind.html" class="sidebar-link">apply&amp;bind&amp;call</a></li><li><a href="/js/es5-dom.html" class="sidebar-link">DOM与BOM</a></li><li><a href="/js/es5-event.html" class="sidebar-link">事件</a></li><li><a href="/js/es5-execution-context.html" class="sidebar-link">执行上下文与执行上下文栈</a></li><li><a href="/js/es5-extends.html" class="sidebar-link">继承</a></li><li><a href="/js/es5-fn.html" class="sidebar-link">函数</a></li><li><a href="/js/es5-news.html" class="sidebar-link">new 理解</a></li><li><a href="/js/es5-array.html" class="sidebar-link">数组</a></li><li><a href="/js/es5-object.html" class="sidebar-link">对象</a></li><li><a href="/js/es5-reg.html" class="sidebar-link">正则表达式学习</a></li><li><a href="/js/es5-scope.html" class="sidebar-link">作用域</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>javascript进阶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/js/js-curry.html" class="sidebar-link">函数柯理化</a></li><li><a href="/js/js-debounce.html" class="sidebar-link">节流与防抖动</a></li><li><a href="/js/js-precision.html" class="sidebar-link">js精度丢失问题</a></li><li><a href="/js/js-memory.html" class="sidebar-link">js 内存管理</a></li><li><a href="/js/js-async.html" class="sidebar-link">事件循环和异步编程的崛起</a></li><li><a href="/js/js-bit.html" class="sidebar-link">js 位运算</a></li><li><a href="/js/js-eventloop.html" class="sidebar-link">理解 EventLoop</a></li><li><a href="/js/js-module.html" class="sidebar-link">js 模块化</a></li><li><a href="/js/js-run.html" class="sidebar-link">javascript 执行过程</a></li><li><a href="/js/js-ast.html" class="sidebar-link">解析、抽象语法树（AST）+ 提升编译速度 5 个技巧</a></li><li><a href="/js/js-v8.html" class="sidebar-link">V8 简介</a></li><li><a href="/js/js-principle.html" class="sidebar-link">JS 编译器，解释引擎</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>es6</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/js/es6-array.html" class="sidebar-link">数组扩展</a></li><li><a href="/js/es6-fn.html" class="sidebar-link">函数扩展</a></li><li><a href="/js/es6-class-1.html" class="sidebar-link">Class 基本用法</a></li><li><a href="/js/es6-class-2.html" class="sidebar-link">Class继承</a></li><li><a href="/js/es6-async.html" class="sidebar-link">async 函数</a></li><li><a href="/js/es6-generator-1.html" class="sidebar-link">Generator 函数的语法</a></li><li><a href="/js/es6-generator-2.html" class="sidebar-link">Generator 函数的异步应用</a></li><li><a href="/js/es6-iterator.html" class="sidebar-link">Iterator 和 for...of 循环</a></li><li><a href="/js/es6-let-const.html" class="sidebar-link">let 与 const</a></li><li><a href="/js/es6-module.html" class="sidebar-link">Module 对象</a></li><li><a href="/js/es6-number.html" class="sidebar-link">数值扩展</a></li><li><a href="/js/es6-object.html" class="sidebar-link">对象扩展</a></li><li><a href="/js/es6-promise.html" class="sidebar-link">Promise 对象</a></li><li><a href="/js/es6-proxy-reflect.html" class="sidebar-link">Proxy 和 Reflect</a></li><li><a href="/js/es6-set-map.html" class="sidebar-link">Set和Map数据结构</a></li><li><a href="/js/es6-string.html" class="sidebar-link">字符串扩展</a></li><li><a href="/js/es6-symbol.html" class="sidebar-link">Symbol</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>TypeScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/js/ts-introduct.html" class="sidebar-link">ts学习</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>nodejs</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/js/node-introdect.html" class="sidebar-link">node 介绍</a></li><li><a href="/js/node-buffer.html" class="active sidebar-link">buffer 模块</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/node-buffer.html#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/js/node-buffer.html#内容" class="sidebar-link">内容</a></li><li class="sidebar-sub-header"><a href="/js/node-buffer.html#联系作者" class="sidebar-link">联系作者</a></li></ul></li><li><a href="/js/node-cheerio.html" class="sidebar-link">cheerio 模块</a></li><li><a href="/js/node-cluster.html" class="sidebar-link">cluster 集群</a></li><li><a href="/js/node-egg.html" class="sidebar-link">egg 基础应用</a></li><li><a href="/js/node-events.html" class="sidebar-link">events 模块</a></li><li><a href="/js/node-express.html" class="sidebar-link">express 基础应用</a></li><li><a href="/js/node-fs.html" class="sidebar-link">fs 模块</a></li><li><a href="/js/node-http.html" class="sidebar-link">http 模块</a></li><li><a href="/js/node-koa.html" class="sidebar-link">koa 基础应用</a></li><li><a href="/js/node-koa-code.html" class="sidebar-link">koa 源码分析</a></li><li><a href="/js/node-net.html" class="sidebar-link">net 模块</a></li><li><a href="/js/node-process.html" class="sidebar-link">process 进程</a></li><li><a href="/js/node-querystring.html" class="sidebar-link">querystring 模块</a></li><li><a href="/js/node-stream.html" class="sidebar-link">stream 模块</a></li><li><a href="/js/node-url.html" class="sidebar-link">url 模块</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>vue框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/js/mvvm.html" class="sidebar-link">mvvm 框架介绍</a></li><li><a href="/js/jquery-code.html" class="sidebar-link">jquery 源码分析</a></li><li><a href="/js/undescore.html" class="sidebar-link">undescore 源码分析</a></li><li><a href="/js/vue-lifecycle.html" class="sidebar-link">Vue生命周期</a></li><li><a href="/js/vue-bind.html" class="sidebar-link">vue 双向数据绑定原理</a></li><li><a href="/js/vue-nexttick.html" class="sidebar-link">Vue.netTick理解与分析</a></li><li><a href="/js/vue-watch.html" class="sidebar-link">Vue中的computed,watch,methods理解与分析</a></li><li><a href="/js/vue-code.html" class="sidebar-link">vue 源码分析</a></li><li><a href="/js/vue-diff.html" class="sidebar-link">diff 算法</a></li><li><a href="/js/vue-router-code.html" class="sidebar-link">vue-router 源码分析</a></li><li><a href="/js/vue-communication.html" class="sidebar-link">vue 组件通信</a></li><li><a href="/js/vue-router.html" class="sidebar-link">vue-router 学习及原理</a></li><li><a href="/js/vue-vuex.html" class="sidebar-link">vuex 学习及原理</a></li><li><a href="/js/vue-vuex-code.html" class="sidebar-link">vue-vuex 源码分析</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="buffer-模块"><a href="#buffer-模块" aria-hidden="true" class="header-anchor">#</a> buffer 模块</h1> <h2 id="前言"><a href="#前言" aria-hidden="true" class="header-anchor">#</a> 前言</h2> <p>Buffer是<code>node</code>的核心模块，开发者可以利用它 来处理二进制数据，比如文件流的读写、网络请求数据的处理等。</p> <p>Buffer 的<code>API</code>非常多，本文仅挑选 比较常用/容易理解的<code>API</code>进行讲解，包括<code>Buffer</code>实例的创建、比较、连接、拷贝、查找、遍历、类型转换、截取、编码转换等。</p> <h2 id="内容"><a href="#内容" aria-hidden="true" class="header-anchor">#</a> 内容</h2> <ul><li><a href="#%E4%B8%80%E3%80%81buffer-%E7%BB%93%E6%9E%84">Buffer 结构</a></li> <li><a href="#%E4%BA%8C%E3%80%81buffer-%E7%9A%84%E8%BD%AC%E6%8D%A2">Buffer 的转换</a></li> <li><a href="#%E4%B8%89%E3%80%81buffer-%E7%9A%84%E6%8B%BC%E6%8E%A5">Buffer 的拼接</a></li> <li><a href="#%E5%9B%9B%E3%80%81buffer-%E7%9B%B8%E5%85%B3%E6%96%B9%E6%B3%95">Buffer 相关方法</a></li></ul> <h3 id="一、buffer-结构"><a href="#一、buffer-结构" aria-hidden="true" class="header-anchor">#</a> 一、Buffer 结构</h3> <p>Buffer 是一个像 Array 的对象，但它主要用于操作字节。</p> <ul><li><a href="#11-%E6%A8%A1%E5%9D%97%E7%BB%93%E6%9E%84">模块结构</a></li> <li><a href="#12-buffer-%E5%AF%B9%E8%B1%A1">Buffer 对象</a></li> <li><a href="#13-buffer-%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D">Buffer 内存分配</a></li></ul> <h4 id="_1-1-模块结构"><a href="#_1-1-模块结构" aria-hidden="true" class="header-anchor">#</a> 1.1 模块结构</h4> <p>Buffer 是一个典型的 JavaScript 与 C++结合的模块，它将性能相关部分用 C++实现，将非性能相关的部分用 JavaScript 实现。</p> <h4 id="_1-2-buffer-对象"><a href="#_1-2-buffer-对象" aria-hidden="true" class="header-anchor">#</a> 1.2 Buffer 对象</h4> <p>Buffer 对象类似于数组，它的元素为 16 进制的两位数，即 0 到 255 的数值。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var str = '深入浅出node.js';
var buf = new Buffer(str,'utf-8');
console.log(buf);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_1-3-buffer-内存分配"><a href="#_1-3-buffer-内存分配" aria-hidden="true" class="header-anchor">#</a> 1.3 Buffer 内存分配</h4> <p>Buffer 对象的内存分配不是在 V8 的堆内存中，而是在 Node 的 C++层面实现内存的申请的。因为处理大量的字节数据不能采用需要一点内存就向操作系统申请一点内存的方式，这可能千万大量内存申请的系统调用。Node 采用了 slab 分配机制，slab 具有 3 种状态</p> <ul><li>full：完全分配状态</li> <li>partial：部分分配状态</li> <li>empty：没有被分配状态</li></ul> <h3 id="二、buffer-的转换"><a href="#二、buffer-的转换" aria-hidden="true" class="header-anchor">#</a> 二、Buffer 的转换</h3> <ul><li><a href="#21-%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC-buffer">字符串转 Buffer</a></li> <li><a href="#22-buffer-%E8%BD%AC%E5%AD%97%E7%AC%A6%E4%B8%B2">Buffer 转字符串</a></li> <li><a href="#23-buffer-%E4%B8%8D%E6%94%AF%E6%8C%81%E7%9A%84%E7%BC%96%E7%A0%81%E7%B1%BB%E5%9E%8B">Buffer 不支持的编码类型</a></li></ul> <h4 id="_2-1-字符串转-buffer"><a href="#_2-1-字符串转-buffer" aria-hidden="true" class="header-anchor">#</a> 2.1 字符串转 Buffer</h4> <p>字符串转 Buffer 对象主要是通过构造函数完成的：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>new Buffer(str,[encoding]);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_2-2-buffer-转字符串"><a href="#_2-2-buffer-转字符串" aria-hidden="true" class="header-anchor">#</a> 2.2 Buffer 转字符串</h4> <p>实现 Buffer 向字符串转换，主要是通过 Buffer 对象的 toString()可以将 Buffer 对象转换为字符串。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>buf.toString([encoding],[start],[end])

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_2-3-buffer-不支持的编码类型"><a href="#_2-3-buffer-不支持的编码类型" aria-hidden="true" class="header-anchor">#</a> 2.3 Buffer 不支持的编码类型</h4> <p>Node 的 Buffer 对象支持的编码类型有限，可以使用 isEncoding()函数来判断编码是否支持转换，iconv 和 iconv-lite 两个模块可以支持更多的编码类型转换。</p> <h3 id="三、buffer-的拼接"><a href="#三、buffer-的拼接" aria-hidden="true" class="header-anchor">#</a> 三、Buffer 的拼接</h3> <ul><li><a href="#31-%E4%B9%B1%E7%A0%81%E6%98%AF%E5%A6%82%E4%BD%95%E4%BA%A7%E7%94%9F%E7%9A%84">乱码是如何产生的</a></li> <li><a href="#32-setencoding%E4%B8%8E-string_decoder">setEncoding()与 string_decoder()</a></li> <li><a href="#33-%E6%AD%A3%E7%A1%AE%E6%8B%BC%E6%8E%A5-buffer">正确拼接 Buffer</a></li></ul> <h4 id="_3-1-乱码是如何产生的"><a href="#_3-1-乱码是如何产生的" aria-hidden="true" class="header-anchor">#</a> 3.1 乱码是如何产生的</h4> <p>原因在于文件可读流在读取时会逐个读取 Buffer。中文字在 UTF-8 下占 3 个字节。</p> <h4 id="_3-2-setencoding-与-string-decoder"><a href="#_3-2-setencoding-与-string-decoder" aria-hidden="true" class="header-anchor">#</a> 3.2 setEncoding()与 string_decoder()</h4> <ul><li><code>setEncoding()</code>：设置编码</li> <li><code>string_decoder()</code>：设置解码</li></ul> <h4 id="_3-3-正确拼接-buffer"><a href="#_3-3-正确拼接-buffer" aria-hidden="true" class="header-anchor">#</a> 3.3 正确拼接 Buffer</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>Buffer.concat = function(list,length){
    if(!Array.isArray(list)){
        throw new Error('Usage:Buffer.concat(list,[length])');
    }

    if(list.length ===0){
        return new Buffer(0);
    }else if(list.length ===1){
        return list[0];
    }

    if(typeof length !== 'number'){
        length =0;
        for(var i=0;i&lt;list.length;i++){
            var buf = list[i];
            length+=buf.length;
        }
    }

    var buffer = new Buffer(length);
    var pos=0;
    for(var i=0;i&lt;list.length;i++){
        var buf = list[i];
        buf.copy(buffer.pos);
        pos+= buf.length;
    }
    return buffer;
};
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="四、buffer-相关方法"><a href="#四、buffer-相关方法" aria-hidden="true" class="header-anchor">#</a> 四、Buffer 相关方法</h3> <ul><li><strong>buf.equals(otherBuffer)：</strong> 判断两个 buffer 实例存储的数据是否相同，如果是，返回 true，否则返回 false。</li> <li><strong>buf.compare(target[, targetStart[, targetEnd[, sourceStart[, sourceEnd]]]])：</strong> 也判断两个 buffer 实例进行比较，不同的是：可以指定比较的范围；返回值为整数，达标 buf、target 的大小关系</li> <li><strong>Buffer.from([62])：</strong> 每个 array 的元素对应 1 个字节（8 位），取值从 0 到 255。</li> <li><strong>Buffer.concat(list[, totalLength])：</strong> 返回一个合并了<code>list</code>中所有<code>Buffer</code>实例的新<code>Buffer</code>。</li> <li><strong>buf.copy(target[, targetStart[, sourceStart[, sourceEnd]]])：</strong> 拷贝<code>buf</code>中某个区域的数据到<code>target</code>中的某个区域，即使<code>target</code>的内存区域与<code>buf</code>的重叠。</li> <li><strong>buf.indexOf(value[, byteOffset][, encoding])：</strong> 跟数组的查找差不多，需要注意的是，value 可能是 String、Buffer、Integer 中的任意类型。</li> <li><strong>buf.write(string[, offset[, length]][, encoding])：</strong> 将 string 写入 buf 实例，同时返回写入的字节数。</li> <li><strong>buf.fill(value[, offset[, end]][, encoding])：</strong> 用<code>value</code>填充 buf，常用于寝化 buf。</li> <li><strong>buf.toString([encoding[, start[, end]]])：</strong> 把 buf 解码成字符串</li> <li><strong>buf.toJSON()：</strong> 转成 JSON 字符串</li> <li><strong>buf.values()、buf.keys()、buf.entries()：</strong> 用于对 <code>buf</code>进行 <code>for...of</code>遍历</li> <li><strong>buf.slice([start[, end]])：</strong> 用于截取 buf，并返回一个新的 Buffer 实例。</li></ul> <h3 id="参考资料"><a href="#参考资料" aria-hidden="true" class="header-anchor">#</a> 参考资料</h3> <ul><li>《深入浅出 Nodejs》</li> <li><a href="https://github.com/chyingp/nodejs-learning-guide/blob/master/%E6%A8%A1%E5%9D%97/buffer.md" target="_blank" rel="noopener noreferrer">buffer 模块<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="联系作者"><a href="#联系作者" aria-hidden="true" class="header-anchor">#</a> 联系作者</h2> <div align="center"><p>
        平凡世界，贵在坚持。
    </p> <img src="/about/contact.png"></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新于:</span> <span class="time">2019-5-12 09:58:10</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/js/node-introdect.html" class="prev">node 介绍</a></span> <span class="next"><a href="/js/node-cheerio.html">cheerio 模块</a>→
    </span></p></div> </main></div><div class="global-ui"><!----><!----><div></div></div></div>
    <script src="/assets/js/app.0228c19a.js" defer></script><script src="/assets/js/2.67134772.js" defer></script><script src="/assets/js/142.525bcc22.js" defer></script><script src="/assets/js/3.65dbdf4c.js" defer></script>
  </body>
</html>
