<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue 组件通信 | 小武子知识库</title>
    <meta name="description" content="用心，谈技术。大前端">
    <link rel="icon" href="/hero.jpg">
    
    <link rel="preload" href="/assets/css/0.styles.56546b06.css" as="style"><link rel="preload" href="/assets/js/app.317e8fe1.js" as="script"><link rel="preload" href="/assets/js/2.67134772.js" as="script"><link rel="preload" href="/assets/js/162.93ebb0b4.js" as="script"><link rel="preload" href="/assets/js/3.65dbdf4c.js" as="script"><link rel="prefetch" href="/assets/js/10.51212818.js"><link rel="prefetch" href="/assets/js/100.5b285a6b.js"><link rel="prefetch" href="/assets/js/101.8453c7cc.js"><link rel="prefetch" href="/assets/js/102.82f0adf3.js"><link rel="prefetch" href="/assets/js/103.34f049f4.js"><link rel="prefetch" href="/assets/js/104.cacff51d.js"><link rel="prefetch" href="/assets/js/105.56f79dba.js"><link rel="prefetch" href="/assets/js/106.bcfbec74.js"><link rel="prefetch" href="/assets/js/107.7a474f46.js"><link rel="prefetch" href="/assets/js/108.cb679908.js"><link rel="prefetch" href="/assets/js/109.f08efba1.js"><link rel="prefetch" href="/assets/js/11.8d51635e.js"><link rel="prefetch" href="/assets/js/110.557adc0d.js"><link rel="prefetch" href="/assets/js/111.0ef5c9a9.js"><link rel="prefetch" href="/assets/js/112.b00a391b.js"><link rel="prefetch" href="/assets/js/113.dd2045c3.js"><link rel="prefetch" href="/assets/js/114.8a56bfdc.js"><link rel="prefetch" href="/assets/js/115.4a0a0bc6.js"><link rel="prefetch" href="/assets/js/116.1325243b.js"><link rel="prefetch" href="/assets/js/117.c190cf64.js"><link rel="prefetch" href="/assets/js/118.23981b43.js"><link rel="prefetch" href="/assets/js/119.4fb6f74f.js"><link rel="prefetch" href="/assets/js/12.24bb78b4.js"><link rel="prefetch" href="/assets/js/120.dd2613f9.js"><link rel="prefetch" href="/assets/js/121.fce160e6.js"><link rel="prefetch" href="/assets/js/122.5d8d6e2b.js"><link rel="prefetch" href="/assets/js/123.e41c816e.js"><link rel="prefetch" href="/assets/js/124.390253f6.js"><link rel="prefetch" href="/assets/js/125.978c9d46.js"><link rel="prefetch" href="/assets/js/126.0c259ad1.js"><link rel="prefetch" href="/assets/js/127.1df0e89b.js"><link rel="prefetch" href="/assets/js/128.62c4b786.js"><link rel="prefetch" href="/assets/js/129.0e9ff0ee.js"><link rel="prefetch" href="/assets/js/13.739a8c4b.js"><link rel="prefetch" href="/assets/js/130.f178d1bd.js"><link rel="prefetch" href="/assets/js/131.defeae62.js"><link rel="prefetch" href="/assets/js/132.a08299c1.js"><link rel="prefetch" href="/assets/js/133.4a1f3b36.js"><link rel="prefetch" href="/assets/js/134.1b9f1bb4.js"><link rel="prefetch" href="/assets/js/135.33f72f44.js"><link rel="prefetch" href="/assets/js/136.7870c0e7.js"><link rel="prefetch" href="/assets/js/137.41abeb0d.js"><link rel="prefetch" href="/assets/js/138.b14d1ba6.js"><link rel="prefetch" href="/assets/js/139.d91f89c7.js"><link rel="prefetch" href="/assets/js/14.8b13601f.js"><link rel="prefetch" href="/assets/js/140.967b27ae.js"><link rel="prefetch" href="/assets/js/141.0cf51511.js"><link rel="prefetch" href="/assets/js/142.e84d1759.js"><link rel="prefetch" href="/assets/js/143.cd3171ad.js"><link rel="prefetch" href="/assets/js/144.f3042181.js"><link rel="prefetch" href="/assets/js/145.d488de38.js"><link rel="prefetch" href="/assets/js/146.1d599960.js"><link rel="prefetch" href="/assets/js/147.bcfbeb60.js"><link rel="prefetch" href="/assets/js/148.b1a78358.js"><link rel="prefetch" href="/assets/js/149.33574f1f.js"><link rel="prefetch" href="/assets/js/15.71112d0f.js"><link rel="prefetch" href="/assets/js/150.bdc6407c.js"><link rel="prefetch" href="/assets/js/151.b9e41604.js"><link rel="prefetch" href="/assets/js/152.ebfe2461.js"><link rel="prefetch" href="/assets/js/153.83066f9c.js"><link rel="prefetch" href="/assets/js/154.148d48ac.js"><link rel="prefetch" href="/assets/js/155.3f966844.js"><link rel="prefetch" href="/assets/js/156.e25bac41.js"><link rel="prefetch" href="/assets/js/157.945b30f0.js"><link rel="prefetch" href="/assets/js/158.177791ec.js"><link rel="prefetch" href="/assets/js/159.5412d214.js"><link rel="prefetch" href="/assets/js/16.0ec647a8.js"><link rel="prefetch" href="/assets/js/160.762bb636.js"><link rel="prefetch" href="/assets/js/161.e5cabb60.js"><link rel="prefetch" href="/assets/js/163.2372d351.js"><link rel="prefetch" href="/assets/js/164.bff482b7.js"><link rel="prefetch" href="/assets/js/165.77c96470.js"><link rel="prefetch" href="/assets/js/166.d180b784.js"><link rel="prefetch" href="/assets/js/167.957514a1.js"><link rel="prefetch" href="/assets/js/168.e6bb1602.js"><link rel="prefetch" href="/assets/js/169.87c2f501.js"><link rel="prefetch" href="/assets/js/17.fe813512.js"><link rel="prefetch" href="/assets/js/170.315907bd.js"><link rel="prefetch" href="/assets/js/171.1dd289a5.js"><link rel="prefetch" href="/assets/js/172.522ea95a.js"><link rel="prefetch" href="/assets/js/173.25bcf534.js"><link rel="prefetch" href="/assets/js/174.e9c810c5.js"><link rel="prefetch" href="/assets/js/175.287dfdd5.js"><link rel="prefetch" href="/assets/js/176.8fa6ea39.js"><link rel="prefetch" href="/assets/js/177.3a2098af.js"><link rel="prefetch" href="/assets/js/178.7315add5.js"><link rel="prefetch" href="/assets/js/179.3e3b9ab3.js"><link rel="prefetch" href="/assets/js/18.659924a5.js"><link rel="prefetch" href="/assets/js/180.ada782c3.js"><link rel="prefetch" href="/assets/js/181.e7fdf9b0.js"><link rel="prefetch" href="/assets/js/182.a7a728c3.js"><link rel="prefetch" href="/assets/js/183.17c4ba49.js"><link rel="prefetch" href="/assets/js/184.49875401.js"><link rel="prefetch" href="/assets/js/185.aaf0b66b.js"><link rel="prefetch" href="/assets/js/186.306ef53d.js"><link rel="prefetch" href="/assets/js/187.de85ecf4.js"><link rel="prefetch" href="/assets/js/188.c2cecbc3.js"><link rel="prefetch" href="/assets/js/189.0dadb7d7.js"><link rel="prefetch" href="/assets/js/19.9bc16e66.js"><link rel="prefetch" href="/assets/js/190.5f30ed64.js"><link rel="prefetch" href="/assets/js/191.8b37387a.js"><link rel="prefetch" href="/assets/js/192.a07b8570.js"><link rel="prefetch" href="/assets/js/193.8c20bf70.js"><link rel="prefetch" href="/assets/js/194.eb7f22d0.js"><link rel="prefetch" href="/assets/js/195.76ef8b6d.js"><link rel="prefetch" href="/assets/js/196.c8b7f01f.js"><link rel="prefetch" href="/assets/js/197.6b585738.js"><link rel="prefetch" href="/assets/js/198.c106fcb5.js"><link rel="prefetch" href="/assets/js/199.d474daed.js"><link rel="prefetch" href="/assets/js/20.5da7c682.js"><link rel="prefetch" href="/assets/js/200.3a5c3ef4.js"><link rel="prefetch" href="/assets/js/201.6a66f7f3.js"><link rel="prefetch" href="/assets/js/202.4ebd9828.js"><link rel="prefetch" href="/assets/js/203.5572b70e.js"><link rel="prefetch" href="/assets/js/204.08ef034b.js"><link rel="prefetch" href="/assets/js/205.3331baad.js"><link rel="prefetch" href="/assets/js/206.3bdcb31a.js"><link rel="prefetch" href="/assets/js/207.81ed362f.js"><link rel="prefetch" href="/assets/js/208.6bc0ae76.js"><link rel="prefetch" href="/assets/js/209.3cf0d67e.js"><link rel="prefetch" href="/assets/js/21.a884b92d.js"><link rel="prefetch" href="/assets/js/210.50f402df.js"><link rel="prefetch" href="/assets/js/211.db22db74.js"><link rel="prefetch" href="/assets/js/212.1676d088.js"><link rel="prefetch" href="/assets/js/213.0e8b03f0.js"><link rel="prefetch" href="/assets/js/214.c4c796f6.js"><link rel="prefetch" href="/assets/js/215.f4923d79.js"><link rel="prefetch" href="/assets/js/216.a127c867.js"><link rel="prefetch" href="/assets/js/217.270726ca.js"><link rel="prefetch" href="/assets/js/218.53ae0272.js"><link rel="prefetch" href="/assets/js/219.6d7ea89b.js"><link rel="prefetch" href="/assets/js/22.0aff44b6.js"><link rel="prefetch" href="/assets/js/220.ef994822.js"><link rel="prefetch" href="/assets/js/221.ed0fc04e.js"><link rel="prefetch" href="/assets/js/222.490688f9.js"><link rel="prefetch" href="/assets/js/223.c76bd366.js"><link rel="prefetch" href="/assets/js/224.1bf6e862.js"><link rel="prefetch" href="/assets/js/225.5060586a.js"><link rel="prefetch" href="/assets/js/23.6bf73bcf.js"><link rel="prefetch" href="/assets/js/24.f8599c7f.js"><link rel="prefetch" href="/assets/js/25.0a717abe.js"><link rel="prefetch" href="/assets/js/26.247a1740.js"><link rel="prefetch" href="/assets/js/27.57ebe0d3.js"><link rel="prefetch" href="/assets/js/28.0b23d8e7.js"><link rel="prefetch" href="/assets/js/29.78a9d581.js"><link rel="prefetch" href="/assets/js/30.f55e017e.js"><link rel="prefetch" href="/assets/js/31.cd48cabe.js"><link rel="prefetch" href="/assets/js/32.25636a63.js"><link rel="prefetch" href="/assets/js/33.e210c275.js"><link rel="prefetch" href="/assets/js/34.aa2b9dc7.js"><link rel="prefetch" href="/assets/js/35.2cfd2f29.js"><link rel="prefetch" href="/assets/js/36.203a2e4d.js"><link rel="prefetch" href="/assets/js/37.0e6620d2.js"><link rel="prefetch" href="/assets/js/38.e7b4f55c.js"><link rel="prefetch" href="/assets/js/39.e0d7fdab.js"><link rel="prefetch" href="/assets/js/4.803c74cf.js"><link rel="prefetch" href="/assets/js/40.16d6d165.js"><link rel="prefetch" href="/assets/js/41.59898b2c.js"><link rel="prefetch" href="/assets/js/42.6d809fcc.js"><link rel="prefetch" href="/assets/js/43.dc810c4f.js"><link rel="prefetch" href="/assets/js/44.17b61651.js"><link rel="prefetch" href="/assets/js/45.f6c75e37.js"><link rel="prefetch" href="/assets/js/46.42ea7905.js"><link rel="prefetch" href="/assets/js/47.ed456b7e.js"><link rel="prefetch" href="/assets/js/48.538607d6.js"><link rel="prefetch" href="/assets/js/49.58a6997e.js"><link rel="prefetch" href="/assets/js/5.444b0f34.js"><link rel="prefetch" href="/assets/js/50.688b2b6e.js"><link rel="prefetch" href="/assets/js/51.d0a99f8b.js"><link rel="prefetch" href="/assets/js/52.87c5385c.js"><link rel="prefetch" href="/assets/js/53.7931d053.js"><link rel="prefetch" href="/assets/js/54.ad80d239.js"><link rel="prefetch" href="/assets/js/55.b0d1df05.js"><link rel="prefetch" href="/assets/js/56.983eb5aa.js"><link rel="prefetch" href="/assets/js/57.ef2e3e14.js"><link rel="prefetch" href="/assets/js/58.550d2ae3.js"><link rel="prefetch" href="/assets/js/59.c63600b1.js"><link rel="prefetch" href="/assets/js/6.b313ca13.js"><link rel="prefetch" href="/assets/js/60.4fae8b05.js"><link rel="prefetch" href="/assets/js/61.711c6d4f.js"><link rel="prefetch" href="/assets/js/62.3e682e5f.js"><link rel="prefetch" href="/assets/js/63.63531e30.js"><link rel="prefetch" href="/assets/js/64.3ba262a2.js"><link rel="prefetch" href="/assets/js/65.c048b23e.js"><link rel="prefetch" href="/assets/js/66.38876418.js"><link rel="prefetch" href="/assets/js/67.3f3dbc43.js"><link rel="prefetch" href="/assets/js/68.ef416d7d.js"><link rel="prefetch" href="/assets/js/69.a7aa265e.js"><link rel="prefetch" href="/assets/js/7.9f48120b.js"><link rel="prefetch" href="/assets/js/70.f5d57ce0.js"><link rel="prefetch" href="/assets/js/71.1541e1ba.js"><link rel="prefetch" href="/assets/js/72.e5ae2d5d.js"><link rel="prefetch" href="/assets/js/73.e39e2c29.js"><link rel="prefetch" href="/assets/js/74.c59b9397.js"><link rel="prefetch" href="/assets/js/75.b1ee900f.js"><link rel="prefetch" href="/assets/js/76.8d3e75a0.js"><link rel="prefetch" href="/assets/js/77.a5737ef3.js"><link rel="prefetch" href="/assets/js/78.fa654373.js"><link rel="prefetch" href="/assets/js/79.398f8e38.js"><link rel="prefetch" href="/assets/js/8.91e99945.js"><link rel="prefetch" href="/assets/js/80.766f414a.js"><link rel="prefetch" href="/assets/js/81.15c61fc8.js"><link rel="prefetch" href="/assets/js/82.8b050cd7.js"><link rel="prefetch" href="/assets/js/83.288ad76c.js"><link rel="prefetch" href="/assets/js/84.9c957078.js"><link rel="prefetch" href="/assets/js/85.6cd1da4d.js"><link rel="prefetch" href="/assets/js/86.91d2339e.js"><link rel="prefetch" href="/assets/js/87.fe54d698.js"><link rel="prefetch" href="/assets/js/88.bde60cf4.js"><link rel="prefetch" href="/assets/js/89.73948a86.js"><link rel="prefetch" href="/assets/js/9.468e6e84.js"><link rel="prefetch" href="/assets/js/90.1ea05676.js"><link rel="prefetch" href="/assets/js/91.49bf8b29.js"><link rel="prefetch" href="/assets/js/92.3ecf1beb.js"><link rel="prefetch" href="/assets/js/93.1e701636.js"><link rel="prefetch" href="/assets/js/94.e5a86652.js"><link rel="prefetch" href="/assets/js/95.d52424df.js"><link rel="prefetch" href="/assets/js/96.12c6de7f.js"><link rel="prefetch" href="/assets/js/97.80f23a18.js"><link rel="prefetch" href="/assets/js/98.9e2ea0f8.js"><link rel="prefetch" href="/assets/js/99.67235967.js">
    <link rel="stylesheet" href="/assets/css/0.styles.56546b06.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">小武子知识库</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/js/" class="nav-link router-link-active">javascript</a></div><div class="nav-item"><a href="/css/" class="nav-link">css</a></div><div class="nav-item"><a href="/html5/" class="nav-link">HTML5</a></div><div class="nav-item"><a href="/tool/" class="nav-link">工具</a></div><div class="nav-item"><a href="/project/" class="nav-link">软件工程</a></div><div class="nav-item"><a href="/cs/" class="nav-link">计算机基础</a></div><div class="nav-item"><a href="/materials/" class="nav-link">资料收集</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于作者</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/js/" class="nav-link router-link-active">javascript</a></div><div class="nav-item"><a href="/css/" class="nav-link">css</a></div><div class="nav-item"><a href="/html5/" class="nav-link">HTML5</a></div><div class="nav-item"><a href="/tool/" class="nav-link">工具</a></div><div class="nav-item"><a href="/project/" class="nav-link">软件工程</a></div><div class="nav-item"><a href="/cs/" class="nav-link">计算机基础</a></div><div class="nav-item"><a href="/materials/" class="nav-link">资料收集</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于作者</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>javascript基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/js/es5-expression.html" class="sidebar-link">表达式与运算符</a></li><li><a href="/js/es5-type.html" class="sidebar-link">数据类型与数据类型转换</a></li><li><a href="/js/es5-prototype.html" class="sidebar-link">原型与原型链</a></li><li><a href="/js/es5-this.html" class="sidebar-link">this 解析</a></li><li><a href="/js/es5-closure.html" class="sidebar-link">闭包</a></li><li><a href="/js/es5-apply-call-bind.html" class="sidebar-link">apply&amp;bind&amp;call</a></li><li><a href="/js/es5-dom.html" class="sidebar-link">DOM与BOM</a></li><li><a href="/js/es5-event.html" class="sidebar-link">事件</a></li><li><a href="/js/es5-execution-context.html" class="sidebar-link">执行上下文与执行上下文栈</a></li><li><a href="/js/es5-extends.html" class="sidebar-link">继承</a></li><li><a href="/js/es5-fn.html" class="sidebar-link">函数</a></li><li><a href="/js/es5-news.html" class="sidebar-link">new 理解</a></li><li><a href="/js/es5-object.html" class="sidebar-link">对象</a></li><li><a href="/js/es5-reg.html" class="sidebar-link">正则表达式学习</a></li><li><a href="/js/es5-scope.html" class="sidebar-link">作用域</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>javascript进阶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/js/js-curry.html" class="sidebar-link">函数柯理化</a></li><li><a href="/js/js-debounce.html" class="sidebar-link">节流与防抖动</a></li><li><a href="/js/js-precision.html" class="sidebar-link">js精度丢失问题</a></li><li><a href="/js/js-memory.html" class="sidebar-link">js 内存管理</a></li><li><a href="/js/js-async.html" class="sidebar-link">事件循环和异步编程的崛起</a></li><li><a href="/js/js-bit.html" class="sidebar-link">js 位运算</a></li><li><a href="/js/js-eventloop.html" class="sidebar-link">理解 EventLoop</a></li><li><a href="/js/js-module.html" class="sidebar-link">js 模块化</a></li><li><a href="/js/js-run.html" class="sidebar-link">javascript 执行过程</a></li><li><a href="/js/js-ast.html" class="sidebar-link">解析、抽象语法树（AST）+ 提升编译速度 5 个技巧</a></li><li><a href="/js/js-v8.html" class="sidebar-link">V8 简介</a></li><li><a href="/js/js-principle.html" class="sidebar-link">JS 编译器，解释引擎</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>es6</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/js/es6-array.html" class="sidebar-link">数组扩展</a></li><li><a href="/js/es6-fn.html" class="sidebar-link">函数扩展</a></li><li><a href="/js/es6-class-1.html" class="sidebar-link">Class 基本用法</a></li><li><a href="/js/es6-class-2.html" class="sidebar-link">Class继承</a></li><li><a href="/js/es6-async.html" class="sidebar-link">async 函数</a></li><li><a href="/js/es6-generator-1.html" class="sidebar-link">Generator 函数的语法</a></li><li><a href="/js/es6-generator-2.html" class="sidebar-link">Generator 函数的异步应用</a></li><li><a href="/js/es6-iterator.html" class="sidebar-link">Iterator 和 for...of 循环</a></li><li><a href="/js/es6-let-const.html" class="sidebar-link">let 与 const</a></li><li><a href="/js/es6-module.html" class="sidebar-link">Module 对象</a></li><li><a href="/js/es6-number.html" class="sidebar-link">数值扩展</a></li><li><a href="/js/es6-object.html" class="sidebar-link">对象扩展</a></li><li><a href="/js/es6-promise.html" class="sidebar-link">Promise 对象</a></li><li><a href="/js/es6-proxy-reflect.html" class="sidebar-link">Proxy 和 Reflect</a></li><li><a href="/js/es6-set-map.html" class="sidebar-link">Set和Map数据结构</a></li><li><a href="/js/es6-string.html" class="sidebar-link">字符串扩展</a></li><li><a href="/js/es6-symbol.html" class="sidebar-link">Symbol</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>nodejs</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/js/node-introdect.html" class="sidebar-link">node 介绍</a></li><li><a href="/js/node-buffer.html" class="sidebar-link">buffer 模块</a></li><li><a href="/js/node-cheerio.html" class="sidebar-link">cheerio 模块</a></li><li><a href="/js/node-cluster.html" class="sidebar-link">cluster 集群</a></li><li><a href="/js/node-egg.html" class="sidebar-link">egg 基础应用</a></li><li><a href="/js/node-events.html" class="sidebar-link">events 模块</a></li><li><a href="/js/node-express.html" class="sidebar-link">express 基础应用</a></li><li><a href="/js/node-fs.html" class="sidebar-link">fs 模块</a></li><li><a href="/js/node-http.html" class="sidebar-link">http 模块</a></li><li><a href="/js/node-koa.html" class="sidebar-link">koa 基础应用</a></li><li><a href="/js/node-net.html" class="sidebar-link">net 模块</a></li><li><a href="/js/node-process.html" class="sidebar-link">process 进程</a></li><li><a href="/js/node-querystring.html" class="sidebar-link">querystring 模块</a></li><li><a href="/js/node-stream.html" class="sidebar-link">stream 模块</a></li><li><a href="/js/node-session-cookie.html" class="sidebar-link">session 与 cookie</a></li><li><a href="/js/node-url.html" class="sidebar-link">url 模块</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>vue框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/js/mvvm.html" class="sidebar-link">mvvm 框架介绍</a></li><li><a href="/js/jquery-code.html" class="sidebar-link">jquery 源码分析</a></li><li><a href="/js/undescore.html" class="sidebar-link">undescore 源码分析</a></li><li><a href="/js/vue-lifecycle.html" class="sidebar-link">Vue生命周期</a></li><li><a href="/js/vue-bind.html" class="sidebar-link">vue 双向数据绑定原理</a></li><li><a href="/js/vue-nexttick.html" class="sidebar-link">Vue.netTick理解与分析</a></li><li><a href="/js/vue-watch.html" class="sidebar-link">Vue中的computed,watch,methods理解与分析</a></li><li><a href="/js/vue-code.html" class="sidebar-link">vue 源码分析</a></li><li><a href="/js/vue-diff.html" class="sidebar-link">diff 算法</a></li><li><a href="/js/vue-router-code.html" class="sidebar-link">vue-router 源码分析</a></li><li><a href="/js/vue-communication.html" class="active sidebar-link">vue 组件通信</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/vue-communication.html#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/js/vue-communication.html#内容" class="sidebar-link">内容</a></li><li class="sidebar-sub-header"><a href="/js/vue-communication.html#联系作者" class="sidebar-link">联系作者</a></li></ul></li><li><a href="/js/vue-router.html" class="sidebar-link">vue-router 学习及原理</a></li><li><a href="/js/vue-vuex.html" class="sidebar-link">vuex 学习及原理</a></li><li><a href="/js/vue-vuex-code.html" class="sidebar-link">vue-vuex 源码分析</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue-组件通信"><a href="#vue-组件通信" aria-hidden="true" class="header-anchor">#</a> vue 组件通信</h1> <h2 id="前言"><a href="#前言" aria-hidden="true" class="header-anchor">#</a> 前言</h2> <p>组件是vue.js最强大的功能之一，而组件实例的作用域是相互独立的，这就意味着不同组件之间的数据无法相互引用。一般来说，组件可以有以下几种关系：</p> <p><img src="vue03.png" alt="images"></p> <p>如上图所示，A和B、B和C、B和D都是父子关系，C和D是兄弟关系，A和C是隔代关系（可能隔多代）。</p> <p>针对不同的使用场景，如何选择行之有效的通信方式？这是我们所要探讨的主题。本文总结了vue组件间通信的几种方式，如<code>props</code>、<code>$emit</code>/<code>$on</code>、<code>vuex</code>、<code>$parent</code> / <code>$children</code>、<code>$attrs</code>/<code>$listeners</code>和<code>provide</code>/<code>inject</code>，以通俗易懂的实例讲述这其中的差别及使用场景，希望对小伙伴有些许帮助。</p> <h2 id="内容"><a href="#内容" aria-hidden="true" class="header-anchor">#</a> 内容</h2> <ul><li><a href="#%E4%B8%80%E3%80%81props-emit">props/$emit</a></li> <li><a href="#%E4%BA%8C%E3%80%81-emit-on">$emit/$on</a></li> <li><a href="#%E4%B8%89%E3%80%81vuex">vuex</a></li> <li><a href="#%E5%9B%9B%E3%80%81-attrs-listeners">$attrs/$listeners</a></li> <li><a href="#%E4%BA%94%E3%80%81provide-inject">provide/inject</a></li> <li><a href="#%E5%85%AD%E3%80%81-parent-chilren%E4%B8%8Eref">$parent/$chilren与ref</a></li></ul> <h3 id="一、props-emit"><a href="#一、props-emit" aria-hidden="true" class="header-anchor">#</a> 一、<code>props</code>/<code>$emit</code></h3> <p>父组件A通过props的方式向子组件B传递，B to A通过在B组件中v-on的方式实现。</p> <h4 id="_1-1-父组件向子组件传值"><a href="#_1-1-父组件向子组件传值" aria-hidden="true" class="header-anchor">#</a> 1.1 父组件向子组件传值</h4> <p>接下来我们通过一个例子，说明父组件如何向子组件传递值：在子组件User.vue中如何获取父组件App.vue中的数据<code>users:[&quot;Henry&quot;,&quot;Bucky&quot;,&quot;Emily&quot;]</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// App.vue组件
&lt;template&gt;
    &lt;div id=&quot;app&quot;&gt;
        &lt;users v-bind:users=&quot;users&quot;&gt;&lt;/users&gt;    // 前者自定义名称便于子组件调用，后者要传递数据名
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import Users from './components/Users'
export default{
    name:'App',
    data(){
        return {
            users:['Henry','Bucky','Emily']
        }
    },
    components:{
        'users':Users
    }
}
&lt;/script&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>// users子组件
&lt;template&gt;
    &lt;div class=&quot;hello&quot;&gt;
        &lt;ul&gt;
            &lt;li v-for=&quot;user in users&quot;&gt;{{user}}&lt;/li&gt; // 遍历传递过来的值，然后呈现到页面
        &lt;/ul&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
export default{
    name:'HelloWorld',
    props:{
        users:{     // 这个就是父组件中子标签自定义名字
            type:Array,
            required:true
        }
    }
}
&lt;/script&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><strong>总结：父组件通过props向下传递数据给子组件。注：组件中的数据共有三种形式：data、props、computed</strong></p> <h4 id="_1-2-子组件向父组件传值（通过事件形式）"><a href="#_1-2-子组件向父组件传值（通过事件形式）" aria-hidden="true" class="header-anchor">#</a> 1.2 子组件向父组件传值（通过事件形式）</h4> <p>接下来我们通过一个例子，说明子组件如何向父组件传递值：当我们点击“Vue.js Demo”后，子组件向父组件传递值，文字由原来的“传递的是一个值”变成“子向父组件传值”，实现子组件向父组件值的传递。</p> <p><img src="vue04.png" alt="images"></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// 子组件
&lt;template&gt;
    &lt;header&gt;
        &lt;h1 @click=&quot;changeTitle&quot;&gt;{{title}}&lt;/h1&gt;   //绑定一个点击事件
    &lt;/header&gt;
&lt;/template&gt;
&lt;script&gt;
export default{
    name:'app-header',
    data(){
        return{
            title:'Vue.js Demo'
        }
    },
    methods:{
        changeTitle(){
            this.$emit('titleChanged','子向父组件传值');    // 自定义事件  传递值“子向父组件传值”
        }
    }
}
&lt;/script&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>// 父组件
&lt;template&gt;
    &lt;div id=&quot;app&quot;&gt;
        &lt;app-header v-on:titleChanged=&quot;updateTitle&quot;&gt;   // 与子组件titleChanged自定义事件保持一致，updateTitle($event)接受传递过来的文字
        &lt;/app-header&gt;
        &lt;h2&gt;{{title}}&lt;/h2&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import Header from './components/Header'
export default{
    name:'App',
    data(){
        return {
            title:&quot;传递的是一个值&quot;
        }
    },
    methods:{
        updateTitle(e){ //声明这个函数
            this.title = e;
        }
    },
    components:{
        'app-header':Header
    }
}
&lt;/script&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p><strong>总结：子组件通过events给父组件发送消息，实际上就是子组件把自己的数据发送到父组件。</strong></p> <h3 id="二、-emit-on"><a href="#二、-emit-on" aria-hidden="true" class="header-anchor">#</a> 二、<code>$emit</code>/<code>$on</code></h3> <p>**这种方法通过一个空的Vue实例作为中央事件总线（事件中心），用它来触发事件和监听，巧妙而轻量地实现了任何组件间的通信，包括父子、兄弟、跨级。**当我们的项目比较大的时，可以选择更好的状态管理解决方案vuex。</p> <h4 id="_2-1-具体实现方式"><a href="#_2-1-具体实现方式" aria-hidden="true" class="header-anchor">#</a> 2.1 具体实现方式</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>var Event = new Vue();
Event.$emit(事件名，数据);
Event.$on(事件名，data=&gt;{});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_2-2-举个例子"><a href="#_2-2-举个例子" aria-hidden="true" class="header-anchor">#</a> 2.2 举个例子</h3> <p>假设兄弟组件有三个，分别是A、B、C组件，C组件如何获取A或者B组件的数据</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;div id=&quot;itany&quot;&gt;
    &lt;my-a&gt;&lt;/my-a&gt;
    &lt;my-b&gt;&lt;/my-b&gt;
    &lt;my-c&gt;&lt;/my-c&gt;
&lt;/div&gt;
&lt;template id=&quot;a&quot;&gt;

&lt;/template&gt;
&lt;template id=&quot;b&quot;&gt;

&lt;/template&gt;
&lt;template id=&quot;c&quot;&gt;

&lt;/template&gt;
&lt;script&gt;
var Event = new Vue();  //定义一个空的Vue实例
var A = {
    template:'#a',
    data(){
        return{
            name:'tom'
        }
    },
    methods:{
        send(){
            Event.$emit('data-a',this.name);
        }
    }
};
var B = {
    template:'#b',
    data(){
        return {
            age:20
        }
    },
    methods:{
        send(){
            Event.$emit('data-b',this.age);
        }
    }
};
var C = {
    template:'#c',
    data(){
        return {
            name:'',
            age:''
        }
    },
    mounted(){  //在模板编译完成执行
        Event.$on('data-a',name=&gt;{
            this.name = name;     //箭头函数内部不会产生新this，这边如果不用=&gt;，this指代Event
        })
        Event.$on('data-b',age=&gt;{
            this.age = age;
        })
    }
};
var vm = new Vue({
    el:'#itany',
    components:{
        'my-a':A,
        'my-b':B,
        'my-c':C
    }
});
&lt;/script&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br></div></div><p><img src="vue05.gif" alt="images"></p> <p><code>$on</code>监听了自定义事件data-a和data-b，因为有时不确定何时会触发事件，一般会在mounted或created钩子中来监听。</p> <h3 id="三、vuex"><a href="#三、vuex" aria-hidden="true" class="header-anchor">#</a> 三、vuex</h3> <p><img src="vue06.png" alt="images"></p> <h4 id="_3-1-介绍vuex"><a href="#_3-1-介绍vuex" aria-hidden="true" class="header-anchor">#</a> 3.1 介绍Vuex</h4> <p>Vuex实现了一个单向数据流，在全局拥有一个State存放数据，当组件要更改State中的数据时，必须通过</p> <h4 id="_3-2-功能"><a href="#_3-2-功能" aria-hidden="true" class="header-anchor">#</a> 3.2 功能</h4> <ul><li><code>Vue Components</code>：Vue组件。HTML页面上，负责接收用户操作等交互行为，执行dispatch方法触发对应action进行回应。</li> <li><code>dispatch</code>：操作行为触发方法，是唯一能执行action的方法。</li> <li><code>actions</code>：**操作行为处理模块由组件中的<code>$store.dispatch('action 名称',data1)</code>来触发。然后由commit()来触发mutation的调用，间接更新state。**负责处理Vue Components接收到的所有交互行为。包含同步/异步操作，支持多个同名方法，按照注册的顺序依次触发。向后台API请求的操作就在这个模块中进行，包括触发其他action以及提交mutation的操作。该模块提供了Promise的封装，以支持action的链式触发。</li> <li><code>commit</code>：状态改变提交操作方法。对mutation进行提交，是唯一能执行mutation的方法。</li> <li><code>mutations</code>：**状态改变操作方法，由actions中的<code>commit('mutation 名称')</code>来触发。**是Vuex修改state的唯一推荐方法。该方法只能进行同步操作，且方法名只能全局唯一。操作之中会有一些hook暴露出来，以进行state的监控等。</li> <li><code>state</code>：页面状态管理容器对象。集中存储Vue.components中data对象的零散数据，全局唯一，以进行统一的状态管理。页面显示所需的数据从该对象中进行读取，利用Vue的细粒度数据响应机制来进行高效的状态更新。</li> <li><code>getters</code>：state对象读取方法。图中没有单独列出该模块，应该被包含在了render中，Vue Components通过方法读取全局state对象。</li></ul> <h4 id="_3-3-vuex与localstorage"><a href="#_3-3-vuex与localstorage" aria-hidden="true" class="header-anchor">#</a> 3.3 Vuex与localStorage</h4> <p>vuex是vue的状态管理器，存储的数据是响应式的。但是并不会保存起来，刷新之后就回到了初始状态，<strong>具体做应该在vuex里数据改变的时候把数据拷贝一份保存到localStorage里面，刷新之后，如果localStorage里有保存的数据，取出来再替换store里的state。</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>let defaultCity = &quot;上海&quot;
try{    // 用户关闭了本地存储功能，此时在外层加个try...catch
    if(!defaultCity){
        defaultCity = JSON.parse(window.localStorage.getItem('defaultCity'))
    }
}catch(e){}
export default new Vuex.Store({
    state:{
        city: defaultCity
    },
    mutations:{
        changeCity(state,city){
            state.city = city
            try{
                window.localStorage.setItem('defaultCity',JSON.stringify(state.city));
                // 数据改变的时候把数据拷贝一份保存到localStorage里面
            }catch(e){}
        }
    }
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>这里需要注意的是：由于vuex里，我们保存的状态，都是数组，而localStorage只支持字符串，所以需要用JSON转换：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>JSON.stringify(state.subscribeList);    //  array -&gt; string
JSON.parse(window.localStorage.getItem(&quot;subscribeList&quot;))    // string -&gt; array
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="四、-attrs-listeners"><a href="#四、-attrs-listeners" aria-hidden="true" class="header-anchor">#</a> 四、<code>$attrs</code>/<code>$listeners</code></h3> <h4 id="_4-1-简介"><a href="#_4-1-简介" aria-hidden="true" class="header-anchor">#</a> 4.1 简介</h4> <p>多级组件嵌套需要传递数据时，通常使用的方法是通过vuex。但如果仅仅是传递数据，而不做中间处理，使用vuex处理，未免有点大材小用。为此Vue2.4版本提供了另一种方法----<code>$attrs</code>/<code>$listeners</code></p> <ul><li><code>$attrs</code>：包含了父作用域中不被prop所识别(且获取)的除绑定(class和style除外)。当一个组件没有声明任何prop时，这里会包含所有父作用域的绑定(class和style除外)，并且可以通过v-bind=&quot;$attrs&quot;传入内部组件。通常配合inheritAttrs选项一起使用。</li> <li><code>$listeners</code>：包含了父作用域中的(不含.native修饰器的)v-on事件听器。它可以通过v-on=&quot;$listeners&quot;传入内部组件</li></ul> <h4 id="_4-2-例子"><a href="#_4-2-例子" aria-hidden="true" class="header-anchor">#</a> 4.2 例子</h4> <p>接下来我们看个跨级通信的例子：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// index.vue
&lt;template&gt;
  &lt;div&gt;
    &lt;h2&gt;小武子&lt;/h2&gt;
    &lt;child-com1
      :foo=&quot;foo&quot;
      :boo=&quot;boo&quot;
      :coo=&quot;coo&quot;
      title=&quot;fttony&quot;
    &gt;&lt;/child-com1&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
const childCom1 = () =&gt; import('./attrsChild.vue')
export default {
  components: { childCom1 },
  data () {
    return {
      foo: 'JavaScript',
      boo: 'Html',
      coo: 'CSS',
      doo: 'Vue'
    }
  }
}
&lt;/script&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>// childCom1.vue

&lt;template&gt;
  &lt;div&gt;
    &lt;p&gt;foo:{{foo}}&lt;/p&gt;
    &lt;p&gt;childCom1的$attrs:{{$attrs}}&lt;/p&gt;
    &lt;child-com2 v-bind=&quot;$attrs&quot;&gt;&lt;/child-com2&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
const childCom2 = () =&gt; import('./attrsChild2.vue');
export default {
  components: {
    childCom2
  },
  inheritAttrs: false, // 可以关闭自动挂载到组件根元素上的没有在props声明的属性
  props: {
    foo: String // foo作为props属性绑定
  },
  created () {
    console.log(this.$attrs);
  }
}
&lt;/script&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;template&gt;
  &lt;div&gt;
    &lt;p&gt;boo:{{boo}}&lt;/p&gt;
    &lt;p&gt;childCom2:{{$attrs}}&lt;/p&gt;
    &lt;child-com3 v-bind=&quot;$attrs&quot;&gt;&lt;/child-com3&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
const childCom3 = () =&gt; import('./attrsChild3.vue');
export default {
  components: {
    childCom3
  },
  inheritAttrs: false,
  props: {
    boo: String
  },
  created () {
    console.log(this.$attrs)
  }
}
&lt;/script&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;template&gt;
  &lt;div&gt;
    &lt;p&gt;childCom3{{$attrs}}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
export default {
  props: {
    coo: String,
    title: String
  }
}
&lt;/script&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><img src="vue07.png" alt="images"></p> <p>如上图所示<code>$attrs</code>表示没有继承数据的对象，格式的{属性名：属性值}。Vue2.4提供了<code>$attrs</code>、<code>$listeners</code>来传递数据与事件，跨级组件之间的通讯变得更简单。</p> <p>简单来说：<code>$attrs</code>与<code>$listeners</code>是两个对象，<code>$attrs</code>里存放的是父组件中绑定的非Props属性，<code>$listeners</code>里存放的是父组件中绑定的非原生事件。</p> <h3 id="五、provide-inject"><a href="#五、provide-inject" aria-hidden="true" class="header-anchor">#</a> 五、<code>provide</code>/<code>inject</code></h3> <h4 id="_5-1-简介"><a href="#_5-1-简介" aria-hidden="true" class="header-anchor">#</a> 5.1 简介</h4> <p>Vue2.2.0新增API,这对选项需要一起使用，<strong>以允许一个祖先组件向其所有子孙后代注入一个依赖，不论组件层次有多深，并在起一下游关系成立的时间里始终生效。</strong> 一言而蔽之：祖先组件中通过provider来提供变量，然后在子孙组件中通过inject来注入变量。</p> <p>provide/iject API <strong>主要解决了跨级组件间的通信问题，不过它的使用场景，主要是子组件获取上级组件的状态，跨级组件间建立了一种主动提供与依赖注入的关系。</strong></p> <h4 id="_5-2-例子"><a href="#_5-2-例子" aria-hidden="true" class="header-anchor">#</a> 5.2 例子</h4> <p>假设有两个组件：A.vue和B.vue，B是A的子组件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// A.vue
export default{
    provide:{
        name:'小武子'
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>// B.vue
export default{
    inject:['name'],
    mounted(){
        console.log(this.name); // 小武子
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>可以看到，在A.vue里，我们设置了一个provide:name，值为小武子，它的作用就是将name这个变量提供给它的所有子组件。而在B.vue中，通过<code>inject</code>注入了从A组件中提供的name变量，那么在组件B中，</p> <p>需要注意的是：<strong>provide和inject绑定并不是可响应的。这是刻意为之的。然而，如果你传入了一个可监听的对象，那么其对象的属性还是可响应的</strong>——vue官方访文档</p> <p>所以，上面A.vue的name如果改变了，B.vue的this.name是不会改变的，仍然是小武子。</p> <h4 id="_5-3-provide与inject怎么实现数据响应式"><a href="#_5-3-provide与inject怎么实现数据响应式" aria-hidden="true" class="header-anchor">#</a> 5.3 provide与inject怎么实现数据响应式</h4> <p>一般来说，有两种方法：</p> <ul><li>provide祖先组件的实例</li> <li>使用2.6最新API Vue.observable优化响应式provide(推荐)</li></ul> <p>我们来看个例子：孙组件D、E和F获取A组件传递过来的color值，并能实现数据响应变化，即A组件的color变化后，组件D、E、F会跟着变（核心代码如下：）</p> <p><img src="vue08.png" alt="images"></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>//父组件:
provide: { //provide 是一个对象,提供一个属性或方法
  foo: '这是 foo',
  fooMethod:()=&gt;{
    console.log('父组件 fooMethod 被调用')
  }
},

// 子或者孙子组件
inject: ['foo','fooMethod'], //数组或者对象,注入到子组件
mounted() {
  this.fooMethod()
  console.log(this.foo)
}
//在父组件下面所有的子组件都可以利用inject
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>虽说provide 和 inject 主要为高阶插件/组件库提供用例，但如果你能在业务中熟练运用，可以达到事半功倍的效果！</p> <h3 id="六、-parent-chilren与ref"><a href="#六、-parent-chilren与ref" aria-hidden="true" class="header-anchor">#</a> 六、<code>$parent</code>/<code>$chilren</code>与ref</h3> <ul><li><code>ref</code>：如果在普通的DOM元素上使用，引用指向的就是DOM元素；如果用在子组件上，引用就指向组件实例</li> <li><code>$parent</code>/<code>$children</code>：访问父/子实例</li></ul> <p>需要注意的是：这两种都是直接得到组件实例，使用后可以直接调用组件的方法或访问数据。我们先来看个用<code>ref</code>来访问组件的例子：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// component-a 子组件
export default{
    data(){
        return {
            title:'Vue.js'
        }
    },
    methods:{
        sayHello(){
            console.log('Hello');
        }
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>// 父组件
&lt;template&gt;
    &lt;component-a ref=&quot;comA&quot;&gt;&lt;/component-a&gt;
&lt;/template&gt;
&lt;script&gt;
    export default{
        mounted(){
            const comA = this.$refs.comA;
            console.log(comA.title);    // Vue.js
            comA.sayHello();    // 弹窗
        }
    }
&lt;/script&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>不过，<strong>这两种方法的弊端是，无法在跨级或兄弟间通信。</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// parent.vue
&lt;component-a&gt;&lt;/component-a&gt;
&lt;component-b&gt;&lt;/component-b&gt;
&lt;component-b&gt;&lt;/component-b&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>我们想在component-a中，访问到引用它的页面中（这里就是parent.vue）的两个component-b组件，那这种情况下，就得配置额外的插件或工具了，比如Vuex和Bus的解决方案。</p> <h3 id="总结"><a href="#总结" aria-hidden="true" class="header-anchor">#</a> 总结</h3> <p>常用使用场景可以分为三类：</p> <ul><li>父子通信：父向子传递数据是通过props，子向父是通过events(<code>$emit</code>)；通过父链/子链也可以通信（<code>$parent</code>/<code>$children</code>）；ref也可以访问组件实例；provide/inject API;<code>$attrs/$listeners</code>；</li> <li>兄弟通信：Bus、Vuex；</li> <li>跨级通信：Bus、Vuex、provide / inject API、<code>$attrs/$listeners</code></li></ul> <h3 id="参考资料"><a href="#参考资料" aria-hidden="true" class="header-anchor">#</a> 参考资料</h3> <ul><li><a href="https://juejin.im/post/5bd97e7c6fb9a022852a71cf" target="_blank" rel="noopener noreferrer">vue 组件通信全揭秘(共 7 章)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://juejin.im/post/5cde0b43f265da03867e78d3" target="_blank" rel="noopener noreferrer">vue 组件间通信六种方式（完整版）<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.cnblogs.com/tugenhua0707/p/11761280.html" target="_blank" rel="noopener noreferrer">vue系列---Vue组件化的实现原理（八）<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="联系作者"><a href="#联系作者" aria-hidden="true" class="header-anchor">#</a> 联系作者</h2> <div align="center"><p>
        平凡世界，贵在坚持。
    </p> <img src="/about/contact.png"></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新于:</span> <span class="time">2019-11-1 10:40:22</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/js/vue-router-code.html" class="prev">vue-router 源码分析</a></span> <span class="next"><a href="/js/vue-router.html">vue-router 学习及原理</a>→
    </span></p></div> </main></div><div class="global-ui"><!----><!----><div></div></div></div>
    <script src="/assets/js/app.317e8fe1.js" defer></script><script src="/assets/js/2.67134772.js" defer></script><script src="/assets/js/162.93ebb0b4.js" defer></script><script src="/assets/js/3.65dbdf4c.js" defer></script>
  </body>
</html>
